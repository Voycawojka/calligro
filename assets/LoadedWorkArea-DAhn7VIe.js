import{c as Ce,D as sn,C as gt,r as c,a as he,b as dt,V as ht,F as Ie,d as ft,i as hn,I as xt,e as mt,L as pt,T as yt,f as Ft,g as Ct,h as St,A as bt,j as En,s as An,k as vt,l as Et,m as jn,n as At,o as zt,p as wt,S as Pt,q as zn,u as Rt,t as It,R as Dt,M as Mt,v as Nt,w as Lt,x as kt,y as ln,z as jt,B as Bt,E as Tt,G as Ht,P as ae,H as i,J as _e,K as te,N as T,O as se,Q as ie,U as Bn,W as Ot,X as Ge,Y as Ue,Z as fn,_ as Ve,$ as O,a0 as $t,a1 as cn,a2 as Tn,a3 as xn,a4 as mn,a5 as Hn,a6 as _t,a7 as Gt,a8 as Ye,a9 as Ut}from"./app-SNX2SECY.js";const un=({className:e,compact:n=!1,tagName:t="div",...a})=>{const o=Ce(sn,{[gt]:n},e);return c.createElement(t,{...a,className:o})};un.displayName=`${he}.Divider`;const On=c.forwardRef((e,n)=>{const{children:t,className:a,fill:o,vertical:r,...s}=e,l=Ce(dt,{[Ie]:o,[ht]:r},a);return c.createElement("div",{role:"group",...s,ref:n,className:l},t)});On.displayName=`${he}.ControlGroup`;const j=e=>{const{children:n,className:t,contentClassName:a,disabled:o,fill:r,helperText:s,inline:l,intent:u,label:d,labelFor:x,labelInfo:f,style:g,subLabel:h,...m}=e,p=Ce(ft,hn(u),{[mt]:o,[Ie]:r,[xt]:l},t);return c.createElement("div",{className:p,style:g,...m},d&&c.createElement("label",{className:pt,htmlFor:x},d," ",c.createElement("span",{className:yt},f)),h&&c.createElement("div",{className:Ft},h),c.createElement("div",{className:Ce(Ct,a)},n,s&&c.createElement("div",{className:St},s)))};j.displayName=`${he}.FormGroup`;const Vt=10;function Kt(e){const{onCompositionStart:n,onCompositionEnd:t,value:a,onChange:o}=e,[r,s]=c.useState(a),[l,u]=c.useState(a),[d,x]=c.useState(!1),[f,g]=c.useState(!1),h=c.useRef(),m=c.useCallback(R=>{var b;(b=h.current)===null||b===void 0||b.call(h),x(!0),n==null||n(R)},[n]),p=c.useCallback(()=>{const R=window.setTimeout(()=>x(!1),Vt);return()=>window.clearTimeout(R)},[]),F=c.useCallback(R=>{h.current=p(),t==null||t(R)},[p,t]),S=c.useCallback(R=>{const{value:b}=R.target;u(b),o==null||o(R)},[o]);if(!(d||a===void 0)){const R=l!==r;R&&a===l?(s(a),g(!1)):R&&a===r?f||g(!0):R&&a!==r?(s(a),u(a),g(!1)):R||(r!==a||f)&&(s(a),u(a),g(!1))}return{onChange:S,onCompositionEnd:F,onCompositionStart:m,value:d||f?l:r}}const $n=c.forwardRef(function(n,t){const{value:a,onChange:o,onCompositionStart:r,onCompositionEnd:s,...l}=n,{value:u,onChange:d,onCompositionStart:x,onCompositionEnd:f}=Kt({onChange:o,onCompositionEnd:s,onCompositionStart:r,value:a});return c.createElement("textarea",{...l,value:u,onChange:d,onCompositionStart:x,onCompositionEnd:f,ref:t})});$n.displayName=`${he}.AsyncControllableTextArea`;class Ne extends bt{constructor(){super(...arguments),this.state={},this.textareaElement=null,this.handleRef=En(this,"textareaElement",this.props.inputRef),this.maybeSyncHeightToScrollHeight=()=>{const{autoResize:n}=this.props;if(this.textareaElement!=null){const{scrollHeight:t}=this.textareaElement;n&&(this.textareaElement.style.height="0px",this.textareaElement.style.height=t.toString()+"px",this.setState({height:t}))}if(this.props.autoResize&&this.textareaElement!=null){this.textareaElement.style.height="0px";const{scrollHeight:t}=this.textareaElement;this.textareaElement.style.height=t.toString()+"px",this.setState({height:t})}},this.handleChange=n=>{var t,a;this.maybeSyncHeightToScrollHeight(),(a=(t=this.props).onChange)===null||a===void 0||a.call(t,n)}}componentDidMount(){this.maybeSyncHeightToScrollHeight()}componentDidUpdate(n){n.inputRef!==this.props.inputRef&&(An(n.inputRef,null),this.handleRef=En(this,"textareaElement",this.props.inputRef),An(this.props.inputRef,this.textareaElement)),(n.value!==this.props.value||n.style!==this.props.style)&&this.maybeSyncHeightToScrollHeight()}render(){const{asyncControl:n,autoResize:t,className:a,fill:o,inputRef:r,intent:s,large:l,size:u="medium",small:d,...x}=this.props,f=Ce(vt,Et,hn(s),jn(u,{large:l,small:d}),{[Ie]:o,[At]:t},a);let{style:g={}}=x;t&&this.state.height!=null&&(g={...g,height:`${this.state.height}px`});const h=n?$n:"textarea";return c.createElement(h,{...x,className:f,onChange:this.handleChange,style:g,ref:this.handleRef})}}Ne.defaultProps={autoResize:!1,fill:!1,large:!1,size:"medium",small:!1};Ne.displayName=`${he}.TextArea`;const _n=e=>{const{className:n,large:t,onRemove:a,size:o,tabIndex:r}=e,s=t||o==="large"||(n==null?void 0:n.includes(zt)),l=c.useCallback(u=>{a==null||a(u,e)},[a,e]);return c.createElement("button",{"aria-label":"Remove tag",type:"button",className:wt,onClick:l,tabIndex:r},c.createElement(Pt,{size:s?zn.LARGE:zn.STANDARD}))};_n.displayName=`${he}.TagRemoveButton`;const ee=c.forwardRef((e,n)=>{const{children:t,className:a,endIcon:o,fill:r=!1,icon:s,intent:l,interactive:u,large:d=!1,minimal:x=!1,multiline:f,onRemove:g,rightIcon:h,round:m=!1,size:p="medium",tabIndex:F=0,htmlTitle:S,...I}=e,R=Tt(g),b=u??I.onClick!=null,[$,D]=Rt(b,e,n,{defaultTabIndex:0,disabledTabIndex:void 0}),v=Ce(It,hn(l),jn(p,{large:d}),{[Lt]:$,[Ie]:r,[Nt]:b,[Mt]:x,[Dt]:m},a);return c.createElement("span",{...kt(I),...D,className:v,role:b?"button":void 0},c.createElement(ln,{icon:s}),!jt(t)&&c.createElement(Bt,{className:Ie,ellipsize:!f,tagName:"span",title:S},t),c.createElement(ln,{icon:o??h}),R&&c.createElement(_n,{...e}))});ee.displayName=`${he}.Tag`;async function Wt(){return new Promise(e=>setTimeout(e,0))}const xe=window.require?window.require("electron").ipcRenderer:null,Jt=["American Typewriter","Andale Mono","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Avenir","Avenir Next","Avenir Next Condensed","Bahnschrift","Baskerville","Big Caslon","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bradley Hand","Brush Script MT","Calibri","Cambria","Cambria Math","Candara","Chalkboard","Chalkboard SE","Chalkduster","Charter","Cochin","Comic Sans MS","Consolas","Constantia","Copperplate","Corbel","Courier","Courier New","DIN Alternate","DIN Condensed","Didot","Ebrima","Franklin Gothic Medium","Futura","Gabriola","Gadugi","Geneva","Georgia","Gill Sans","Helvetica","Helvetica Neue","Herculanum","Hoefler Text","HoloLens MDL2 Assets","Impact","Ink Free","Javanese Text","Leelawadee UI","Lucida Console","Lucida Grande","Lucida Sans Unicode","Luminari","MS Gothic","MV Boli","Malgun Gothic","Marker Felt","Marlett","Menlo","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft YaHei","Microsoft Yi Baiti","MingLiU-ExtB","Monaco","Mongolian Baiti","Myanmar Text","Nirmala UI","Noteworthy","Optima","Palatino","Palatino Linotype","Papyrus","Phosphate","Rockwell","Savoye LET","Segoe MDL2 Assets","Segoe Print","Segoe Script","Segoe UI","Segoe UI Emoji","Segoe UI Historic","Segoe UI Symbol","SignPainter","SimSun","Sitka","Skia","Snell Roundhand","Sylfaen","Symbol","Tahoma","Times","Times New Roman","Trattatello","Trebuchet MS","Verdana","Webdings","Wingdings","Yu Gothic","Zapfino"];async function qt(){await document.fonts.ready;const e=[];for(const n of Jt)document.fonts.check(`12px "${n}"`)&&e.push(n),await Wt();return e}function Xt(){return new Promise(e=>{xe==null||xe.once("fonts",(n,t)=>e(t.fonts)),xe==null||xe.send("request-fonts")})}function Yt(){return Ht()?Xt():qt()}function Se(e,n,t=0){const a=c.useContext(ae),o=c.useRef(null),r=l=>{l!==n[e]&&a({...n,[e]:l,dirty:!0})},s=l=>{t>0?(o.current&&clearTimeout(o.current),o.current=setTimeout(()=>r(l),t)):r(l)};return[n[e],s]}function Zt({project:e,forceDisabled:n}){const[t,a]=Se("prefill",e),[o,r]=c.useState([]);c.useEffect(()=>{(async()=>{try{r(await Yt())}catch(d){(await Bn.create({position:"top-right"})).show({icon:"error",intent:"danger",message:`Couldn't load pre-fill font list: ${d.message}`})}})()},[]);const s=(u,{handleClick:d,handleFocus:x,modifiers:f})=>f.matchesPredicate?i.jsx(se,{active:f.active,disabled:f.disabled,onClick:d,onFocus:x,roleStructure:"listoption",text:u,label:"ABC abc",style:{fontFamily:u}},u):null,l=(u,d,x,f)=>{const g=u.toLowerCase(),h=d.toLowerCase();return f?g===h:h.includes(g)};return i.jsxs(j,{label:"Pre-fill",disabled:n,children:[i.jsxs(On,{children:[i.jsx(_e,{items:o,itemRenderer:s,itemPredicate:l,noResults:i.jsx(se,{disabled:!0,text:"No fonts found",roleStructure:"listoption"}),onItemSelect:a,popoverProps:{minimal:!0},disabled:n,children:i.jsx(te,{content:"Base for drawing on the template",compact:!0,children:i.jsx(T,{icon:"font",text:t??"blank",endIcon:"caret-down",disabled:n})})}),t&&i.jsx(te,{content:"Remove prefill",compact:!0,children:i.jsx(T,{endIcon:"remove",onClick:()=>a(null),disabled:n})})]}),t&&i.jsx(ie,{icon:"info-sign",children:"Be mindful of the font's license."})]})}const Qt=JSON.parse('[{"category":"Control Character","hexrange":["0000","001F"],"range":[0,31]},{"category":"Basic Latin","hexrange":["0020","007F"],"range":[32,127]},{"category":"Latin-1 Supplement","hexrange":["0080","00FF"],"range":[128,255]},{"category":"Latin Extended-A","hexrange":["0100","017F"],"range":[256,383]},{"category":"Latin Extended-B","hexrange":["0180","024F"],"range":[384,591]},{"category":"IPA Extensions","hexrange":["0250","02AF"],"range":[592,687]},{"category":"Spacing Modifier Letters","hexrange":["02B0","02FF"],"range":[688,767]},{"category":"Combining Diacritical Marks","hexrange":["0300","036F"],"range":[768,879]},{"category":"Greek and Coptic","hexrange":["0370","03FF"],"range":[880,1023]},{"category":"Cyrillic","hexrange":["0400","04FF"],"range":[1024,1279]},{"category":"Cyrillic Supplement","hexrange":["0500","052F"],"range":[1280,1327]},{"category":"Armenian","hexrange":["0530","058F"],"range":[1328,1423]},{"category":"Hebrew","hexrange":["0590","05FF"],"range":[1424,1535]},{"category":"Arabic","hexrange":["0600","06FF"],"range":[1536,1791]},{"category":"Syriac","hexrange":["0700","074F"],"range":[1792,1871]},{"category":"Arabic Supplement","hexrange":["0750","077F"],"range":[1872,1919]},{"category":"Thaana","hexrange":["0780","07BF"],"range":[1920,1983]},{"category":"NKo","hexrange":["07C0","07FF"],"range":[1984,2047]},{"category":"Samaritan","hexrange":["0800","083F"],"range":[2048,2111]},{"category":"Mandaic","hexrange":["0840","085F"],"range":[2112,2143]},{"category":"Arabic Extended-A","hexrange":["08A0","08FF"],"range":[2208,2303]},{"category":"Devanagari","hexrange":["0900","097F"],"range":[2304,2431]},{"category":"Bengali","hexrange":["0980","09FF"],"range":[2432,2559]},{"category":"Gurmukhi","hexrange":["0A00","0A7F"],"range":[2560,2687]},{"category":"Gujarati","hexrange":["0A80","0AFF"],"range":[2688,2815]},{"category":"Oriya","hexrange":["0B00","0B7F"],"range":[2816,2943]},{"category":"Tamil","hexrange":["0B80","0BFF"],"range":[2944,3071]},{"category":"Telugu","hexrange":["0C00","0C7F"],"range":[3072,3199]},{"category":"Kannada","hexrange":["0C80","0CFF"],"range":[3200,3327]},{"category":"Malayalam","hexrange":["0D00","0D7F"],"range":[3328,3455]},{"category":"Sinhala","hexrange":["0D80","0DFF"],"range":[3456,3583]},{"category":"Thai","hexrange":["0E00","0E7F"],"range":[3584,3711]},{"category":"Lao","hexrange":["0E80","0EFF"],"range":[3712,3839]},{"category":"Tibetan","hexrange":["0F00","0FFF"],"range":[3840,4095]},{"category":"Myanmar","hexrange":["1000","109F"],"range":[4096,4255]},{"category":"Georgian","hexrange":["10A0","10FF"],"range":[4256,4351]},{"category":"Hangul Jamo","hexrange":["1100","11FF"],"range":[4352,4607]},{"category":"Ethiopic","hexrange":["1200","137F"],"range":[4608,4991]},{"category":"Ethiopic Supplement","hexrange":["1380","139F"],"range":[4992,5023]},{"category":"Cherokee","hexrange":["13A0","13FF"],"range":[5024,5119]},{"category":"Unified Canadian Aboriginal Syllabics","hexrange":["1400","167F"],"range":[5120,5759]},{"category":"Ogham","hexrange":["1680","169F"],"range":[5760,5791]},{"category":"Runic","hexrange":["16A0","16FF"],"range":[5792,5887]},{"category":"Tagalog","hexrange":["1700","171F"],"range":[5888,5919]},{"category":"Hanunoo","hexrange":["1720","173F"],"range":[5920,5951]},{"category":"Buhid","hexrange":["1740","175F"],"range":[5952,5983]},{"category":"Tagbanwa","hexrange":["1760","177F"],"range":[5984,6015]},{"category":"Khmer","hexrange":["1780","17FF"],"range":[6016,6143]},{"category":"Mongolian","hexrange":["1800","18AF"],"range":[6144,6319]},{"category":"Unified Canadian Aboriginal Syllabics Extended","hexrange":["18B0","18FF"],"range":[6320,6399]},{"category":"Limbu","hexrange":["1900","194F"],"range":[6400,6479]},{"category":"Tai Le","hexrange":["1950","197F"],"range":[6480,6527]},{"category":"New Tai Lue","hexrange":["1980","19DF"],"range":[6528,6623]},{"category":"Khmer Symbols","hexrange":["19E0","19FF"],"range":[6624,6655]},{"category":"Buginese","hexrange":["1A00","1A1F"],"range":[6656,6687]},{"category":"Tai Tham","hexrange":["1A20","1AAF"],"range":[6688,6831]},{"category":"Combining Diacritical Marks Extended","hexrange":["1AB0","1AFF"],"range":[6832,6911]},{"category":"Balinese","hexrange":["1B00","1B7F"],"range":[6912,7039]},{"category":"Sundanese","hexrange":["1B80","1BBF"],"range":[7040,7103]},{"category":"Batak","hexrange":["1BC0","1BFF"],"range":[7104,7167]},{"category":"Lepcha","hexrange":["1C00","1C4F"],"range":[7168,7247]},{"category":"Ol Chiki","hexrange":["1C50","1C7F"],"range":[7248,7295]},{"category":"Sundanese Supplement","hexrange":["1CC0","1CCF"],"range":[7360,7375]},{"category":"Vedic Extensions","hexrange":["1CD0","1CFF"],"range":[7376,7423]},{"category":"Phonetic Extensions","hexrange":["1D00","1D7F"],"range":[7424,7551]},{"category":"Phonetic Extensions Supplement","hexrange":["1D80","1DBF"],"range":[7552,7615]},{"category":"Combining Diacritical Marks Supplement","hexrange":["1DC0","1DFF"],"range":[7616,7679]},{"category":"Latin Extended Additional","hexrange":["1E00","1EFF"],"range":[7680,7935]},{"category":"Greek Extended","hexrange":["1F00","1FFF"],"range":[7936,8191]},{"category":"General Punctuation","hexrange":["2000","206F"],"range":[8192,8303]},{"category":"Superscripts and Subscripts","hexrange":["2070","209F"],"range":[8304,8351]},{"category":"Currency Symbols","hexrange":["20A0","20CF"],"range":[8352,8399]},{"category":"Combining Diacritical Marks for Symbols","hexrange":["20D0","20FF"],"range":[8400,8447]},{"category":"Letterlike Symbols","hexrange":["2100","214F"],"range":[8448,8527]},{"category":"Number Forms","hexrange":["2150","218F"],"range":[8528,8591]},{"category":"Arrows","hexrange":["2190","21FF"],"range":[8592,8703]},{"category":"Mathematical Operators","hexrange":["2200","22FF"],"range":[8704,8959]},{"category":"Miscellaneous Technical","hexrange":["2300","23FF"],"range":[8960,9215]},{"category":"Control Pictures","hexrange":["2400","243F"],"range":[9216,9279]},{"category":"Optical Character Recognition","hexrange":["2440","245F"],"range":[9280,9311]},{"category":"Enclosed Alphanumerics","hexrange":["2460","24FF"],"range":[9312,9471]},{"category":"Box Drawing","hexrange":["2500","257F"],"range":[9472,9599]},{"category":"Block Elements","hexrange":["2580","259F"],"range":[9600,9631]},{"category":"Geometric Shapes","hexrange":["25A0","25FF"],"range":[9632,9727]},{"category":"Miscellaneous Symbols","hexrange":["2600","26FF"],"range":[9728,9983]},{"category":"Dingbats","hexrange":["2700","27BF"],"range":[9984,10175]},{"category":"Miscellaneous Mathematical Symbols-A","hexrange":["27C0","27EF"],"range":[10176,10223]},{"category":"Supplemental Arrows-A","hexrange":["27F0","27FF"],"range":[10224,10239]},{"category":"Braille Patterns","hexrange":["2800","28FF"],"range":[10240,10495]},{"category":"Supplemental Arrows-B","hexrange":["2900","297F"],"range":[10496,10623]},{"category":"Miscellaneous Mathematical Symbols-B","hexrange":["2980","29FF"],"range":[10624,10751]},{"category":"Supplemental Mathematical Operators","hexrange":["2A00","2AFF"],"range":[10752,11007]},{"category":"Miscellaneous Symbols and Arrows","hexrange":["2B00","2BFF"],"range":[11008,11263]},{"category":"Glagolitic","hexrange":["2C00","2C5F"],"range":[11264,11359]},{"category":"Latin Extended-C","hexrange":["2C60","2C7F"],"range":[11360,11391]},{"category":"Coptic","hexrange":["2C80","2CFF"],"range":[11392,11519]},{"category":"Georgian Supplement","hexrange":["2D00","2D2F"],"range":[11520,11567]},{"category":"Tifinagh","hexrange":["2D30","2D7F"],"range":[11568,11647]},{"category":"Ethiopic Extended","hexrange":["2D80","2DDF"],"range":[11648,11743]},{"category":"Cyrillic Extended-A","hexrange":["2DE0","2DFF"],"range":[11744,11775]},{"category":"Supplemental Punctuation","hexrange":["2E00","2E7F"],"range":[11776,11903]},{"category":"CJK Radicals Supplement","hexrange":["2E80","2EFF"],"range":[11904,12031]},{"category":"Kangxi Radicals","hexrange":["2F00","2FDF"],"range":[12032,12255]},{"category":"Ideographic Description Characters","hexrange":["2FF0","2FFF"],"range":[12272,12287]},{"category":"CJK Symbols and Punctuation","hexrange":["3000","303F"],"range":[12288,12351]},{"category":"Hiragana","hexrange":["3040","309F"],"range":[12352,12447]},{"category":"Katakana","hexrange":["30A0","30FF"],"range":[12448,12543]},{"category":"Bopomofo","hexrange":["3100","312F"],"range":[12544,12591]},{"category":"Hangul Compatibility Jamo","hexrange":["3130","318F"],"range":[12592,12687]},{"category":"Kanbun","hexrange":["3190","319F"],"range":[12688,12703]},{"category":"Bopomofo Extended","hexrange":["31A0","31BF"],"range":[12704,12735]},{"category":"CJK Strokes","hexrange":["31C0","31EF"],"range":[12736,12783]},{"category":"Katakana Phonetic Extensions","hexrange":["31F0","31FF"],"range":[12784,12799]},{"category":"Enclosed CJK Letters and Months","hexrange":["3200","32FF"],"range":[12800,13055]},{"category":"CJK Compatibility","hexrange":["3300","33FF"],"range":[13056,13311]},{"category":"CJK Unified Ideographs Extension A","hexrange":["3400","4DBF"],"range":[13312,19903]},{"category":"Yijing Hexagram Symbols","hexrange":["4DC0","4DFF"],"range":[19904,19967]},{"category":"CJK Unified Ideographs","hexrange":["4E00","9FFF"],"range":[19968,40959]},{"category":"Yi Syllables","hexrange":["A000","A48F"],"range":[40960,42127]},{"category":"Yi Radicals","hexrange":["A490","A4CF"],"range":[42128,42191]},{"category":"Lisu","hexrange":["A4D0","A4FF"],"range":[42192,42239]},{"category":"Vai","hexrange":["A500","A63F"],"range":[42240,42559]},{"category":"Cyrillic Extended-B","hexrange":["A640","A69F"],"range":[42560,42655]},{"category":"Bamum","hexrange":["A6A0","A6FF"],"range":[42656,42751]},{"category":"Modifier Tone Letters","hexrange":["A700","A71F"],"range":[42752,42783]},{"category":"Latin Extended-D","hexrange":["A720","A7FF"],"range":[42784,43007]},{"category":"Syloti Nagri","hexrange":["A800","A82F"],"range":[43008,43055]},{"category":"Common Indic Number Forms","hexrange":["A830","A83F"],"range":[43056,43071]},{"category":"Phags-pa","hexrange":["A840","A87F"],"range":[43072,43135]},{"category":"Saurashtra","hexrange":["A880","A8DF"],"range":[43136,43231]},{"category":"Devanagari Extended","hexrange":["A8E0","A8FF"],"range":[43232,43263]},{"category":"Kayah Li","hexrange":["A900","A92F"],"range":[43264,43311]},{"category":"Rejang","hexrange":["A930","A95F"],"range":[43312,43359]},{"category":"Hangul Jamo Extended-A","hexrange":["A960","A97F"],"range":[43360,43391]},{"category":"Javanese","hexrange":["A980","A9DF"],"range":[43392,43487]},{"category":"Myanmar Extended-B","hexrange":["A9E0","A9FF"],"range":[43488,43519]},{"category":"Cham","hexrange":["AA00","AA5F"],"range":[43520,43615]},{"category":"Myanmar Extended-A","hexrange":["AA60","AA7F"],"range":[43616,43647]},{"category":"Tai Viet","hexrange":["AA80","AADF"],"range":[43648,43743]},{"category":"Meetei Mayek Extensions","hexrange":["AAE0","AAFF"],"range":[43744,43775]},{"category":"Ethiopic Extended-A","hexrange":["AB00","AB2F"],"range":[43776,43823]},{"category":"Latin Extended-E","hexrange":["AB30","AB6F"],"range":[43824,43887]},{"category":"Cherokee Supplement","hexrange":["AB70","ABBF"],"range":[43888,43967]},{"category":"Meetei Mayek","hexrange":["ABC0","ABFF"],"range":[43968,44031]},{"category":"Hangul Syllables","hexrange":["AC00","D7AF"],"range":[44032,55215]},{"category":"Hangul Jamo Extended-B","hexrange":["D7B0","D7FF"],"range":[55216,55295]},{"category":"High Surrogates","hexrange":["D800","DB7F"],"range":[55296,56191]},{"category":"High Private Use Surrogates","hexrange":["DB80","DBFF"],"range":[56192,56319]},{"category":"Low Surrogates","hexrange":["DC00","DFFF"],"range":[56320,57343]},{"category":"Private Use Area","hexrange":["E000","F8FF"],"range":[57344,63743]},{"category":"CJK Compatibility Ideographs","hexrange":["F900","FAFF"],"range":[63744,64255]},{"category":"Alphabetic Presentation Forms","hexrange":["FB00","FB4F"],"range":[64256,64335]},{"category":"Arabic Presentation Forms-A","hexrange":["FB50","FDFF"],"range":[64336,65023]},{"category":"Variation Selectors","hexrange":["FE00","FE0F"],"range":[65024,65039]},{"category":"Vertical Forms","hexrange":["FE10","FE1F"],"range":[65040,65055]},{"category":"Combining Half Marks","hexrange":["FE20","FE2F"],"range":[65056,65071]},{"category":"CJK Compatibility Forms","hexrange":["FE30","FE4F"],"range":[65072,65103]},{"category":"Small Form Variants","hexrange":["FE50","FE6F"],"range":[65104,65135]},{"category":"Arabic Presentation Forms-B","hexrange":["FE70","FEFF"],"range":[65136,65279]},{"category":"Halfwidth and Fullwidth Forms","hexrange":["FF00","FFEF"],"range":[65280,65519]},{"category":"Specials","hexrange":["FFF0","FFFF"],"range":[65520,65535]},{"category":"Linear B Syllabary","hexrange":["10000","1007F"],"range":[65536,65663]},{"category":"Linear B Ideograms","hexrange":["10080","100FF"],"range":[65664,65791]},{"category":"Aegean Numbers","hexrange":["10100","1013F"],"range":[65792,65855]},{"category":"Ancient Greek Numbers","hexrange":["10140","1018F"],"range":[65856,65935]},{"category":"Ancient Symbols","hexrange":["10190","101CF"],"range":[65936,65999]},{"category":"Phaistos Disc","hexrange":["101D0","101FF"],"range":[66000,66047]},{"category":"Lycian","hexrange":["10280","1029F"],"range":[66176,66207]},{"category":"Carian","hexrange":["102A0","102DF"],"range":[66208,66271]},{"category":"Coptic Epact Numbers","hexrange":["102E0","102FF"],"range":[66272,66303]},{"category":"Old Italic","hexrange":["10300","1032F"],"range":[66304,66351]},{"category":"Gothic","hexrange":["10330","1034F"],"range":[66352,66383]},{"category":"Old Permic","hexrange":["10350","1037F"],"range":[66384,66431]},{"category":"Ugaritic","hexrange":["10380","1039F"],"range":[66432,66463]},{"category":"Old Persian","hexrange":["103A0","103DF"],"range":[66464,66527]},{"category":"Deseret","hexrange":["10400","1044F"],"range":[66560,66639]},{"category":"Shavian","hexrange":["10450","1047F"],"range":[66640,66687]},{"category":"Osmanya","hexrange":["10480","104AF"],"range":[66688,66735]},{"category":"Elbasan","hexrange":["10500","1052F"],"range":[66816,66863]},{"category":"Caucasian Albanian","hexrange":["10530","1056F"],"range":[66864,66927]},{"category":"Linear A","hexrange":["10600","1077F"],"range":[67072,67455]},{"category":"Cypriot Syllabary","hexrange":["10800","1083F"],"range":[67584,67647]},{"category":"Imperial Aramaic","hexrange":["10840","1085F"],"range":[67648,67679]},{"category":"Palmyrene","hexrange":["10860","1087F"],"range":[67680,67711]},{"category":"Nabataean","hexrange":["10880","108AF"],"range":[67712,67759]},{"category":"Hatran","hexrange":["108E0","108FF"],"range":[67808,67839]},{"category":"Phoenician","hexrange":["10900","1091F"],"range":[67840,67871]},{"category":"Lydian","hexrange":["10920","1093F"],"range":[67872,67903]},{"category":"Meroitic Hieroglyphs","hexrange":["10980","1099F"],"range":[67968,67999]},{"category":"Meroitic Cursive","hexrange":["109A0","109FF"],"range":[68000,68095]},{"category":"Kharoshthi","hexrange":["10A00","10A5F"],"range":[68096,68191]},{"category":"Old South Arabian","hexrange":["10A60","10A7F"],"range":[68192,68223]},{"category":"Old North Arabian","hexrange":["10A80","10A9F"],"range":[68224,68255]},{"category":"Manichaean","hexrange":["10AC0","10AFF"],"range":[68288,68351]},{"category":"Avestan","hexrange":["10B00","10B3F"],"range":[68352,68415]},{"category":"Inscriptional Parthian","hexrange":["10B40","10B5F"],"range":[68416,68447]},{"category":"Inscriptional Pahlavi","hexrange":["10B60","10B7F"],"range":[68448,68479]},{"category":"Psalter Pahlavi","hexrange":["10B80","10BAF"],"range":[68480,68527]},{"category":"Old Turkic","hexrange":["10C00","10C4F"],"range":[68608,68687]},{"category":"Old Hungarian","hexrange":["10C80","10CFF"],"range":[68736,68863]},{"category":"Rumi Numeral Symbols","hexrange":["10E60","10E7F"],"range":[69216,69247]},{"category":"Brahmi","hexrange":["11000","1107F"],"range":[69632,69759]},{"category":"Kaithi","hexrange":["11080","110CF"],"range":[69760,69839]},{"category":"Sora Sompeng","hexrange":["110D0","110FF"],"range":[69840,69887]},{"category":"Chakma","hexrange":["11100","1114F"],"range":[69888,69967]},{"category":"Mahajani","hexrange":["11150","1117F"],"range":[69968,70015]},{"category":"Sharada","hexrange":["11180","111DF"],"range":[70016,70111]},{"category":"Sinhala Archaic Numbers","hexrange":["111E0","111FF"],"range":[70112,70143]},{"category":"Khojki","hexrange":["11200","1124F"],"range":[70144,70223]},{"category":"Multani","hexrange":["11280","112AF"],"range":[70272,70319]},{"category":"Khudawadi","hexrange":["112B0","112FF"],"range":[70320,70399]},{"category":"Grantha","hexrange":["11300","1137F"],"range":[70400,70527]},{"category":"Tirhuta","hexrange":["11480","114DF"],"range":[70784,70879]},{"category":"Siddham","hexrange":["11580","115FF"],"range":[71040,71167]},{"category":"Modi","hexrange":["11600","1165F"],"range":[71168,71263]},{"category":"Takri","hexrange":["11680","116CF"],"range":[71296,71375]},{"category":"Ahom","hexrange":["11700","1173F"],"range":[71424,71487]},{"category":"Warang Citi","hexrange":["118A0","118FF"],"range":[71840,71935]},{"category":"Pau Cin Hau","hexrange":["11AC0","11AFF"],"range":[72384,72447]},{"category":"Cuneiform","hexrange":["12000","123FF"],"range":[73728,74751]},{"category":"Cuneiform Numbers and Punctuation","hexrange":["12400","1247F"],"range":[74752,74879]},{"category":"Early Dynastic Cuneiform","hexrange":["12480","1254F"],"range":[74880,75087]},{"category":"Egyptian Hieroglyphs","hexrange":["13000","1342F"],"range":[77824,78895]},{"category":"Anatolian Hieroglyphs","hexrange":["14400","1467F"],"range":[82944,83583]},{"category":"Bamum Supplement","hexrange":["16800","16A3F"],"range":[92160,92735]},{"category":"Mro","hexrange":["16A40","16A6F"],"range":[92736,92783]},{"category":"Bassa Vah","hexrange":["16AD0","16AFF"],"range":[92880,92927]},{"category":"Pahawh Hmong","hexrange":["16B00","16B8F"],"range":[92928,93071]},{"category":"Miao","hexrange":["16F00","16F9F"],"range":[93952,94111]},{"category":"Kana Supplement","hexrange":["1B000","1B0FF"],"range":[110592,110847]},{"category":"Duployan","hexrange":["1BC00","1BC9F"],"range":[113664,113823]},{"category":"Shorthand Format Controls","hexrange":["1BCA0","1BCAF"],"range":[113824,113839]},{"category":"Byzantine Musical Symbols","hexrange":["1D000","1D0FF"],"range":[118784,119039]},{"category":"Musical Symbols","hexrange":["1D100","1D1FF"],"range":[119040,119295]},{"category":"Ancient Greek Musical Notation","hexrange":["1D200","1D24F"],"range":[119296,119375]},{"category":"Tai Xuan Jing Symbols","hexrange":["1D300","1D35F"],"range":[119552,119647]},{"category":"Counting Rod Numerals","hexrange":["1D360","1D37F"],"range":[119648,119679]},{"category":"Mathematical Alphanumeric Symbols","hexrange":["1D400","1D7FF"],"range":[119808,120831]},{"category":"Sutton SignWriting","hexrange":["1D800","1DAAF"],"range":[120832,121519]},{"category":"Mende Kikakui","hexrange":["1E800","1E8DF"],"range":[124928,125151]},{"category":"Arabic Mathematical Alphabetic Symbols","hexrange":["1EE00","1EEFF"],"range":[126464,126719]},{"category":"Mahjong Tiles","hexrange":["1F000","1F02F"],"range":[126976,127023]},{"category":"Domino Tiles","hexrange":["1F030","1F09F"],"range":[127024,127135]},{"category":"Playing Cards","hexrange":["1F0A0","1F0FF"],"range":[127136,127231]},{"category":"Enclosed Alphanumeric Supplement","hexrange":["1F100","1F1FF"],"range":[127232,127487]},{"category":"Enclosed Ideographic Supplement","hexrange":["1F200","1F2FF"],"range":[127488,127743]},{"category":"Miscellaneous Symbols and Pictographs","hexrange":["1F300","1F5FF"],"range":[127744,128511]},{"category":"Emoticons (Emoji)","hexrange":["1F600","1F64F"],"range":[128512,128591]},{"category":"Ornamental Dingbats","hexrange":["1F650","1F67F"],"range":[128592,128639]},{"category":"Transport and Map Symbols","hexrange":["1F680","1F6FF"],"range":[128640,128767]},{"category":"Alchemical Symbols","hexrange":["1F700","1F77F"],"range":[128768,128895]},{"category":"Geometric Shapes Extended","hexrange":["1F780","1F7FF"],"range":[128896,129023]},{"category":"Supplemental Arrows-C","hexrange":["1F800","1F8FF"],"range":[129024,129279]},{"category":"Supplemental Symbols and Pictographs","hexrange":["1F900","1F9FF"],"range":[129280,129535]},{"category":"Supplemental Private Use Area-A","hexrange":["F0000","FFFFD"],"range":[983040,1048573]},{"category":"Supplemental Private Use Area-B","hexrange":["100000","10FFFD"],"range":[1048576,1114109]}]');var Ze,wn;function ea(){return wn||(wn=1,Ze=Qt),Ze}var na=ea();const Qe=Ot(na);function ta(){return Qe.splice(-2,2),Qe.sort((e,n)=>e.category.localeCompare(n.category,"en")),Qe}function aa(e){let n="";for(let t=e.range[0];t<e.range[1];t++)n+=String.fromCharCode(t);return n}function ra({isOpen:e,acceptedCharacters:n,setIsOpen:t,setAcceptedCharacters:a}){const[o,r]=c.useState(n),[s,l]=c.useState([]),[u,d]=c.useState(!1),[x,f]=c.useState(null);c.useEffect(()=>{l(ta())},[]);const g=()=>{const b=[...new Set(o.split(""))].join("");return r(b),d(!1),b},h=()=>{t(!1),f(null)},m=()=>{r(n),h()},p=()=>{f(null);const b=g();if(b.length===0){f("You need to specify at least one character");return}a(b),h()},F=b=>{r(b.target.value),d(/(.).*\1/.test(b.target.value)),f(null)},S=b=>{r(aa(b))},I=(b,{handleClick:$,handleFocus:D,modifiers:v})=>v.matchesPredicate?i.jsx(se,{active:v.active,disabled:v.disabled,onClick:$,onFocus:D,roleStructure:"listoption",text:b.category,label:`${b.range[1]-b.range[0]} characters`},b.category):null,R=(b,$,D,v)=>{const V=b.toLowerCase(),q=$.category.toLowerCase();return v?V===q:q.includes(V)};return i.jsxs(Ge,{title:"Character Set",icon:"translate",isOpen:e,onClose:h,children:[i.jsxs(Ue,{children:[i.jsxs("p",{children:[o.length," characters ",u&&i.jsx(te,{content:"Counter includes duplicates which will be removed after accepting the changes",compact:!0,children:i.jsx(ln,{icon:"warning-sign",intent:"warning"})})]}),i.jsx(Ne,{fill:!0,value:o,onChange:F,rows:5,spellCheck:!1}),i.jsxs(fn,{children:[i.jsx(_e,{items:s,itemRenderer:I,itemPredicate:R,noResults:i.jsx(se,{disabled:!0,text:"No presets found",roleStructure:"listoption"}),onItemSelect:S,popoverProps:{minimal:!0},children:i.jsx(te,{content:"Predefined character sets",compact:!0,children:i.jsx(T,{icon:"font",text:"Override with preset",endIcon:"caret-down"})})}),i.jsx(te,{content:"Remove duplicates",compact:!0,children:i.jsx(T,{icon:"inbox-filtered",disabled:!u,onClick:g})})]}),x&&i.jsx(ie,{intent:"danger",children:x})]}),i.jsx(Ve,{actions:i.jsxs(i.Fragment,{children:[i.jsx(T,{text:"Cancel",onClick:m}),i.jsx(T,{intent:"primary",text:"Accept",onClick:p})]})})]})}function oa({project:e,forceDisabled:n}){const[t,a]=Se("characterSet",e),[o,r]=c.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsx(j,{label:"Character set",disabled:n,children:i.jsx(T,{icon:"edit",text:`${t.length} characters`,onClick:()=>r(!0),disabled:n})}),i.jsx(ra,{isOpen:o,acceptedCharacters:t,setIsOpen:r,setAcceptedCharacters:a})]})}function ue(e,n){const[t,a]=c.useState(n[e].toString()),[o,r]=c.useState(n[e]),s=c.useContext(ae);return c.useEffect(()=>{o!==n[e]&&s({...n,[e]:o,dirty:!0})},[o]),c.useEffect(()=>{a(n[e].toString()),r(n[e])},[n[e]]),[t,u=>{a(u);const d=Number(u);!isNaN(d)&&u!=="-"&&u!=="."&&u!=="-."&&r(d)},o]}function ia({project:e,isOpen:n,setIsOpen:t}){const[a,o]=c.useState(""),[r,s]=c.useState(null),l=c.useContext(ae),u=()=>{t(!1),s(null),o("")},d=async()=>{try{if(a.length===0)throw new Error("No characters are specified");const x={...e,dirty:!0};let f=0;for(let h=0;h<a.length;h++){const m=a.charCodeAt(h);x.sizeOverrides.find(p=>p.char===m)||x.characterSet.includes(a[h])&&(x.sizeOverrides.push({char:m,width:x.defaultCharacterWidth,height:x.defaultCharacterHeight}),f++)}l(x),u(),(await Bn.create({position:"top-right"})).show({icon:"add",intent:f===0?"warning":"success",message:`Added ${f} size overrides`})}catch(x){s(x.message)}};return i.jsxs(Ge,{title:"Add Size Overrides",icon:"arrows-horizontal",isOpen:n,onClose:u,children:[i.jsxs(Ue,{children:[i.jsx(ie,{children:"Specify characters for which you want to define a non-default size. Duplicates and characters not defined in the character set will be ignored."}),i.jsx("br",{}),i.jsx(Ne,{fill:!0,value:a,onChange:x=>o(x.target.value),rows:5,spellCheck:!1}),r&&i.jsx(ie,{intent:"danger",children:r})]}),i.jsx(Ve,{actions:i.jsxs(i.Fragment,{children:[i.jsx(T,{text:"Cancel",onClick:u}),i.jsx(T,{intent:"primary",text:"Add all",onClick:d})]})})]})}function sa({project:e,forceDisabled:n}){const[t,a]=c.useState(null),[o,r]=c.useState(!1),s=c.useContext(ae),l=h=>String.fromCharCode(h.char),u=(h,{handleClick:m,handleFocus:p,modifiers:F})=>F.matchesPredicate?i.jsx(se,{active:F.active,disabled:F.disabled,onClick:m,onFocus:p,roleStructure:"listoption",text:l(h),label:`${h.width} x ${h.height}`},`${l(h)}}`):null,d=(h,m,p,F)=>{const S=`${l(m)} ${m.width} x ${m.height}`;return F?h===S:S.includes(h)},x=h=>{const m=Number(h);!isNaN(m)&&t&&(t.width=m,s({...e}))},f=h=>{const m=Number(h);!isNaN(m)&&t&&(t.height=m,s({...e}))},g=()=>{const h={...e};h.sizeOverrides=h.sizeOverrides.filter(m=>m!==t),s(h),a(null)};return i.jsxs(i.Fragment,{children:[i.jsx(j,{label:"Size overrides",disabled:n,children:i.jsxs(fn,{children:[i.jsx(te,{content:"Add size override",children:i.jsx(T,{icon:"add",onClick:()=>r(!0),disabled:n})}),i.jsx(_e,{items:e.sizeOverrides,itemRenderer:u,itemPredicate:d,noResults:i.jsx(se,{disabled:!0,text:"No size overrides defined yet",roleStructure:"listoption"}),onItemSelect:a,popoverProps:{minimal:!0},disabled:n,children:i.jsx(T,{icon:"caret-down",text:t&&l(t),disabled:n})}),i.jsx(te,{content:"Remove size override",children:i.jsx(T,{icon:"remove",disabled:!t||n,onClick:g})})]})}),t&&i.jsxs(i.Fragment,{children:[i.jsx(j,{label:`Width override (${l(t)})`,disabled:n,children:i.jsx(O,{type:"number",value:t.width.toString(),onValueChange:x,rightElement:i.jsx(ee,{minimal:!0,children:"px"}),size:"small",min:1,disabled:n})}),i.jsx(j,{label:`Height override (${l(t)})`,disabled:n,children:i.jsx(O,{type:"number",value:t.height.toString(),onValueChange:f,rightElement:i.jsx(ee,{minimal:!0,children:"px"}),size:"small",min:1,disabled:n})})]}),i.jsx(ia,{project:e,isOpen:o,setIsOpen:r})]})}function la({project:e,forceDisabled:n}){const[t,a]=ue("defaultCharacterWidth",e),[o,r]=ue("defaultCharacterHeight",e),[s,l]=ue("characterBase",e);return i.jsxs(i.Fragment,{children:[i.jsx(j,{label:"Char. width",disabled:n,children:i.jsx(O,{value:t,onValueChange:a,type:"number",rightElement:i.jsx(ee,{minimal:!0,children:"px"}),size:"small",min:1,disabled:n})}),i.jsx(j,{label:"Char. height",disabled:n,children:i.jsx(O,{value:o,onValueChange:r,type:"number",rightElement:i.jsx(ee,{minimal:!0,children:"px"}),size:"small",min:1,disabled:n})}),i.jsx(j,{label:"Char. base",disabled:n,children:i.jsx(O,{value:s,onValueChange:l,type:"number",rightElement:i.jsx(ee,{minimal:!0,children:"px"}),size:"small",min:0,disabled:n})}),i.jsx(sa,{project:e,forceDisabled:n})]})}function ca(e){const n=[];return new Promise(t=>e.forEach(a=>{const o=new Image;o.onload=()=>{n.push(o),n.length===e.length&&t(n)},o.src=URL.createObjectURL(a)}))}function ua(e,n,t){if(n<=0||n>=e.length)return 0;const a=e.charCodeAt(n-1),o=e.charCodeAt(n),r=t.kernings.find(({first:s,second:l})=>s===a&&l===o);return(r==null?void 0:r.amount)??0}async function He(e,n,t,a,o){o.imageSmoothingEnabled=!1;const r=await ca(t),s={x:n.info.padding.left,y:n.info.padding.up};o.clearRect(0,0,o.canvas.width,o.canvas.height),o.strokeStyle="black",[...e].forEach((l,u)=>{if(l===`
`){s.x=0,s.y+=n.info.spacing.vertical+n.common.lineHeight;return}let d=n.chars.find(m=>m.id===l.charCodeAt(0)),x=!1;d||(d=n.chars[0],x=!0);const f=x?0:ua(e,u,n),g=r[d.page],h={x:s.x+d.xoffset+f,y:s.y+d.yoffset};if((h.x+d.width)*a>=o.canvas.width&&(s.x=0,s.y+=n.info.spacing.vertical+n.common.lineHeight,h.x=s.x+d.xoffset+f,h.y=s.y+d.yoffset),x){const m=h.x+d.width/4,p=h.y+d.height/4,F=d.width*2/4,S=d.height*2/4;o.strokeRect(m*a,p*a,F*a,S*a)}else o.drawImage(g,d.x,d.y,d.width,d.height,h.x*a,h.y*a,d.width*a,d.height*a);s.x+=d.xadvance+n.info.spacing.horizontal+f})}const ga=$t[typeof document<"u"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],da=e=>{const n=c.useRef(e);return c.useEffect(()=>{n.current=e}),n};function ha(){}function pn(e,n,t={}){const a=xa(t.polyfill),o=da(n);return ga(()=>{let r=!1;const s=e&&"current"in e?e.current:e;if(!s)return ha;function l(u,d){r||o.current(u,d)}return a.subscribe(s,l),()=>{r=!0,a.unsubscribe(s,l)}},[e,a,o]),a.observer}function fa(e){let n=!1,t=[];const a=new Map,o=new(e||window.ResizeObserver)((r,s)=>{t=t.concat(r);function l(){const u=new Set;for(let d=0;d<t.length;d++){if(u.has(t[d].target))continue;u.add(t[d].target);const x=a.get(t[d].target);x==null||x.forEach(f=>f(t[d],s))}t=[],n=!1}n||window.requestAnimationFrame(l),n=!0});return{observer:o,subscribe(r,s){var l;o.observe(r);const u=(l=a.get(r))!==null&&l!==void 0?l:[];u.push(s),a.set(r,u)},unsubscribe(r,s){var l;const u=(l=a.get(r))!==null&&l!==void 0?l:[];if(u.length===1){o.unobserve(r),a.delete(r);return}const d=u.indexOf(s);d!==-1&&u.splice(d,1),a.set(r,u)}}}let en;const xa=e=>en||(en=fa(e));function ma({project:e}){const[n,t]=Se("previewText",e),[a,o,r]=ue("previewScale",e),[s,l]=Se("previewBgColor",e,60),[u,d]=c.useState(null),[x,f]=c.useState(null),g=c.useRef(null),h=c.useRef(null);c.useEffect(()=>{h.current&&d(h.current.getContext("2d"))},[h.current]),c.useEffect(()=>{(async()=>{const F=xn(e,"current or imported"),S=await mn(F),I=await Hn(F,S);f(I)})()},[e]),c.useEffect(()=>{u&&x&&(async()=>{const[F,S]=x;He(n,F,S,r,u)})()},[n,r,u,x]),pn(g,p=>{if(h.current&&(h.current.width=p.contentRect.width,u&&x)){const[F,S]=x;He(n,F,S,r,u)}});const m=p=>{t(p.target.value)};return i.jsxs(i.Fragment,{children:[i.jsx(cn,{children:"Font Preview"}),i.jsx(Ne,{value:n,onChange:m,fill:!0}),i.jsx(j,{label:"Scale",children:i.jsx(O,{type:"number",leftIcon:"zoom-in",min:1,value:a,onValueChange:o,fill:!0})}),i.jsx(j,{label:"Background",children:i.jsx(O,{type:"color",value:s,leftIcon:"color-fill",onValueChange:l})}),i.jsx(Tn,{ref:g,style:{backgroundColor:s},children:i.jsx("canvas",{ref:h})})]})}function pa({project:e,isOpen:n,setIsOpen:t}){const[a,o]=c.useState(null),r=c.useContext(ae);c.useEffect(()=>{(async()=>{const d=xn(e,"force current"),x=await mn(d);o(URL.createObjectURL(x))})()},[e]);const s=()=>{t(!1)},l=()=>{_t(e),r({...e,lastExportSnapshot:{defaultCharacterWidth:e.defaultCharacterWidth,defaultCharacterHeight:e.defaultCharacterHeight,characterBase:e.characterBase,characterSet:e.characterSet},dirty:!0})};return i.jsxs(Ge,{title:"Template Preview",icon:"eye-open",isOpen:n,onClose:s,children:[i.jsx(Ue,{children:a&&i.jsx("img",{src:a})}),i.jsx(Ve,{actions:i.jsxs(i.Fragment,{children:[i.jsx(T,{text:"Close",onClick:s}),i.jsx(T,{intent:"primary",text:"Export PNG",onClick:l})]})})]})}function ya({project:e,forceDisabled:n}){const[t,a]=c.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsx(j,{children:i.jsx(T,{icon:"eye-open",text:"Preview Template",onClick:()=>a(!0),disabled:n})}),i.jsx(pa,{project:e,isOpen:t,setIsOpen:a})]})}function Fa({project:e}){const[n,t]=ue("horizontalSpacing",e),[a,o]=ue("verticalSpacing",e),[r,s]=ue("lineHeight",e);return i.jsxs(i.Fragment,{children:[i.jsx(j,{label:"Horizontal spacing",children:i.jsx(O,{value:n,onValueChange:t,type:"number",rightElement:i.jsx(ee,{minimal:!0,children:"px"}),size:"small"})}),i.jsx(j,{label:"Vertical spacing",children:i.jsx(O,{value:a,onValueChange:o,type:"number",rightElement:i.jsx(ee,{minimal:!0,children:"px"}),size:"small"})}),i.jsx(j,{label:"Line height",children:i.jsx(O,{value:r,onValueChange:s,type:"number",rightElement:i.jsx(ee,{minimal:!0,children:"px"}),min:1,size:"small"})})]})}function Gn({project:e,kerning:n}){const[t]=Se("previewScale",e),[a]=Se("previewBgColor",e),[o,r]=c.useState(null),[s,l]=c.useState(null),u=c.useRef(null),d=c.useRef(null);return c.useEffect(()=>{var x,f;d.current&&(d.current.width=(((x=e.importedTemplate)==null?void 0:x.defaultCharacterWidth)??e.defaultCharacterWidth)*6,d.current.height=(((f=e.importedTemplate)==null?void 0:f.defaultCharacterHeight)??e.defaultCharacterHeight)*1.2,r(d.current.getContext("2d")))},[d.current]),c.useEffect(()=>{(async()=>{const f=xn(e,"current or imported");f.project.kernings=[n];const g=await mn(f),h=await Hn(f,g);l(h)})()},[e,n]),c.useEffect(()=>{o&&s&&(async()=>{const[f,g]=s;He(`${String.fromCharCode(n.first)}${String.fromCharCode(n.second)}`,f,g,t,o)})()},[n,n,o,s]),pn(u,x=>{if(d.current&&(d.current.width=x.contentRect.width,o&&s)){const[f,g]=s;He(`${String.fromCharCode(n.first)}${String.fromCharCode(n.second)}`,f,g,t,o)}}),i.jsx(Tn,{ref:u,style:{backgroundColor:a},children:i.jsx("canvas",{ref:d})})}function Ca({project:e,isOpen:n,setIsOpen:t}){const[a,o]=c.useState(null),[r,s]=c.useState(null),[l,u]=c.useState("0"),[d,x]=c.useState(null),f=c.useContext(ae),g=()=>{t(!1),x(null),o(null),s(null),u("0")},h=()=>{try{if(!a||!r)throw new Error("Characters aren't specified");e.kernings.forEach(p=>{if(p.first===a&&p.second===r)throw new Error("Kerning pair already exists")});const m={...e,dirty:!0};m.kernings.push({first:a,second:r,amount:Number(l)}),f(m),g()}catch(m){x(m.message)}};return i.jsxs(Ge,{title:"Add Kerning Pair",icon:"arrows-horizontal",isOpen:n,onClose:g,children:[i.jsxs(Ue,{children:[i.jsxs(ie,{children:["Overwrites how much closer or further apart should two characters be when next to each other.",i.jsx("br",{}),i.jsx("br",{}),"Not all game engines support this feature."]}),i.jsx("br",{}),i.jsx(j,{label:"Left character",children:i.jsx(O,{value:a===null?"":String.fromCharCode(a),onValueChange:m=>o(m.charCodeAt(m.length-1))})}),i.jsx(j,{label:"Right character",children:i.jsx(O,{value:r===null?"":String.fromCharCode(r),onValueChange:m=>s(m.charCodeAt(m.length-1))})}),i.jsx(j,{label:"Amount",children:i.jsx(O,{value:l.toString(),onValueChange:u,type:"number"})}),i.jsx(Gn,{project:e,kerning:{first:a??0,second:r??0,amount:Number(l)}}),(a!==null&&!e.characterSet.includes(String.fromCharCode(a))||r!==null&&!e.characterSet.includes(String.fromCharCode(r)))&&i.jsx(ie,{intent:"warning",children:"At least one character is not in the current character set"}),d&&i.jsx(ie,{intent:"danger",children:d})]}),i.jsx(Ve,{actions:i.jsxs(i.Fragment,{children:[i.jsx(T,{text:"Cancel",onClick:g}),i.jsx(T,{intent:"primary",text:"Add",onClick:h})]})})]})}function Sa({project:e}){var f;const[n,t]=c.useState(null),[a,o]=c.useState(!1),r=c.useContext(ae),s=g=>`${String.fromCharCode(g.first)}${String.fromCharCode(g.second)}`,l=(g,{handleClick:h,handleFocus:m,modifiers:p})=>p.matchesPredicate?i.jsx(se,{active:p.active,disabled:p.disabled,onClick:h,onFocus:m,roleStructure:"listoption",text:`${s(g)}`,label:g.amount.toString()},`${s(g)}}`):null,u=(g,h,m,p)=>{const F=s(h);return p?g===F:F.includes(g)},d=g=>{const h=Number(g);!isNaN(h)&&n&&(n.amount=h,r({...e}))},x=()=>{const g={...e};g.kernings=g.kernings.filter(h=>h!==n),r(g),t(null)};return i.jsxs(i.Fragment,{children:[i.jsx(j,{label:"Kerning pairs",children:i.jsx(O,{value:((f=n==null?void 0:n.amount)==null?void 0:f.toString())??"",onValueChange:d,type:"number",leftElement:i.jsxs(fn,{children:[i.jsx(te,{content:"Add kerning",children:i.jsx(T,{icon:"add",onClick:()=>o(!0)})}),i.jsx(_e,{items:e.kernings,itemRenderer:l,itemPredicate:u,noResults:i.jsx(se,{disabled:!0,text:"No kernings defined yet",roleStructure:"listoption"}),onItemSelect:t,popoverProps:{minimal:!0},children:i.jsx(T,{icon:"caret-down",text:n&&s(n)})})]}),rightElement:i.jsxs(i.Fragment,{children:[i.jsx(ee,{minimal:!0,children:"px"}),i.jsx(te,{content:"Remove kerning",children:i.jsx(T,{icon:"remove",disabled:!n,onClick:x})})]})})}),n&&i.jsx(Gn,{project:e,kerning:n}),i.jsx(Ca,{project:e,isOpen:a,setIsOpen:o})]})}const Ke=c.createContext(null);Ke.displayName="PanelGroupContext";const L={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},yn=10,ge=c.useLayoutEffect,Pn=Gt.useId,ba=typeof Pn=="function"?Pn:()=>null;let va=0;function Fn(e=null){const n=ba(),t=c.useRef(e||n||null);return t.current===null&&(t.current=""+va++),e??t.current}function Un({children:e,className:n="",collapsedSize:t,collapsible:a,defaultSize:o,forwardedRef:r,id:s,maxSize:l,minSize:u,onCollapse:d,onExpand:x,onResize:f,order:g,style:h,tagName:m="div",...p}){const F=c.useContext(Ke);if(F===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:S,expandPanel:I,getPanelSize:R,getPanelStyle:b,groupId:$,isPanelCollapsed:D,reevaluatePanelConstraints:v,registerPanel:V,resizePanel:q,unregisterPanel:W}=F,G=Fn(s),k=c.useRef({callbacks:{onCollapse:d,onExpand:x,onResize:f},constraints:{collapsedSize:t,collapsible:a,defaultSize:o,maxSize:l,minSize:u},id:G,idIsFromProps:s!==void 0,order:g});c.useRef({didLogMissingDefaultSizeWarning:!1}),ge(()=>{const{callbacks:_,constraints:H}=k.current,U={...H};k.current.id=G,k.current.idIsFromProps=s!==void 0,k.current.order=g,_.onCollapse=d,_.onExpand=x,_.onResize=f,H.collapsedSize=t,H.collapsible=a,H.defaultSize=o,H.maxSize=l,H.minSize=u,(U.collapsedSize!==H.collapsedSize||U.collapsible!==H.collapsible||U.maxSize!==H.maxSize||U.minSize!==H.minSize)&&v(k.current,U)}),ge(()=>{const _=k.current;return V(_),()=>{W(_)}},[g,G,V,W]),c.useImperativeHandle(r,()=>({collapse:()=>{S(k.current)},expand:_=>{I(k.current,_)},getId(){return G},getSize(){return R(k.current)},isCollapsed(){return D(k.current)},isExpanded(){return!D(k.current)},resize:_=>{q(k.current,_)}}),[S,I,R,D,G,q]);const le=b(k.current,o);return c.createElement(m,{...p,children:e,className:n,id:G,style:{...le,...h},[L.groupId]:$,[L.panel]:"",[L.panelCollapsible]:a||void 0,[L.panelId]:G,[L.panelSize]:parseFloat(""+le.flexGrow).toFixed(1)})}const Be=c.forwardRef((e,n)=>c.createElement(Un,{...e,forwardedRef:n}));Un.displayName="Panel";Be.displayName="forwardRef(Panel)";let gn=null,Te=-1,re=null;function Ea(e,n){if(n){const t=(n&qn)!==0,a=(n&Xn)!==0,o=(n&Yn)!==0,r=(n&Zn)!==0;if(t)return o?"se-resize":r?"ne-resize":"e-resize";if(a)return o?"sw-resize":r?"nw-resize":"w-resize";if(o)return"s-resize";if(r)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Aa(){re!==null&&(document.head.removeChild(re),gn=null,re=null,Te=-1)}function nn(e,n){var t,a;const o=Ea(e,n);if(gn!==o){if(gn=o,re===null&&(re=document.createElement("style"),document.head.appendChild(re)),Te>=0){var r;(r=re.sheet)===null||r===void 0||r.removeRule(Te)}Te=(t=(a=re.sheet)===null||a===void 0?void 0:a.insertRule(`*{cursor: ${o} !important;}`))!==null&&t!==void 0?t:-1}}function Vn(e){return e.type==="keydown"}function Kn(e){return e.type.startsWith("pointer")}function Wn(e){return e.type.startsWith("mouse")}function We(e){if(Kn(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Wn(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function za(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function wa(e,n,t){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function Pa(e,n){if(e===n)throw new Error("Cannot compare node with itself");const t={a:Dn(e),b:Dn(n)};let a;for(;t.a.at(-1)===t.b.at(-1);)e=t.a.pop(),n=t.b.pop(),a=e;w(a,"Stacking order can only be calculated for elements with a common ancestor");const o={a:In(Rn(t.a)),b:In(Rn(t.b))};if(o.a===o.b){const r=a.childNodes,s={a:t.a.at(-1),b:t.b.at(-1)};let l=r.length;for(;l--;){const u=r[l];if(u===s.a)return 1;if(u===s.b)return-1}}return Math.sign(o.a-o.b)}const Ra=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Ia(e){var n;const t=getComputedStyle((n=Jn(e))!==null&&n!==void 0?n:e).display;return t==="flex"||t==="inline-flex"}function Da(e){const n=getComputedStyle(e);return!!(n.position==="fixed"||n.zIndex!=="auto"&&(n.position!=="static"||Ia(e))||+n.opacity<1||"transform"in n&&n.transform!=="none"||"webkitTransform"in n&&n.webkitTransform!=="none"||"mixBlendMode"in n&&n.mixBlendMode!=="normal"||"filter"in n&&n.filter!=="none"||"webkitFilter"in n&&n.webkitFilter!=="none"||"isolation"in n&&n.isolation==="isolate"||Ra.test(n.willChange)||n.webkitOverflowScrolling==="touch")}function Rn(e){let n=e.length;for(;n--;){const t=e[n];if(w(t,"Missing node"),Da(t))return t}return null}function In(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Dn(e){const n=[];for(;e;)n.push(e),e=Jn(e);return n}function Jn(e){const{parentNode:n}=e;return n&&n instanceof ShadowRoot?n.host:n}const qn=1,Xn=2,Yn=4,Zn=8,Ma=za()==="coarse";let Y=[],Fe=!1,oe=new Map,Je=new Map;const De=new Set;function Na(e,n,t,a,o){var r;const{ownerDocument:s}=n,l={direction:t,element:n,hitAreaMargins:a,setResizeHandlerState:o},u=(r=oe.get(s))!==null&&r!==void 0?r:0;return oe.set(s,u+1),De.add(l),Oe(),function(){var x;Je.delete(e),De.delete(l);const f=(x=oe.get(s))!==null&&x!==void 0?x:1;if(oe.set(s,f-1),Oe(),f===1&&oe.delete(s),Y.includes(l)){const g=Y.indexOf(l);g>=0&&Y.splice(g,1),Sn(),o("up",!0,null)}}}function La(e){const{target:n}=e,{x:t,y:a}=We(e);Fe=!0,Cn({target:n,x:t,y:a}),Oe(),Y.length>0&&($e("down",e),e.preventDefault(),Qn(n)||e.stopImmediatePropagation())}function tn(e){const{x:n,y:t}=We(e);if(Fe&&e.buttons===0&&(Fe=!1,$e("up",e)),!Fe){const{target:a}=e;Cn({target:a,x:n,y:t})}$e("move",e),Sn(),Y.length>0&&e.preventDefault()}function an(e){const{target:n}=e,{x:t,y:a}=We(e);Je.clear(),Fe=!1,Y.length>0&&(e.preventDefault(),Qn(n)||e.stopImmediatePropagation()),$e("up",e),Cn({target:n,x:t,y:a}),Sn(),Oe()}function Qn(e){let n=e;for(;n;){if(n.hasAttribute(L.resizeHandle))return!0;n=n.parentElement}return!1}function Cn({target:e,x:n,y:t}){Y.splice(0);let a=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(a=e),De.forEach(o=>{const{element:r,hitAreaMargins:s}=o,l=r.getBoundingClientRect(),{bottom:u,left:d,right:x,top:f}=l,g=Ma?s.coarse:s.fine;if(n>=d-g&&n<=x+g&&t>=f-g&&t<=u+g){if(a!==null&&document.contains(a)&&r!==a&&!r.contains(a)&&!a.contains(r)&&Pa(a,r)>0){let m=a,p=!1;for(;m&&!m.contains(r);){if(wa(m.getBoundingClientRect(),l)){p=!0;break}m=m.parentElement}if(p)return}Y.push(o)}})}function rn(e,n){Je.set(e,n)}function Sn(){let e=!1,n=!1;Y.forEach(a=>{const{direction:o}=a;o==="horizontal"?e=!0:n=!0});let t=0;Je.forEach(a=>{t|=a}),e&&n?nn("intersection",t):e?nn("horizontal",t):n?nn("vertical",t):Aa()}let on;function Oe(){var e;(e=on)===null||e===void 0||e.abort(),on=new AbortController;const n={capture:!0,signal:on.signal};De.size&&(Fe?(Y.length>0&&oe.forEach((t,a)=>{const{body:o}=a;t>0&&(o.addEventListener("contextmenu",an,n),o.addEventListener("pointerleave",tn,n),o.addEventListener("pointermove",tn,n))}),oe.forEach((t,a)=>{const{body:o}=a;o.addEventListener("pointerup",an,n),o.addEventListener("pointercancel",an,n)})):oe.forEach((t,a)=>{const{body:o}=a;t>0&&(o.addEventListener("pointerdown",La,n),o.addEventListener("pointermove",tn,n))}))}function $e(e,n){De.forEach(t=>{const{setResizeHandlerState:a}=t,o=Y.includes(t);a(e,o,n)})}function ka(){const[e,n]=c.useState(0);return c.useCallback(()=>n(t=>t+1),[])}function w(e,n){if(!e)throw console.error(n),Error(n)}function de(e,n,t=yn){return e.toFixed(t)===n.toFixed(t)?0:e>n?1:-1}function ne(e,n,t=yn){return de(e,n,t)===0}function J(e,n,t){return de(e,n,t)===0}function ja(e,n,t){if(e.length!==n.length)return!1;for(let a=0;a<e.length;a++){const o=e[a],r=n[a];if(!J(o,r,t))return!1}return!0}function ye({panelConstraints:e,panelIndex:n,size:t}){const a=e[n];w(a!=null,`Panel constraints not found for index ${n}`);let{collapsedSize:o=0,collapsible:r,maxSize:s=100,minSize:l=0}=a;if(de(t,l)<0)if(r){const u=(o+l)/2;de(t,u)<0?t=o:t=l}else t=l;return t=Math.min(s,t),t=parseFloat(t.toFixed(yn)),t}function Pe({delta:e,initialLayout:n,panelConstraints:t,pivotIndices:a,prevLayout:o,trigger:r}){if(J(e,0))return n;const s=[...n],[l,u]=a;w(l!=null,"Invalid first pivot index"),w(u!=null,"Invalid second pivot index");let d=0;if(r==="keyboard"){{const f=e<0?u:l,g=t[f];w(g,`Panel constraints not found for index ${f}`);const{collapsedSize:h=0,collapsible:m,minSize:p=0}=g;if(m){const F=n[f];if(w(F!=null,`Previous layout not found for panel index ${f}`),J(F,h)){const S=p-F;de(S,Math.abs(e))>0&&(e=e<0?0-S:S)}}}{const f=e<0?l:u,g=t[f];w(g,`No panel constraints found for index ${f}`);const{collapsedSize:h=0,collapsible:m,minSize:p=0}=g;if(m){const F=n[f];if(w(F!=null,`Previous layout not found for panel index ${f}`),J(F,p)){const S=F-h;de(S,Math.abs(e))>0&&(e=e<0?0-S:S)}}}}{const f=e<0?1:-1;let g=e<0?u:l,h=0;for(;;){const p=n[g];w(p!=null,`Previous layout not found for panel index ${g}`);const S=ye({panelConstraints:t,panelIndex:g,size:100})-p;if(h+=S,g+=f,g<0||g>=t.length)break}const m=Math.min(Math.abs(e),Math.abs(h));e=e<0?0-m:m}{let g=e<0?l:u;for(;g>=0&&g<t.length;){const h=Math.abs(e)-Math.abs(d),m=n[g];w(m!=null,`Previous layout not found for panel index ${g}`);const p=m-h,F=ye({panelConstraints:t,panelIndex:g,size:p});if(!J(m,F)&&(d+=m-F,s[g]=F,d.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?g--:g++}}if(ja(o,s))return o;{const f=e<0?u:l,g=n[f];w(g!=null,`Previous layout not found for panel index ${f}`);const h=g+d,m=ye({panelConstraints:t,panelIndex:f,size:h});if(s[f]=m,!J(m,h)){let p=h-m,S=e<0?u:l;for(;S>=0&&S<t.length;){const I=s[S];w(I!=null,`Previous layout not found for panel index ${S}`);const R=I+p,b=ye({panelConstraints:t,panelIndex:S,size:R});if(J(I,b)||(p-=b-I,s[S]=b),J(p,0))break;e>0?S--:S++}}}const x=s.reduce((f,g)=>g+f,0);return J(x,100)?s:o}function Ba({layout:e,panelsArray:n,pivotIndices:t}){let a=0,o=100,r=0,s=0;const l=t[0];w(l!=null,"No pivot index found"),n.forEach((f,g)=>{const{constraints:h}=f,{maxSize:m=100,minSize:p=0}=h;g===l?(a=p,o=m):(r+=p,s+=m)});const u=Math.min(o,100-r),d=Math.max(a,100-s),x=e[l];return{valueMax:u,valueMin:d,valueNow:x}}function Me(e,n=document){return Array.from(n.querySelectorAll(`[${L.resizeHandleId}][data-panel-group-id="${e}"]`))}function et(e,n,t=document){const o=Me(e,t).findIndex(r=>r.getAttribute(L.resizeHandleId)===n);return o??null}function nt(e,n,t){const a=et(e,n,t);return a!=null?[a,a+1]:[-1,-1]}function Ta(e){return e instanceof HTMLElement?!0:typeof e=="object"&&e!==null&&"tagName"in e&&"getAttribute"in e}function tt(e,n=document){if(Ta(n)&&n.dataset.panelGroupId==e)return n;const t=n.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return t||null}function qe(e,n=document){const t=n.querySelector(`[${L.resizeHandleId}="${e}"]`);return t||null}function Ha(e,n,t,a=document){var o,r,s,l;const u=qe(n,a),d=Me(e,a),x=u?d.indexOf(u):-1,f=(o=(r=t[x])===null||r===void 0?void 0:r.id)!==null&&o!==void 0?o:null,g=(s=(l=t[x+1])===null||l===void 0?void 0:l.id)!==null&&s!==void 0?s:null;return[f,g]}function Oa({committedValuesRef:e,eagerValuesRef:n,groupId:t,layout:a,panelDataArray:o,panelGroupElement:r,setLayout:s}){c.useRef({didWarnAboutMissingResizeHandle:!1}),ge(()=>{if(!r)return;const l=Me(t,r);for(let u=0;u<o.length-1;u++){const{valueMax:d,valueMin:x,valueNow:f}=Ba({layout:a,panelsArray:o,pivotIndices:[u,u+1]}),g=l[u];if(g!=null){const h=o[u];w(h,`No panel data found for index "${u}"`),g.setAttribute("aria-controls",h.id),g.setAttribute("aria-valuemax",""+Math.round(d)),g.setAttribute("aria-valuemin",""+Math.round(x)),g.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{l.forEach((u,d)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[t,a,o,r]),c.useEffect(()=>{if(!r)return;const l=n.current;w(l,"Eager values not found");const{panelDataArray:u}=l,d=tt(t,r);w(d!=null,`No group found for id "${t}"`);const x=Me(t,r);w(x,`No resize handles found for group id "${t}"`);const f=x.map(g=>{const h=g.getAttribute(L.resizeHandleId);w(h,"Resize handle element has no handle id attribute");const[m,p]=Ha(t,h,u,r);if(m==null||p==null)return()=>{};const F=S=>{if(!S.defaultPrevented)switch(S.key){case"Enter":{S.preventDefault();const I=u.findIndex(R=>R.id===m);if(I>=0){const R=u[I];w(R,`No panel data found for index ${I}`);const b=a[I],{collapsedSize:$=0,collapsible:D,minSize:v=0}=R.constraints;if(b!=null&&D){const V=Pe({delta:J(b,$)?v-$:$-b,initialLayout:a,panelConstraints:u.map(q=>q.constraints),pivotIndices:nt(t,h,r),prevLayout:a,trigger:"keyboard"});a!==V&&s(V)}}break}}};return g.addEventListener("keydown",F),()=>{g.removeEventListener("keydown",F)}});return()=>{f.forEach(g=>g())}},[r,e,n,t,a,o,s])}function Mn(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function at(e,n){const t=e==="horizontal",{x:a,y:o}=We(n);return t?a:o}function $a(e,n,t,a,o){const r=t==="horizontal",s=qe(n,o);w(s,`No resize handle element found for id "${n}"`);const l=s.getAttribute(L.groupId);w(l,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=a;const d=at(t,e),x=tt(l,o);w(x,`No group element found for id "${l}"`);const f=x.getBoundingClientRect(),g=r?f.width:f.height;return(d-u)/g*100}function _a(e,n,t,a,o,r){if(Vn(e)){const s=t==="horizontal";let l=0;e.shiftKey?l=100:o!=null?l=o:l=10;let u=0;switch(e.key){case"ArrowDown":u=s?0:l;break;case"ArrowLeft":u=s?-l:0;break;case"ArrowRight":u=s?l:0;break;case"ArrowUp":u=s?0:-l;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return a==null?0:$a(e,n,t,a,r)}function Ga({panelDataArray:e}){const n=Array(e.length),t=e.map(r=>r.constraints);let a=0,o=100;for(let r=0;r<e.length;r++){const s=t[r];w(s,`Panel constraints not found for index ${r}`);const{defaultSize:l}=s;l!=null&&(a++,n[r]=l,o-=l)}for(let r=0;r<e.length;r++){const s=t[r];w(s,`Panel constraints not found for index ${r}`);const{defaultSize:l}=s;if(l!=null)continue;const u=e.length-a,d=o/u;a++,n[r]=d,o-=d}return n}function me(e,n,t){n.forEach((a,o)=>{const r=e[o];w(r,`Panel data not found for index ${o}`);const{callbacks:s,constraints:l,id:u}=r,{collapsedSize:d=0,collapsible:x}=l,f=t[u];if(f==null||a!==f){t[u]=a;const{onCollapse:g,onExpand:h,onResize:m}=s;m&&m(a,f),x&&(g||h)&&(h&&(f==null||ne(f,d))&&!ne(a,d)&&h(),g&&(f==null||!ne(f,d))&&ne(a,d)&&g())}})}function je(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!=n[t])return!1;return!0}function Ua({defaultSize:e,dragState:n,layout:t,panelData:a,panelIndex:o,precision:r=3}){const s=t[o];let l;return s==null?l=e!=null?e.toPrecision(r):"1":a.length===1?l="1":l=s.toPrecision(r),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:n!==null?"none":void 0}}function Va(e,n=10){let t=null;return(...o)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{e(...o)},n)}}function Nn(e){try{if(typeof localStorage<"u")e.getItem=n=>localStorage.getItem(n),e.setItem=(n,t)=>{localStorage.setItem(n,t)};else throw new Error("localStorage not supported in this environment")}catch(n){console.error(n),e.getItem=()=>null,e.setItem=()=>{}}}function rt(e){return`react-resizable-panels:${e}`}function ot(e){return e.map(n=>{const{constraints:t,id:a,idIsFromProps:o,order:r}=n;return o?a:r?`${r}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((n,t)=>n.localeCompare(t)).join(",")}function it(e,n){try{const t=rt(e),a=n.getItem(t);if(a){const o=JSON.parse(a);if(typeof o=="object"&&o!=null)return o}}catch{}return null}function Ka(e,n,t){var a,o;const r=(a=it(e,t))!==null&&a!==void 0?a:{},s=ot(n);return(o=r[s])!==null&&o!==void 0?o:null}function Wa(e,n,t,a,o){var r;const s=rt(e),l=ot(n),u=(r=it(e,o))!==null&&r!==void 0?r:{};u[l]={expandToSizes:Object.fromEntries(t.entries()),layout:a};try{o.setItem(s,JSON.stringify(u))}catch(d){console.error(d)}}function Ln({layout:e,panelConstraints:n}){const t=[...e],a=t.reduce((r,s)=>r+s,0);if(t.length!==n.length)throw Error(`Invalid ${n.length} panel layout: ${t.map(r=>`${r}%`).join(", ")}`);if(!J(a,100)&&t.length>0)for(let r=0;r<n.length;r++){const s=t[r];w(s!=null,`No layout data found for index ${r}`);const l=100/a*s;t[r]=l}let o=0;for(let r=0;r<n.length;r++){const s=t[r];w(s!=null,`No layout data found for index ${r}`);const l=ye({panelConstraints:n,panelIndex:r,size:s});s!=l&&(o+=s-l,t[r]=l)}if(!J(o,0))for(let r=0;r<n.length;r++){const s=t[r];w(s!=null,`No layout data found for index ${r}`);const l=s+o,u=ye({panelConstraints:n,panelIndex:r,size:l});if(s!==u&&(o-=u-s,t[r]=u,J(o,0)))break}return t}const Ja=100,Re={getItem:e=>(Nn(Re),Re.getItem(e)),setItem:(e,n)=>{Nn(Re),Re.setItem(e,n)}},kn={};function st({autoSaveId:e=null,children:n,className:t="",direction:a,forwardedRef:o,id:r=null,onLayout:s=null,keyboardResizeBy:l=null,storage:u=Re,style:d,tagName:x="div",...f}){const g=Fn(r),h=c.useRef(null),[m,p]=c.useState(null),[F,S]=c.useState([]),I=ka(),R=c.useRef({}),b=c.useRef(new Map),$=c.useRef(0),D=c.useRef({autoSaveId:e,direction:a,dragState:m,id:g,keyboardResizeBy:l,onLayout:s,storage:u}),v=c.useRef({layout:F,panelDataArray:[],panelDataArrayChanged:!1});c.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),c.useImperativeHandle(o,()=>({getId:()=>D.current.id,getLayout:()=>{const{layout:y}=v.current;return y},setLayout:y=>{const{onLayout:A}=D.current,{layout:P,panelDataArray:E}=v.current,C=Ln({layout:y,panelConstraints:E.map(z=>z.constraints)});Mn(P,C)||(S(C),v.current.layout=C,A&&A(C),me(E,C,R.current))}}),[]),ge(()=>{D.current.autoSaveId=e,D.current.direction=a,D.current.dragState=m,D.current.id=g,D.current.onLayout=s,D.current.storage=u}),Oa({committedValuesRef:D,eagerValuesRef:v,groupId:g,layout:F,panelDataArray:v.current.panelDataArray,setLayout:S,panelGroupElement:h.current}),c.useEffect(()=>{const{panelDataArray:y}=v.current;if(e){if(F.length===0||F.length!==y.length)return;let A=kn[e];A==null&&(A=Va(Wa,Ja),kn[e]=A);const P=[...y],E=new Map(b.current);A(e,P,E,F,u)}},[e,F,u]),c.useEffect(()=>{});const V=c.useCallback(y=>{const{onLayout:A}=D.current,{layout:P,panelDataArray:E}=v.current;if(y.constraints.collapsible){const C=E.map(Z=>Z.constraints),{collapsedSize:z=0,panelSize:M,pivotIndices:B}=ce(E,y,P);if(w(M!=null,`Panel size not found for panel "${y.id}"`),!ne(M,z)){b.current.set(y.id,M);const Q=pe(E,y)===E.length-1?M-z:z-M,N=Pe({delta:Q,initialLayout:P,panelConstraints:C,pivotIndices:B,prevLayout:P,trigger:"imperative-api"});je(P,N)||(S(N),v.current.layout=N,A&&A(N),me(E,N,R.current))}}},[]),q=c.useCallback((y,A)=>{const{onLayout:P}=D.current,{layout:E,panelDataArray:C}=v.current;if(y.constraints.collapsible){const z=C.map(X=>X.constraints),{collapsedSize:M=0,panelSize:B=0,minSize:Z=0,pivotIndices:Q}=ce(C,y,E),N=A??Z;if(ne(B,M)){const X=b.current.get(y.id),ze=X!=null&&X>=N?X:N,Xe=pe(C,y)===C.length-1?B-ze:ze-B,K=Pe({delta:Xe,initialLayout:E,panelConstraints:z,pivotIndices:Q,prevLayout:E,trigger:"imperative-api"});je(E,K)||(S(K),v.current.layout=K,P&&P(K),me(C,K,R.current))}}},[]),W=c.useCallback(y=>{const{layout:A,panelDataArray:P}=v.current,{panelSize:E}=ce(P,y,A);return w(E!=null,`Panel size not found for panel "${y.id}"`),E},[]),G=c.useCallback((y,A)=>{const{panelDataArray:P}=v.current,E=pe(P,y);return Ua({defaultSize:A,dragState:m,layout:F,panelData:P,panelIndex:E})},[m,F]),k=c.useCallback(y=>{const{layout:A,panelDataArray:P}=v.current,{collapsedSize:E=0,collapsible:C,panelSize:z}=ce(P,y,A);return w(z!=null,`Panel size not found for panel "${y.id}"`),C===!0&&ne(z,E)},[]),le=c.useCallback(y=>{const{layout:A,panelDataArray:P}=v.current,{collapsedSize:E=0,collapsible:C,panelSize:z}=ce(P,y,A);return w(z!=null,`Panel size not found for panel "${y.id}"`),!C||de(z,E)>0},[]),_=c.useCallback(y=>{const{panelDataArray:A}=v.current;A.push(y),A.sort((P,E)=>{const C=P.order,z=E.order;return C==null&&z==null?0:C==null?-1:z==null?1:C-z}),v.current.panelDataArrayChanged=!0,I()},[I]);ge(()=>{if(v.current.panelDataArrayChanged){v.current.panelDataArrayChanged=!1;const{autoSaveId:y,onLayout:A,storage:P}=D.current,{layout:E,panelDataArray:C}=v.current;let z=null;if(y){const B=Ka(y,C,P);B&&(b.current=new Map(Object.entries(B.expandToSizes)),z=B.layout)}z==null&&(z=Ga({panelDataArray:C}));const M=Ln({layout:z,panelConstraints:C.map(B=>B.constraints)});Mn(E,M)||(S(M),v.current.layout=M,A&&A(M),me(C,M,R.current))}}),ge(()=>{const y=v.current;return()=>{y.layout=[]}},[]);const H=c.useCallback(y=>{let A=!1;const P=h.current;return P&&window.getComputedStyle(P,null).getPropertyValue("direction")==="rtl"&&(A=!0),function(C){C.preventDefault();const z=h.current;if(!z)return()=>null;const{direction:M,dragState:B,id:Z,keyboardResizeBy:Q,onLayout:N}=D.current,{layout:X,panelDataArray:ze}=v.current,{initialLayout:ke}=B??{},Xe=nt(Z,y,z);let K=_a(C,y,M,B,Q,z);const bn=M==="horizontal";bn&&A&&(K=-K);const ct=ze.map(ut=>ut.constraints),we=Pe({delta:K,initialLayout:ke??X,panelConstraints:ct,pivotIndices:Xe,prevLayout:X,trigger:Vn(C)?"keyboard":"mouse-or-touch"}),vn=!je(X,we);(Kn(C)||Wn(C))&&$.current!=K&&($.current=K,!vn&&K!==0?bn?rn(y,K<0?qn:Xn):rn(y,K<0?Yn:Zn):rn(y,0)),vn&&(S(we),v.current.layout=we,N&&N(we),me(ze,we,R.current))}},[]),U=c.useCallback((y,A)=>{const{onLayout:P}=D.current,{layout:E,panelDataArray:C}=v.current,z=C.map(X=>X.constraints),{panelSize:M,pivotIndices:B}=ce(C,y,E);w(M!=null,`Panel size not found for panel "${y.id}"`);const Q=pe(C,y)===C.length-1?M-A:A-M,N=Pe({delta:Q,initialLayout:E,panelConstraints:z,pivotIndices:B,prevLayout:E,trigger:"imperative-api"});je(E,N)||(S(N),v.current.layout=N,P&&P(N),me(C,N,R.current))},[]),be=c.useCallback((y,A)=>{const{layout:P,panelDataArray:E}=v.current,{collapsedSize:C=0,collapsible:z}=A,{collapsedSize:M=0,collapsible:B,maxSize:Z=100,minSize:Q=0}=y.constraints,{panelSize:N}=ce(E,y,P);N!=null&&(z&&B&&ne(N,C)?ne(C,M)||U(y,M):N<Q?U(y,Q):N>Z&&U(y,Z))},[U]),ve=c.useCallback((y,A)=>{const{direction:P}=D.current,{layout:E}=v.current;if(!h.current)return;const C=qe(y,h.current);w(C,`Drag handle element not found for id "${y}"`);const z=at(P,A);p({dragHandleId:y,dragHandleRect:C.getBoundingClientRect(),initialCursorPosition:z,initialLayout:E})},[]),Ee=c.useCallback(()=>{p(null)},[]),Le=c.useCallback(y=>{const{panelDataArray:A}=v.current,P=pe(A,y);P>=0&&(A.splice(P,1),delete R.current[y.id],v.current.panelDataArrayChanged=!0,I())},[I]),fe=c.useMemo(()=>({collapsePanel:V,direction:a,dragState:m,expandPanel:q,getPanelSize:W,getPanelStyle:G,groupId:g,isPanelCollapsed:k,isPanelExpanded:le,reevaluatePanelConstraints:be,registerPanel:_,registerResizeHandle:H,resizePanel:U,startDragging:ve,stopDragging:Ee,unregisterPanel:Le,panelGroupElement:h.current}),[V,m,a,q,W,G,g,k,le,be,_,H,U,ve,Ee,Le]),Ae={display:"flex",flexDirection:a==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return c.createElement(Ke.Provider,{value:fe},c.createElement(x,{...f,children:n,className:t,id:r,ref:h,style:{...Ae,...d},[L.group]:"",[L.groupDirection]:a,[L.groupId]:g}))}const lt=c.forwardRef((e,n)=>c.createElement(st,{...e,forwardedRef:n}));st.displayName="PanelGroup";lt.displayName="forwardRef(PanelGroup)";function pe(e,n){return e.findIndex(t=>t===n||t.id===n.id)}function ce(e,n,t){const a=pe(e,n),r=a===e.length-1?[a-1,a]:[a,a+1],s=t[a];return{...n.constraints,panelSize:s,pivotIndices:r}}function qa({disabled:e,handleId:n,resizeHandler:t,panelGroupElement:a}){c.useEffect(()=>{if(e||t==null||a==null)return;const o=qe(n,a);if(o==null)return;const r=s=>{if(!s.defaultPrevented)switch(s.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{s.preventDefault(),t(s);break}case"F6":{s.preventDefault();const l=o.getAttribute(L.groupId);w(l,`No group element found for id "${l}"`);const u=Me(l,a),d=et(l,n,a);w(d!==null,`No resize element found for id "${n}"`);const x=s.shiftKey?d>0?d-1:u.length-1:d+1<u.length?d+1:0;u[x].focus();break}}};return o.addEventListener("keydown",r),()=>{o.removeEventListener("keydown",r)}},[a,e,n,t])}function dn({children:e=null,className:n="",disabled:t=!1,hitAreaMargins:a,id:o,onBlur:r,onClick:s,onDragging:l,onFocus:u,onPointerDown:d,onPointerUp:x,style:f={},tabIndex:g=0,tagName:h="div",...m}){var p,F;const S=c.useRef(null),I=c.useRef({onClick:s,onDragging:l,onPointerDown:d,onPointerUp:x});c.useEffect(()=>{I.current.onClick=s,I.current.onDragging=l,I.current.onPointerDown=d,I.current.onPointerUp=x});const R=c.useContext(Ke);if(R===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:b,groupId:$,registerResizeHandle:D,startDragging:v,stopDragging:V,panelGroupElement:q}=R,W=Fn(o),[G,k]=c.useState("inactive"),[le,_]=c.useState(!1),[H,U]=c.useState(null),be=c.useRef({state:G});ge(()=>{be.current.state=G}),c.useEffect(()=>{if(t)U(null);else{const fe=D(W);U(()=>fe)}},[t,W,D]);const ve=(p=a==null?void 0:a.coarse)!==null&&p!==void 0?p:15,Ee=(F=a==null?void 0:a.fine)!==null&&F!==void 0?F:5;c.useEffect(()=>{if(t||H==null)return;const fe=S.current;w(fe,"Element ref not attached");let Ae=!1;return Na(W,fe,b,{coarse:ve,fine:Ee},(A,P,E)=>{if(!P){k("inactive");return}switch(A){case"down":{k("drag"),Ae=!1,w(E,'Expected event to be defined for "down" action'),v(W,E);const{onDragging:C,onPointerDown:z}=I.current;C==null||C(!0),z==null||z();break}case"move":{const{state:C}=be.current;Ae=!0,C!=="drag"&&k("hover"),w(E,'Expected event to be defined for "move" action'),H(E);break}case"up":{k("hover"),V();const{onClick:C,onDragging:z,onPointerUp:M}=I.current;z==null||z(!1),M==null||M(),Ae||C==null||C();break}}})},[ve,b,t,Ee,D,W,H,v,V]),qa({disabled:t,handleId:W,resizeHandler:H,panelGroupElement:q});const Le={touchAction:"none",userSelect:"none"};return c.createElement(h,{...m,children:e,className:n,id:o,onBlur:()=>{_(!1),r==null||r()},onFocus:()=>{_(!0),u==null||u()},ref:S,role:"separator",style:{...Le,...f},tabIndex:g,[L.groupDirection]:b,[L.groupId]:$,[L.resizeHandle]:"",[L.resizeHandleActive]:G==="drag"?"pointer":le?"keyboard":void 0,[L.resizeHandleEnabled]:!t,[L.resizeHandleId]:W,[L.resizeHandleState]:G})}dn.displayName="PanelResizeHandle";function Xa({project:e,forceDisabled:n}){const[t,a]=c.useState(e.prefillColor),o=c.useContext(ae);return c.useEffect(()=>{t!==e.prefillColor&&o({...e,prefillColor:t,dirty:!0})},[t]),c.useEffect(()=>{a(e.prefillColor)},[e.prefillColor]),i.jsx(j,{label:"Pre-fill color",disabled:!e.prefill||n,children:i.jsx(O,{disabled:!e.prefill||n,type:"color",leftIcon:"tint",value:t,onValueChange:a})})}function Ya({project:e,forceDisabled:n}){const[t,a]=c.useState(e.prefillOutline),[o,r]=c.useState(e.prefillOutlineColor),s=c.useContext(ae);return c.useEffect(()=>{t!==e.prefillOutline&&s({...e,prefillOutline:t,dirty:!0})},[t]),c.useEffect(()=>{o!==e.prefillOutlineColor&&s({...e,prefillOutlineColor:o,dirty:!0})},[o]),c.useEffect(()=>{a(e.prefillOutline)},[e.prefillOutline]),c.useEffect(()=>{r(e.prefillOutlineColor)},[e.prefillOutlineColor]),i.jsx(j,{label:"Pre-fill outline",disabled:!e.prefill||n,children:i.jsx(O,{disabled:!e.prefill||n,type:"number",leftIcon:"dot",value:t.toString(),onValueChange:l=>a(Number(l)),rightElement:i.jsx(O,{disabled:!e.prefill||n,type:"color",style:{minWidth:"50px"},value:o,onValueChange:r})})})}function Qa({project:e}){const[n,t]=c.useState(0),[a,o]=c.useState(!1),r=c.useRef(null);pn(r,l=>{t(200/l.contentRect.width*100)});const s=!!e.importedTemplate&&!a;return i.jsx("div",{ref:r,children:i.jsxs(lt,{direction:"horizontal",children:[i.jsx(Be,{id:"template-settings",order:1,minSize:n,children:i.jsxs("div",{className:`${Ye.formcontainer}`,children:[i.jsx(cn,{children:"Template Settings"}),e.importedTemplate&&i.jsxs(ie,{intent:"warning",children:["A template was imported. The settings in this section will have no effect on the font until they are exported and reimported.",i.jsx(Ut,{label:"Understood, edit anyway",checked:a,onChange:l=>o(l.target.checked)})]}),i.jsx(Zt,{project:e,forceDisabled:s}),i.jsx(Xa,{project:e,forceDisabled:s}),i.jsx(Ya,{project:e,forceDisabled:s}),i.jsx(un,{}),i.jsx(oa,{project:e,forceDisabled:s}),i.jsx(la,{project:e,forceDisabled:s}),i.jsx(un,{}),i.jsx(ya,{project:e,forceDisabled:s})]})}),i.jsx(dn,{id:"template-font-handle",className:sn}),i.jsx(Be,{id:"font-settings",order:2,minSize:n,children:i.jsxs("div",{className:`${Ye.formcontainer}`,children:[i.jsx(cn,{children:"Font Settings"}),i.jsx(Fa,{project:e}),i.jsx(Sa,{project:e})]})}),i.jsx(dn,{id:"font-canvas-handle",className:sn}),i.jsx(Be,{id:"canvas",order:3,minSize:n,children:i.jsx("div",{className:`${Ye.canvascontainer}`,children:i.jsx(ma,{project:e})})})]})})}export{Qa as default};
