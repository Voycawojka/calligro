{"version":3,"sources":["ui/generation/step2/step2.module.scss","ui/generation/dropzone/dropzone.module.scss","ui/generation/step2KerningPairsList/step2KerningPairsList.module.scss","ui/generation/preview/preview.module.scss","generation/fs/image.ts","generation/packing/imagePacking.ts","generation/font/Font.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","generation/font/specSaver.ts","generation/font/download.ts","ui/generation/dropzone/Dropzone.tsx","ui/generation/step2KerningPairsList/Step2KerningPairsList.tsx","preview/preview.ts","ui/generation/preview/Preview.tsx","ui/generation/step2/Step2.tsx"],"names":["module","exports","blobToCanvas","blob","Promise","resolve","dataUrl","URL","createObjectURL","image","document","createElement","onload","createCanvas","width","height","canvas","ctx","drawImage","remove","revokeObjectURL","src","packFromSheet","source","rects","data","packedRects","nextX","nextY","furthestSoFar","lowestSoFar","sort","a","b","h","map","rect","w","packed","x","y","sourceRect","pack","forEach","generateFont","templateImg","tempConfig","fontConfig","slots","unicode","character","String","fromCharCode","template","Template","base","presetName","sourceRects","slot","index","getSlotPosition","slotDim","packedTexture","convertToBlob","packedBlob","specification","info","face","size","stretchH","aa","padding","up","right","down","left","spacing","horizontal","horizontalSpacing","vertical","verticalSpacing","outline","common","lineHeight","scaleW","scaleH","pages","id","file","chars","charCodeAt","xoffset","yoffset","xadvance","page","chnl","kernings","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","txtTag","name","properties","joinedProps","prop","value","toString","join","xmlTag","fontSpecToTextFile","format","tag","infoTag","commonTag","pageTags","charTags","char","kerningTags","kerning","first","second","amount","font","length","downloadBmf","fntFile","files","input","i","downloadArchive","Dropzone","props","templateInput","state","dragCounter","React","createRef","type","this","dataType","handleDropzoneInput","current","handleFileInput","event","preventDefault","dataTransfer","setState","prevState","renderUploadedFileName","fileName","className","styles","renderError","error","container","containerDragOver","onDrop","handleDrop","onDragOver","dragOver","onDragEnter","dragEnter","onDragLeave","dragLeave","label","inputName","inputContainer","ref","onChange","handleInput","accept","acceptedInputType","title","Component","bind","Step2KerningPairsList","pairsContainerRef","pairs","UICodeCharList","prevProps","templateCode","parsedCode","flatMap","isAllPairsValid","changeKernings","handleKerningsValidity","scrollToBottom","scrollTop","scrollHeight","newPairs","splice","target","undefined","charToUnicode","charAt","parseInt","includes","pair","filter","workPair","isFirstCharLegal","isCharLegal","isSecondCharLegal","isWorkPairLegal","isPairUnrepeated","some","isPairValid","renderPairs","inputInvalid","unicodeToChar","changeChar","changeAmount","button","onClick","deletePair","Fa","icon","questionMark","pairsContainer","pairsKey","addPair","disabled","warning","isAnyPairWithLegalCharsRepeated","warningOff","blobsToTextures","blobs","textures","img","Image","push","getKerningAmount","text","charIndex","spec","charCode1","charCode2","find","drawPreview","scale","cursor","clearRect","strokeStyle","c","charSpec","placeholder","kerningAmount","texture","pos","strokeRect","Preview","canvasContainer","getContext","draw","newColor","style","setProperty","controls","previewInput","step","min","parseFloat","isNaN","scaleInput","colorInput","defaultValue","handleBgColorChange","previewContainer","maxHeight","ipcRenderer","window","require","Step2","horizontalMargin","verticalMargin","kerningPairs","isKerningsValid","isTemplateFileValid","templateError","templateCodeError","isCodeFileValid","parseTemplateCode","code","templateCodeName","console","warn","getFontConfig","fontSpec","isElectron","pagesBufferArray","arrayBuffer","buffer","send","standardizeNumericalInput","valid","desktop","dropzones","handleTemplateDropzoneInput","handleCodeDropzoneInput","options","option","optionsLabel","optionsInput","handleNumericalInput","times","download","buttonsContainerLabel","buttons","downloadFont","downloadButton","areDropzonesValid","samplesParagraph","href","samplesLink","rel","heading","instructionList","instructionListItem"],"mappings":"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","file":"static/js/3.6617e58e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"step2_container__mP1Lb\",\"desktop\":\"step2_desktop__2F80Z\",\"instructionList\":\"step2_instructionList__A_Js5\",\"instructionListItem\":\"step2_instructionListItem__24XyX\",\"heading\":\"step2_heading__284k2\",\"dropzones\":\"step2_dropzones__2utFp\",\"options\":\"step2_options__3tola\",\"label\":\"step2_label__3qcY3\",\"optionsLabel\":\"step2_optionsLabel__2tyAP\",\"buttonsContainerLabel\":\"step2_buttonsContainerLabel__3VAjD\",\"optionsInput\":\"step2_optionsInput__2ZWmB\",\"times\":\"step2_times__263gt\",\"questionMark\":\"step2_questionMark__3yZuf\",\"option\":\"step2_option__2yRFz\",\"downloadButton\":\"step2_downloadButton__3smy0\",\"download\":\"step2_download__1hxQw\",\"buttons\":\"step2_buttons__1G7PN\",\"samplesParagraph\":\"step2_samplesParagraph__12U9D\",\"samplesLink\":\"step2_samplesLink__3X2DM\",\"previewContainer\":\"step2_previewContainer__M4HZf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"dropzone_container__3YvRs\",\"containerDragOver\":\"dropzone_containerDragOver__2HKb-\",\"inputContainer\":\"dropzone_inputContainer__OD9Y7\",\"label\":\"dropzone_label__xsqTw\",\"fileName\":\"dropzone_fileName__CjjRG\",\"error\":\"dropzone_error__2gMT-\",\"input\":\"dropzone_input__3YtRE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"step2KerningPairsList_container__2Re1A\",\"pairsContainer\":\"step2KerningPairsList_pairsContainer__2Qy3n\",\"pairsKey\":\"step2KerningPairsList_pairsKey__3OuXe\",\"button\":\"step2KerningPairsList_button__2e3T4\",\"label\":\"step2KerningPairsList_label__1YYti\",\"questionMark\":\"step2KerningPairsList_questionMark__2cusH\",\"input\":\"step2KerningPairsList_input__1pUjE\",\"inputInvalid\":\"step2KerningPairsList_inputInvalid__1-_2u\",\"warning\":\"step2KerningPairsList_warning__l57EV\",\"warningOff\":\"step2KerningPairsList_warningOff__2InZl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"previewContainer\":\"preview_previewContainer__2I4vQ\",\"container\":\"preview_container__3udyd\",\"controls\":\"preview_controls__2tjzM\",\"label\":\"preview_label__NoYDD\",\"previewInput\":\"preview_previewInput__1jt99\",\"scaleInput\":\"preview_scaleInput__29AjD\",\"colorInput\":\"preview_colorInput__hopCs\"};","import { createCanvas } from \"../../utils/canvasHelpers\"\n\nexport function blobToCanvas(blob: Blob): Promise<[HTMLCanvasElement, CanvasRenderingContext2D]> {\n    return new Promise(resolve => {\n        const dataUrl = URL.createObjectURL(blob)\n        const image = document.createElement('img')\n\n        image.onload = () => {\n            const [canvas, ctx] = createCanvas(image.width, image.height)\n\n            ctx.drawImage(image, 0, 0)\n\n            image.remove()\n            URL.revokeObjectURL(dataUrl)\n\n            resolve([canvas, ctx])\n        }\n\n        image.src = dataUrl\n    })\n}\n","import { createCanvas } from '../../utils/canvasHelpers'\nimport { Slot } from '../template/types'\n\nexport interface SourceRect {\n    x: number,\n    y: number,\n    w: number,\n    h: number,\n    slot: Slot\n}\n\nexport interface PackedRect {\n    x: number,\n    y: number,\n    sourceRect: SourceRect\n}\n\ninterface PackedData {\n    packedRects: PackedRect[],\n    width: number,\n    height: number\n}\n\nfunction pack(rects: SourceRect[], width: number): PackedData {\n    const data: PackedData = {\n        packedRects: [],\n        width: 0,\n        height: 0\n    }\n    \n    let nextX = 0\n    let nextY = 0\n    let furthestSoFar = 0\n    let lowestSoFar = 0\n\n    data.packedRects = rects\n        .sort((a, b) => b.h - a.h)\n        .map(rect => {\n            if (nextX + rect.w > width) {\n                nextX = 0\n                nextY = lowestSoFar\n            }\n\n            if (nextX + rect.w > furthestSoFar) {\n                furthestSoFar = nextX + rect.w\n            }\n\n            if (nextY + rect.h > lowestSoFar) {\n                lowestSoFar = nextY + rect.h\n            }\n\n            const packed = {\n                x: nextX,\n                y: nextY,\n                sourceRect: rect\n            }\n\n            nextX += rect.w\n\n            return packed\n        })\n    \n    data.width = furthestSoFar\n    data.height = lowestSoFar\n\n    return data\n}\n\nexport function packFromSheet(source: HTMLCanvasElement, rects: SourceRect[]): [HTMLCanvasElement, PackedRect[]] {\n    const { width, height, packedRects } = pack(rects, source.width)\n    const [canvas, ctx] = createCanvas(width, height)\n\n    packedRects.forEach(({ x, y, sourceRect }) => {\n        const { w, h } = sourceRect\n        ctx.drawImage(source, sourceRect.x, sourceRect.y, w, h, x, y, w, h)\n    })\n\n    return [canvas, packedRects]\n}\n","import { convertToBlob } from '../../utils/canvasHelpers'\nimport { blobToCanvas } from '../fs/image'\nimport { packFromSheet, SourceRect } from '../packing/imagePacking'\nimport Template from '../template/Template'\nimport { CodePayload } from '../template/types'\n\nexport interface FontSpec {\n    info: {\n        face: string\n        size: number\n        stretchH: number\n        aa: number\n        padding: {\n            up: number\n            right: number\n            down: number\n            left: number\n        }\n        spacing: {\n            horizontal: number\n            vertical: number\n        }\n        outline: number\n    }\n    common: {\n        lineHeight: number\n        base: number\n        scaleW: number\n        scaleH: number\n        pages: number\n    }\n    pages: {\n        id: number\n        file: string\n    }[]\n    chars: {\n        id: number\n        x: number\n        y: number\n        width: number\n        height: number\n        xoffset: number\n        yoffset: number\n        xadvance: number\n        page: number\n        chnl: 1 | 2 | 4 | 8 | 15\n    }[]\n    kernings: {\n        first: number\n        second: number\n        amount: number\n    }[]\n}\n\nexport interface KerningPair {\n    first: number\n    second: number\n    amount: number\n}\n\nexport interface FontConfig {\n    horizontalSpacing: number\n    verticalSpacing: number\n    lineHeight: number\n    kernings: KerningPair[]\n}\n\nexport async function generateFont(templateImg: Blob, tempConfig: CodePayload, fontConfig: FontConfig): Promise<[FontSpec, Blob[]]> {\n    const slots = tempConfig.slots.map(([ unicode, width, height ]) => ({ character: String.fromCharCode(unicode), width, height }))\n    const template = new Template(slots, tempConfig.base, tempConfig.presetName)\n\n    const [canvas] = await blobToCanvas(templateImg)\n\n    const sourceRects: SourceRect[] = slots.map((slot, index) => ({\n        slot,\n        x: template.getSlotPosition(index + 1).x + template.slotDim.w / 2 - (slot.width - 2) / 2,\n        y: template.getSlotPosition(index + 1).y + template.slotDim.h / 2 - (slot.height - 2) / 2,\n        w: slot.width - 2,\n        h: slot.height - 2\n    }))\n\n    const [packedTexture, packedRects] = packFromSheet(canvas, sourceRects)\n    const packedBlob = await convertToBlob(packedTexture)\n\n    const specification: FontSpec = {\n        info: {\n            face: 'calligro-custom',\n            size: 12,\n            stretchH: 100,\n            aa: 1,\n            padding: {\n                up: 0,\n                right: 0,\n                down: 0,\n                left: 0\n            },\n            spacing: {\n                horizontal: fontConfig.horizontalSpacing,\n                vertical: fontConfig.verticalSpacing\n            },\n            outline: 0\n        },\n        common: {\n            lineHeight: fontConfig.lineHeight,\n            base: tempConfig.base,\n            scaleW: canvas.width,\n            scaleH: canvas.height,\n            pages: 1\n        },\n        pages: [\n            {\n                id: 0,\n                file: 'calligro-page-0.png'\n            }\n        ],\n        chars: packedRects.map(rect => ({\n            id: rect.sourceRect.slot.character.charCodeAt(0),\n            x: rect.x,\n            y: rect.y,\n            width: rect.sourceRect.w,\n            height: rect.sourceRect.h,\n            xoffset: 0,\n            yoffset: 0,\n            xadvance: rect.sourceRect.w,\n            page: 0,\n            chnl: 15\n        })),\n        kernings: fontConfig.kernings\n    }\n\n    return [specification, [packedBlob]]\n}\n","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { FontSpec } from \"./Font\";\n\ntype tagProp = [string, string | number]\n\nfunction txtTag(name: string, properties: tagProp[]) {\n    const joinedProps = properties.map(([ prop, value ]) => `${prop}=${value.toString()}`).join(' ')\n    return `${name} ${joinedProps}`\n}\n\nfunction xmlTag(name: string, properties: tagProp[]) {\n    const joinedProps = properties.map(([ prop, value ]) => `${prop}=\"${value.toString()}\"`).join(' ')\n    return `<${name} ${joinedProps} />`\n}\n\nexport function fontSpecToTextFile(specification: FontSpec, format: 'txt' | 'xml') {\n    const tag = format === 'txt' ? txtTag : xmlTag\n\n    const info = specification.info\n    const infoTag = tag('info', [\n        ['face', info.face],\n        ['size', info.size],\n        ['unicode', '1'],\n        ['bold', '0'],\n        ['italic', '0'],\n        ['stretchH', info.stretchH],\n        ['aa', info.stretchH],\n        ['padding', `${info.padding.up},${info.padding.right},${info.padding.down},${info.padding.left}`],\n        ['spacing', `${info.spacing.horizontal},${info.spacing.vertical}`]\n    ])\n\n    const common = specification.common\n    const commonTag = tag('common', [\n        ['lineHeight', common.lineHeight],\n        ['base', common.base],\n        ['scaleW', common.scaleW],\n        ['scaleH', common.scaleH],\n        ['pages', common.pages]\n    ])\n\n    const pageTags = specification.pages.map(page => tag('page', [\n        ['id', page.id],\n        ['file', page.file]\n    ]))\n\n    const charTags = specification.chars.map(char => tag('char', [\n        ['id', char.id],\n        ['x', char.x],\n        ['y', char.y],\n        ['width', char.width],\n        ['height', char.height],\n        ['xoffset', char.xoffset],\n        ['yoffset', char.yoffset],\n        ['xadvance', char.xadvance],\n        ['page', char.page],\n        ['chnl', char.chnl]\n    ]))\n\n    const kerningTags = specification.kernings.map(kerning => tag('kerning', [\n        ['first', kerning.first],\n        ['second', kerning.second],\n        ['amount', kerning.amount]\n    ]))\n\n    switch(format) {\n        case 'txt':\n            return [\n                infoTag,\n                commonTag,\n                ...pageTags,\n                ...charTags,\n                ...kerningTags\n            ].join('\\n')\n        \n        case 'xml':\n            const font = [\n                infoTag,\n                commonTag,\n                '<pages>',\n                ...pageTags.map(tag => `\\t${tag}`),\n                '</pages>',\n                `<chars count=\"${charTags.length}\">`,\n                ...charTags.map(tag => `\\t${tag}`),\n                '</chars>',\n                `<kernings count=\"${kerningTags.length}\">`,\n                ...kerningTags.map(tag => `\\t${tag}`),\n                '</kernings>'\n            ].join('\\n\\t')\n\n            return [\n                '<?xml version=\"1.0\"?>',\n                '<font>',\n                '\\t' + font,\n                '</font>'\n            ].join('\\n')\n    }\n}\n","import { downloadArchive, ZippedFile } from '../fs/zip'\n\nexport async function downloadBmf(fntFile: string, pages: Blob[]): Promise<void> {\n    const files: ZippedFile[] = [\n        {\n            name: 'calligro-font.fnt',\n            input: fntFile\n        },\n        ...pages.map((page, i) => ({\n            name: `calligro-page-${i}.png`,\n            input: page\n        }))\n    ]\n\n    return downloadArchive('calligro-font', files)\n}\n","import { bind } from 'helpful-decorators'\nimport React, { Component } from 'react'\nimport styles from './dropzone.module.scss'\n\ninterface DropzoneProps {\n    handleDropzoneInput: (data: File) => void\n    fileName?: string\n    acceptedInputType: string\n    dataType: string\n    inputName: string\n    error?: string\n}\n\ninterface DropzoneState {\n    dragCounter: number\n}\n\nclass Dropzone extends Component<DropzoneProps, DropzoneState> {\n    private templateInput: React.RefObject<HTMLInputElement>\n\n    constructor(props: DropzoneProps) {\n        super(props)\n\n        this.state = {\n            dragCounter: 0\n        }\n\n        this.templateInput = React.createRef()\n    }\n\n    handleFileInput(data?: File) {\n        if (data && data.type === this.props.dataType) {\n            this.props.handleDropzoneInput(data)\n        }\n    }\n\n    @bind\n    handleInput() {\n        const data = this.templateInput.current?.files?.[0]\n       \n        this.handleFileInput(data)\n    }\n\n    @bind\n    handleDrop(event: React.DragEvent<HTMLDivElement>) {\n        event.preventDefault()\n        const data = event.dataTransfer.files[0]\n\n        this.handleFileInput(data)\n        this.setState({\n            dragCounter: 0\n        })\n    }\n\n    dragOver (event: React.DragEvent<HTMLDivElement>) {\n        event.preventDefault()\n    }\n    \n    @bind\n    dragEnter (event: React.DragEvent<HTMLDivElement>) {\n        event.preventDefault()\n\n        this.setState(prevState => ({\n            dragCounter: prevState.dragCounter + 1\n        }))\n    }\n    \n    @bind\n    dragLeave (event: React.DragEvent<HTMLDivElement>) {\n        event.preventDefault()\n\n        this.setState(prevState => ({\n            dragCounter: prevState.dragCounter - 1\n        }))\n    }\n\n    render() {\n        const renderUploadedFileName = this.props.fileName\n            ? <p className={styles.fileName}>Uploaded {this.props.fileName}</p>\n            : null\n        \n        const renderError = this.props.error\n            ? <p className={styles.error}>{this.props.error}</p>\n            : null\n\n        return (\n            <div\n                className={`${styles.container} ${this.state.dragCounter ? styles.containerDragOver : ''}`}\n                onDrop={this.handleDrop}\n                onDragOver={this.dragOver}\n                onDragEnter={this.dragEnter}\n                onDragLeave={this.dragLeave}\n            >\n                <label className={styles.label}>Drag&amp;drop the {this.props.inputName}</label>\n                <div className={styles.inputContainer}>\n                    <input\n                        aria-label={`${this.props.inputName} input`}\n                        className={styles.input}\n                        type='file' ref={this.templateInput}\n                        onChange={this.handleInput}\n                        accept={this.props.acceptedInputType}\n                        title=\" \"\n                    />\n                </div>\n                {renderUploadedFileName}\n                {renderError}\n            </div>\n        )\n    }\n}\n\nexport default Dropzone\n","import React, { Component, Fragment } from 'react'\nimport styles from './step2KerningPairsList.module.scss'\nimport { KerningPair } from '../../../generation/font/Font'\nimport { bind } from 'helpful-decorators'\nimport { unicodeToChar, charToUnicode } from '../../../utils/char'\nimport Fa from '../../misc/fa/Fa';\nimport { CodePayload } from '../../../generation/template/types'\n\ninterface WorkKerningPair {\n    first?: number,\n    second?: number,\n    amount?: number\n}\n\ninterface Step2KerningPairsListProps {\n    changeKernings: (kernings: KerningPair[]) => void\n    handleKerningsValidity: (valid: boolean) => void\n    templateCode?: CodePayload\n}\n\ninterface Step2KerningPairsListState {\n    pairs: WorkKerningPair[]\n    UICodeCharList: number[]\n}\n\nclass Step2KerningPairsList extends Component<Step2KerningPairsListProps, Step2KerningPairsListState> {\n    private pairsContainerRef: React.RefObject<HTMLDivElement>\n\n    constructor(props: Step2KerningPairsListProps) {\n        super(props)\n        this.state = {\n            pairs: [],\n            UICodeCharList: []\n        }\n        this.pairsContainerRef = React.createRef<HTMLDivElement>()\n    }\n\n    componentDidUpdate(prevProps: Step2KerningPairsListProps, prevState: Step2KerningPairsListState) {\n        if (prevProps.templateCode !== this.props.templateCode) {\n            this.setState({\n                pairs: []\n            })\n\n            if (this.props.templateCode) {\n                const parsedCode = this.props.templateCode?.slots.flatMap(char => char[0])\n\n                if (parsedCode) {\n                    this.setState({\n                        UICodeCharList: parsedCode\n                    })\n                }\n            }\n        }\n\n        if (prevState.pairs !== this.state.pairs) {\n            if (this.isAllPairsValid) {\n                this.props.changeKernings(this.state.pairs as KerningPair[])\n            }\n\n            this.props.handleKerningsValidity(this.isAllPairsValid)\n        }\n    }\n\n    @bind\n    addPair() {\n        this.setState(prevState => ({\n            pairs: [...prevState.pairs, {\n                amount: 1\n            }]\n        }), () => this.scrollToBottom())\n    }\n\n    scrollToBottom() {\n        if (this.pairsContainerRef.current) {\n            this.pairsContainerRef.current.scrollTop = this.pairsContainerRef.current.scrollHeight\n        }\n    }\n\n    @bind\n    deletePair(index: number) {\n        const newPairs = [...this.state.pairs]\n        newPairs.splice(index, 1)\n\n        this.setState({\n            pairs: newPairs\n        })\n    }\n\n    @bind\n    changeChar(event: React.ChangeEvent<HTMLInputElement>, index: number, char: 'first' | 'second') {\n         const value = event.target.value === '' ? undefined : charToUnicode(event.target.value.charAt(0))\n         const newPairs = [...this.state.pairs]\n\n         newPairs[index][char] = value\n\n         this.setState({\n            pairs: newPairs\n         })\n    }\n\n    @bind\n    changeAmount(event: React.ChangeEvent<HTMLInputElement>, index: number) {\n        const value = event.target.value === '' ? undefined : parseInt(event.target.value, 10)\n        const newPairs = [...this.state.pairs]\n\n        newPairs[index].amount = value\n\n        this.setState({\n            pairs: newPairs\n        })\n    }\n\n    @bind\n    isCharLegal(char?: number): boolean {\n        return char !== undefined ? this.state.UICodeCharList.includes(char) : false\n    }\n\n    \n    isPairUnrepeated(pair: WorkKerningPair) {\n        return this.state.pairs.filter(workPair => pair.first === workPair.first && pair.second === workPair.second).length < 2\n    }\n\n    isWorkPairLegal(pair: WorkKerningPair) {\n        const {first, second, amount} = pair\n\n        const isFirstCharLegal = this.isCharLegal(first)\n        const isSecondCharLegal = this.isCharLegal(second)\n        const isAmountLegal = !!amount\n\n        return isFirstCharLegal && isSecondCharLegal && isAmountLegal\n    }\n\n    @bind\n    isPairValid(pair: WorkKerningPair): boolean {\n        return this.isWorkPairLegal(pair) && this.isPairUnrepeated(pair)\n    }\n\n    get isAllPairsValid(): boolean {\n        return !this.state.pairs.some(pair => !this.isPairValid(pair))\n    }\n\n    get isAnyPairWithLegalCharsRepeated() {\n        return this.state.pairs.some(pair => !this.isPairUnrepeated(pair) && this.isCharLegal(pair.first) && this.isCharLegal(pair.second))\n    }\n\n    render () {\n        const renderPairs = this.state.pairs.map(( pair, index ) =>\n            <Fragment key={index} >\n                <input\n                    aria-label='first letter input'\n                    className={`${styles.input} ${this.isCharLegal(pair.first) && this.isPairUnrepeated(pair) ? '' : styles.inputInvalid}`}\n                    value={pair.first ? unicodeToChar(pair.first) : ''}\n                    onChange={(event) => this.changeChar(event, index, 'first')}\n                    type='text'\n                />\n\n                <input\n                    aria-label='second letter input'\n                    className={`${styles.input} ${this.isCharLegal(pair.second) && this.isPairUnrepeated(pair) ? '' : styles.inputInvalid}`}\n                    value={pair.second ? unicodeToChar(pair.second) : ''}\n                    onChange={(event) => this.changeChar(event, index, 'second')}\n                    type='text'\n                />\n\n                <input\n                    aria-label='distance input'\n                    className={`${styles.input} ${!!pair.amount ? '' : styles.inputInvalid}`}\n                    value={pair.amount ?? ''}\n                    onChange={(event) => this.changeAmount(event, index)}\n                    type='number'\n                />\n\n                <button className={styles.button} onClick={() => this.deletePair(index)} title='Delete kerning pair'>\n                    <Fa icon='fas fa-minus' />\n                </button>\n            </Fragment>\n        )\n\n        return (\n            <div className={styles.container}>\n                <label className={styles.label}>Kerning pairs\n                    <Fa\n                        icon='fas fa-question'\n                        className={styles.questionMark}\n                        title='Pairs of characters with non-default distance from each other. Only supported by some engines'\n                    />\n                </label>\n                <div className={styles.pairsContainer} ref={this.pairsContainerRef}>\n                    <label className={styles.pairsKey}>character 1</label>\n                    <label className={styles.pairsKey}>character 2</label>\n                    <label className={styles.pairsKey}>distance\n                        <Fa\n                            icon='fas fa-question'\n                            className={styles.questionMark}\n                            title=' This value is added to the default character distance when character 2 immediately follows character 1. Can be negative.'\n                        />\n                    </label>\n                    <p className={styles.pairsKey}>\n                        <button\n                            className={styles.button}\n                            onClick={this.addPair}\n                            disabled={this.state.UICodeCharList.length === 0}\n                            title='Add kerning pair'\n                        >\n                            <Fa icon='fas fa-plus' />\n                        </button>\n                    </p>\n                    {renderPairs}\n                </div>\n                <p className={`${styles.warning} ${this.isAnyPairWithLegalCharsRepeated ? '' : styles.warningOff}`}>Some pairs are defined multiple times!</p>\n            </div>\n        )\n    }\n}\n\nexport default Step2KerningPairsList\n","import { FontSpec } from '../generation/font/Font'\n\nfunction blobsToTextures(blobs: Blob[]): Promise<HTMLImageElement[]> {\n    const textures: HTMLImageElement[] = []\n\n    return new Promise(resolve => blobs.forEach(blob => {\n        const img = new Image()\n\n        img.onload = () => {\n            textures.push(img)\n            if (textures.length === blobs.length) {\n                resolve(textures)\n            }\n        }\n\n        img.src = URL.createObjectURL(blob)\n    }))\n}\n\nfunction getKerningAmount(text: string, charIndex: number, spec: FontSpec): number {\n    if (charIndex <= 0 || charIndex >= text.length) {\n        return 0\n    }\n\n    const charCode1 = text.charCodeAt(charIndex - 1)\n    const charCode2 = text.charCodeAt(charIndex)\n    const kerning = spec.kernings.find(({ first, second }) => first === charCode1 && second === charCode2)\n\n    return kerning?.amount ?? 0\n}\n\nexport async function drawPreview(text:string, spec: FontSpec, pages: Blob[], scale: number, ctx: CanvasRenderingContext2D): Promise<void> {\n    const textures = await blobsToTextures(pages)\n    const cursor = {\n        x: spec.info.padding.left,\n        y: spec.info.padding.up\n    }\n\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n    ctx.strokeStyle = 'black'\n\n    ;[...text].forEach((c, i) => {\n        if (c === '\\n') {\n            cursor.x = 0\n            cursor.y += spec.info.spacing.vertical + spec.common.lineHeight\n            return\n        }\n\n        let charSpec = spec.chars.find(char => char.id === c.charCodeAt(0))\n        let placeholder = false\n\n        if (!charSpec) {\n           charSpec = spec.chars[0]\n           placeholder = true\n        }\n\n        const kerningAmount = placeholder ? 0 : getKerningAmount(text, i, spec)\n        const texture = textures[charSpec.page]\n\n        const pos = {\n            x: cursor.x + charSpec.xoffset + kerningAmount,\n            y: cursor.y + charSpec.yoffset\n        }\n\n        if ((pos.x + charSpec.width) * scale >= ctx.canvas.width) {\n            cursor.x = 0\n            cursor.y += spec.info.spacing.vertical + spec.common.lineHeight\n\n            pos.x = cursor.x + charSpec.xoffset + kerningAmount\n            pos.y = cursor.y + charSpec.yoffset\n        }\n\n        if (placeholder) {\n            const x = pos.x + charSpec.width / 4\n            const y = pos.y + charSpec.height / 4\n            const w = charSpec.width * 2/4\n            const h = charSpec.height * 2/4\n\n            ctx.strokeRect(x * scale, y * scale, w * scale, h * scale)\n        } else {\n            ctx.drawImage(texture, charSpec.x, charSpec.y, charSpec.width, charSpec.height, pos.x * scale, pos.y * scale, charSpec.width * scale, charSpec.height * scale)\n        }\n\n        cursor.x += charSpec.xadvance + spec.info.spacing.horizontal + kerningAmount\n    })\n}\n","import React, { Component } from 'react'\nimport { FontConfig, generateFont } from '../../../generation/font/Font'\nimport { CodePayload } from '../../../generation/template/types'\nimport { drawPreview } from '../../../preview/preview'\nimport styles from  './preview.module.scss'\n\ninterface PreviewProps {\n    width: number\n    height: number\n    templateCode?: CodePayload\n    templateImg?: Blob\n    fontConfig: FontConfig\n}\n\ninterface PreviewState {\n    text: string\n    scale: number\n}\n\nclass Preview extends Component<PreviewProps, PreviewState> {\n    private canvas: React.RefObject<HTMLCanvasElement>\n    private canvasContainer: React.RefObject<HTMLDivElement>\n\n    constructor(props: PreviewProps) {\n        super(props)\n\n        this.state = {\n            text: '',\n            scale: 1\n        }\n\n        this.canvas = React.createRef()\n        this.canvasContainer = React.createRef()\n    }\n\n    async draw() {\n        if (this.canvas.current && this.props.templateImg && this.props.templateCode) {\n            const ctx = this.canvas.current.getContext('2d')\n            const spec = await generateFont(this.props.templateImg, this.props.templateCode, this.props.fontConfig)\n\n            ctx && drawPreview(this.state.text, spec[0], spec[1], this.state.scale, ctx)\n        }\n    }\n\n    componentDidMount() {\n        this.draw()\n    }\n\n    componentDidUpdate() {\n        this.draw()\n    }\n\n    handleBgColorChange(newColor: string) {\n        this.canvasContainer.current?.style.setProperty('--bgColor', newColor)\n    }\n\n    render() {\n        return <div className={styles.container}>\n            <div className={styles.controls}>\n                <textarea\n                    aria-label='preview text input'\n                    onChange={event => this.setState({ text: event.target.value })}\n                    value={this.state.text}\n                    className={styles.previewInput}\n                    placeholder='Type to preview the font' />\n                <div>\n                    <label className={styles.label}>Scale</label>\n                    <input\n                        aria-label='preview scale input'\n                        type='number'\n                        step={0.01}\n                        min={0.01}\n                        onChange={event => this.setState({ scale: parseFloat(event.target.value) })}\n                        value={isNaN(this.state.scale) ? '' : this.state.scale}\n                        className={styles.scaleInput} />\n                </div>\n                <div>\n                    <label className={styles.label}>Background</label>\n                    <input\n                        aria-label='preview color input'\n                        type='color'\n                        className={styles.colorInput}\n                        defaultValue='#ffffff'\n                        onChange={event => this.handleBgColorChange(event.target.value)} />\n                </div>\n            </div>\n            <div\n                className={styles.previewContainer}\n                ref={this.canvasContainer}\n                style={{ width: this.props.width, maxHeight: this.props.height }}>\n                <canvas\n                    width={this.props.width}\n                    height={this.props.height}\n                    ref={this.canvas} />\n            </div>\n        </div>\n    }\n}\n\nexport default Preview\n","import { bind } from 'helpful-decorators'\nimport React, { Component } from 'react'\nimport { FontConfig, generateFont, KerningPair } from '../../../generation/font/Font'\nimport { fontSpecToTextFile } from '../../../generation/font/specSaver'\nimport { downloadBmf } from '../../../generation/font/download'\nimport styles from './step2.module.scss'\nimport Dropzone from '../dropzone/Dropzone'\nimport Fa from '../../misc/fa/Fa'\nimport { NumInputValue, standardizeNumericalInput } from '../../../utils/input'\nimport Step2KerningPairsList from '../step2KerningPairsList/Step2KerningPairsList'\nimport { isElectron } from '../../../electron/electronInterop'\nimport { parseTemplateCode } from '../../../generation/template/parse'\nimport Preview from '../preview/Preview'\nimport { CodePayload } from '../../../generation/template/types'\n\nconst ipcRenderer = !!window.require ? window.require('electron').ipcRenderer : null\n\ninterface Step2State {\n    horizontalMargin: NumInputValue\n    verticalMargin: NumInputValue\n    lineHeight: NumInputValue\n    kerningPairs: KerningPair[]\n    isKerningsValid: boolean\n    template?: File\n    templateCode?: CodePayload\n    templateCodeName?: string\n    templateError?: string\n    templateCodeError?: string\n}\n\nclass Step2 extends Component<{}, Step2State> {\n    constructor(props: {}) {\n        super(props)\n\n        this.state = {\n            horizontalMargin: 0,\n            verticalMargin: 0,\n            lineHeight: 0,\n            kerningPairs: [],\n            isKerningsValid: true\n        }\n    }\n\n    @bind\n    async handleTemplateDropzoneInput(data: File) {\n        if (!this.isTemplateFileValid(data)) {\n            this.setState(prevState => ({\n                ...prevState,\n                templateError: 'Uploaded file isn\\'t a valid template.',\n                template: undefined\n            }))\n            return\n        }\n\n        this.setState(prevState => ({\n            ...prevState,\n            templateError: undefined,\n            templateCodeError: undefined,\n            template: data\n        }))\n    }\n\n    @bind\n    async handleCodeDropzoneInput(data: File) {\n        if (!(await this.isCodeFileValid(data))) {\n            this.setState(prevState => ({\n                ...prevState,\n                templateCodeError: 'Uploaded file isn\\'t valid.',\n                templateCode: undefined\n            }))\n            return\n        }\n\n        const code = parseTemplateCode(await data.text())\n\n        if (!code) {\n            this.setState(prevState => ({\n                ...prevState,\n                templateCodeError: 'Uploaded code isn\\'t valid.',\n                templateCode: undefined\n            }))\n            return\n        }\n\n        this.setState(prevState => ({\n            ...prevState,\n            templateError: undefined,\n            templateCodeError: undefined,\n            templateCode: code,\n            templateCodeName: data.name,\n            lineHeight: code.slots[0]?.[2] ?? 0\n        }))\n    }\n\n    async isCodeFileValid(file?: Blob): Promise<boolean> {\n        return !!file && file.type === 'text/plain'\n    }\n\n    isTemplateFileValid(file?: Blob): boolean {\n        return !!file && file.type === 'image/png'\n    }\n\n    @bind\n    areDropzonesValid(): boolean {\n        return !this.state.templateError\n            && !this.state.templateCodeError\n            && !!this.state.template\n            && !!this.state.templateCode\n            && this.state.isKerningsValid\n    }\n    \n    @bind\n    handleNumericalInput(event: React.ChangeEvent<HTMLInputElement>, name: 'horizontalMargin' | 'verticalMargin' | 'lineHeight') {\n        const value = event.target.value === '' ? '' : parseInt(event.target.value, 10)\n\n        if (value === '' || value >= 0) {\n            this.setState(prevState => ({\n                ...prevState,\n                [name]: value\n            }))\n        }\n    }\n\n    @bind\n    async downloadFont(format: 'txt' | 'xml') {\n        if (!this.state.template || !this.state.templateCode) {\n            return\n        }\n\n        const templateImg = this.state.template\n\n        if (!this.state.templateCode) {\n            console.warn('Cannot generate a font in the current app state.')\n            return\n        }\n\n        const [fontSpec, pages] = await generateFont(templateImg, this.state.templateCode, this.getFontConfig())\n\n        const fntFile = fontSpecToTextFile(fontSpec, format)\n\n        if (isElectron()) {\n            let pagesBufferArray: ArrayBuffer[] = []\n\n            for (let i = 0; i < pages.length; i++) {\n                const buffer = await pages[i].arrayBuffer()\n                pagesBufferArray.push(buffer)\n            }\n\n            ipcRenderer?.send('save-font', fntFile, pagesBufferArray)\n        } else {\n            downloadBmf(fntFile, pages)\n        }\n    }\n\n    getFontConfig(): FontConfig {\n        return {\n            horizontalSpacing: standardizeNumericalInput(this.state.horizontalMargin) ,\n            verticalSpacing: standardizeNumericalInput(this.state.verticalMargin),\n            lineHeight: standardizeNumericalInput(this.state.lineHeight),\n            kernings: this.state.kerningPairs\n        }\n    }\n\n    @bind\n    changeKernings(kernings: KerningPair[]) {\n        this.setState({\n            kerningPairs: kernings\n        })\n    }\n\n    @bind\n    handleKerningsValidity(valid: boolean) {\n        this.setState({\n            isKerningsValid: valid\n        })\n    }\n\n    render() {\n        return(\n            <div className={`${styles.container} ${isElectron() ? styles.desktop : ''}`}>\n                <div>\n                    <div className={`${styles.dropzones} ${isElectron() ? styles.desktop : ''}`}>\n                        <Dropzone\n                            inputName='image'\n                            acceptedInputType='.png'\n                            dataType='image/png'\n                            handleDropzoneInput={this.handleTemplateDropzoneInput}\n                            fileName={this.state.template?.name}\n                            error={this.state.templateError}\n                        />\n\n                        <Dropzone\n                            inputName='code file'\n                            acceptedInputType='.txt'\n                            dataType='text/plain'\n                            handleDropzoneInput={this.handleCodeDropzoneInput}\n                            fileName={this.state.templateCodeName}\n                            error={this.state.templateCodeError}\n                        />\n                    </div>\n\n                    <div className={styles.options}>\n                        <label className={styles.label}>Font options</label>\n                        <div className={styles.option}>\n                            <label className={styles.optionsLabel}>Margin</label>\n                            <input\n                                aria-label='horizontal margin input'\n                                className={styles.optionsInput}\n                                type='number'\n                                onChange={(event) => this.handleNumericalInput(event, 'horizontalMargin')}\n                                value={this.state.horizontalMargin}\n                            />\n                            <Fa icon='fas fa-times' className={styles.times} />\n                            <input\n                                aria-label='vertical margin input'\n                                className={styles.optionsInput}\n                                type='number'\n                                onChange={(event) => this.handleNumericalInput(event, 'verticalMargin')}\n                                value={this.state.verticalMargin}\n                            />\n                            <Fa icon='fas fa-question' className={styles.questionMark} title='Horizontal and vertical distance between characters in pixels'/>\n                        </div>\n                        \n                        <div className={styles.option}>\n                            <label className={styles.optionsLabel}>Line height</label>\n                            <input\n                                aria-label='line height input'\n                                className={styles.optionsInput}\n                                type='number'\n                                onChange={(event) => this.handleNumericalInput(event, 'lineHeight')}\n                                value={this.state.lineHeight}\n                            />\n                            <Fa icon='fas fa-question' className={styles.questionMark} title='Distance from the top of a line to the top of the next one in pixels'/>\n                        </div>\n\n                        <Step2KerningPairsList\n                            templateCode={this.state.templateCode}\n                            changeKernings={this.changeKernings}\n                            handleKerningsValidity={this.handleKerningsValidity}\n                        />\n\n                        <div className={styles.download}>\n                            <label className={styles.buttonsContainerLabel}>\n                                {`${isElectron() ? 'save' : 'download'} font`}\n                            </label>\n\n                            <div className={styles.buttons}>\n                                <div>\n                                    <button onClick={() => this.downloadFont('txt')} className={styles.downloadButton} disabled={!this.areDropzonesValid()} >txt format</button>\n                                    <Fa icon='fas fa-question' className={styles.questionMark} title='Supported by Godot, LibGDX, Heaps.io and possibly others.'/>\n                                </div>\n\n                                <div>\n                                    <button onClick={() => this.downloadFont('xml')} className={styles.downloadButton} disabled={!this.areDropzonesValid()} >xml format</button>\n                                    <Fa icon='fas fa-question' className={styles.questionMark} title='Supported by Phaser, HaxeFlixel and possibly others.'/>\n                                </div>\n                            </div>\n                            \n                            <p className={styles.samplesParagraph}>\n                                Check\n                                <a\n                                    href='https://github.com/Voycawojka/calligro/tree/main/samples'\n                                    className={styles.samplesLink}\n                                    target='_blank'\n                                    rel='noreferrer'\n                                >\n                                    our samples\n                                </a>\n                                to see how to use it\n                            </p>\n                        </div>\n                    </div>\n                </div>\n\n                <div>\n                    <div className={`${styles.previewContainer} ${isElectron() ? styles.desktop : ''}`}>\n                        <Preview\n                            width={400}\n                            height={250}\n                            templateCode={this.state.templateCode}\n                            templateImg={this.state.template}\n                            fontConfig={this.getFontConfig()} />\n                    </div>\n\n                    <div>\n                        <h2 className={styles.heading}>Step 2 - Generate your font</h2>\n                        \n                        <ol className={styles.instructionList}>\n                            <li className={styles.instructionListItem}>Upload the template image with your characters drawn on it and the corresponding txt file (metadata).</li>\n                            <li className={styles.instructionListItem}>Specify font options</li>\n                            <li className={styles.instructionListItem}>\n                                <p>\n                                    Add kerning pairs if you want to. Characters in a pair are rendered further or closer to each other.\n                                    E.g. pair \"ab\" with distance -10 will cause \"b\" to be 10 pixels closer to \"a\". Pair \"ab\" &ne; \"ba\"!\n                                </p>\n                                <p>\n                                    Warning - not all tools support this feature. We know Godot does.\n                                </p>\n                            </li>\n                            <li className={styles.instructionListItem}>Preview changes live at any point.</li>\n                            <li className={styles.instructionListItem}>Generate and download your BMFont.</li>\n                        </ol>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Step2\n"],"sourceRoot":""}