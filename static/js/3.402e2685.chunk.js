(this.webpackJsonpcalligro=this.webpackJsonpcalligro||[]).push([[3],{67:function(t,e,a){t.exports={container:"step2_container__mP1Lb",instructionList:"step2_instructionList__A_Js5",instructionListItem:"step2_instructionListItem__24XyX",heading:"step2_heading__284k2",dropzones:"step2_dropzones__2utFp",options:"step2_options__3tola",label:"step2_label__3qcY3",optionsLabel:"step2_optionsLabel__2tyAP",buttonsContainerLabel:"step2_buttonsContainerLabel__3VAjD",optionsInput:"step2_optionsInput__2ZWmB",times:"step2_times__263gt",questionMark:"step2_questionMark__3yZuf",option:"step2_option__2yRFz",downloadButton:"step2_downloadButton__3smy0",download:"step2_download__1hxQw",buttons:"step2_buttons__1G7PN",samplesParagraph:"step2_samplesParagraph__12U9D",samplesLink:"step2_samplesLink__3X2DM",previewContainer:"step2_previewContainer__M4HZf"}},68:function(t,e,a){t.exports={container:"dropzone_container__3YvRs",containerDragOver:"dropzone_containerDragOver__2HKb-",inputContainer:"dropzone_inputContainer__OD9Y7",label:"dropzone_label__xsqTw",fileName:"dropzone_fileName__CjjRG",error:"dropzone_error__2gMT-",input:"dropzone_input__3YtRE"}},69:function(t,e,a){t.exports={container:"step2KerningPairsList_container__2Re1A",pairsContainer:"step2KerningPairsList_pairsContainer__2Qy3n",pairsKey:"step2KerningPairsList_pairsKey__3OuXe",button:"step2KerningPairsList_button__2e3T4",label:"step2KerningPairsList_label__1YYti",questionMark:"step2KerningPairsList_questionMark__2cusH",input:"step2KerningPairsList_input__1pUjE",inputInvalid:"step2KerningPairsList_inputInvalid__1-_2u",warning:"step2KerningPairsList_warning__l57EV",warningOff:"step2KerningPairsList_warningOff__2InZl"}},70:function(t,e,a){t.exports={previewContainer:"preview_previewContainer__2I4vQ",container:"preview_container__3udyd",controls:"preview_controls__2tjzM",label:"preview_label__NoYDD",previewInput:"preview_previewInput__1jt99",scaleInput:"preview_scaleInput__29AjD",colorInput:"preview_colorInput__hopCs"}},72:function(t,e,a){"use strict";a.r(e);var n=a(40),r=a(27),i=a(6),s=a.n(i),o=a(29),c=a(22),p=a(17),l=a(18),u=a(24),h=a(23),d=a(4),f=a(0),g=a(8),b=a(1),m=a.n(b),j=a(26);function v(t){return new Promise((function(e){var a=URL.createObjectURL(t),r=document.createElement("img");r.onload=function(){var t=Object(j.b)(r.width,r.height),i=Object(n.a)(t,2),s=i[0],o=i[1];o.drawImage(r,0,0),r.remove(),URL.revokeObjectURL(a),e([s,o])},r.src=a}))}function y(t,e){var a=function(t,e){var a={packedRects:[],width:0,height:0},n=0,r=0,i=0,s=0;return a.packedRects=t.sort((function(t,e){return e.h-t.h})).map((function(t){n+t.w>e&&(n=0,r=s),n+t.w>i&&(i=n+t.w),r+t.h>s&&(s=r+t.h);var a={x:n,y:r,sourceRect:t};return n+=t.w,a})),a.width=i,a.height=s,a}(e,t.width),r=a.width,i=a.height,s=a.packedRects,o=Object(j.b)(r,i),c=Object(n.a)(o,2),p=c[0],l=c[1];return s.forEach((function(e){var a=e.x,n=e.y,r=e.sourceRect,i=r.w,s=r.h;l.drawImage(t,r.x,r.y,i,s,a,n,i,s)})),[p,s]}var O=a(43);function x(t,e,a){return w.apply(this,arguments)}function w(){return(w=Object(c.a)(s.a.mark((function t(e,a,r){var i,o,c,p,l,u,h,d,f,g,b,m;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.slots.map((function(t){var e=Object(n.a)(t,3),a=e[0],r=e[1],i=e[2];return{character:String.fromCharCode(a),width:r,height:i}})),o=new O.a(i,a.base),t.next=4,v(e);case 4:return c=t.sent,p=Object(n.a)(c,1),l=p[0],u=i.map((function(t,e){return{slot:t,x:o.getSlotPosition(e+1).x+o.slotDim.w/2-(t.width-2)/2,y:o.getSlotPosition(e+1).y+o.slotDim.h/2-(t.height-2)/2,w:t.width-2,h:t.height-2}})),h=y(l,u),d=Object(n.a)(h,2),f=d[0],g=d[1],t.next=11,Object(j.a)(f);case 11:return b=t.sent,m={info:{face:"calligro-custom",size:12,stretchH:100,aa:1,padding:{up:0,right:0,down:0,left:0},spacing:{horizontal:r.horizontalSpacing,vertical:r.verticalSpacing},outline:0},common:{lineHeight:r.lineHeight,base:a.base,scaleW:l.width,scaleH:l.height,pages:1},pages:[{id:0,file:"calligro-page-0.png"}],chars:g.map((function(t){return{id:t.sourceRect.slot.character.charCodeAt(0),x:t.x,y:t.y,width:t.sourceRect.w,height:t.sourceRect.h,xoffset:0,yoffset:0,xadvance:t.sourceRect.w,page:0,chnl:15}})),kernings:r.kernings},t.abrupt("return",[m,[b]]);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var _=a(34);var C=a(31);function k(t){return function(t){if(Array.isArray(t))return Object(_.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(C.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){var a=e.map((function(t){var e=Object(n.a)(t,2),a=e[0],r=e[1];return"".concat(a,"=").concat(r.toString())})).join(" ");return"".concat(t," ").concat(a)}function I(t,e){var a=e.map((function(t){var e=Object(n.a)(t,2),a=e[0],r=e[1];return"".concat(a,'="').concat(r.toString(),'"')})).join(" ");return"<".concat(t," ").concat(a," />")}function P(t,e){var a="txt"===e?N:I,n=t.info,r=a("info",[["face",n.face],["size",n.size],["unicode","1"],["bold","0"],["italic","0"],["stretchH",n.stretchH],["aa",n.stretchH],["padding","".concat(n.padding.up,",").concat(n.padding.right,",").concat(n.padding.down,",").concat(n.padding.left)],["spacing","".concat(n.spacing.horizontal,",").concat(n.spacing.vertical)]]),i=t.common,s=a("common",[["lineHeight",i.lineHeight],["base",i.base],["scaleW",i.scaleW],["scaleH",i.scaleH],["pages",i.pages]]),o=t.pages.map((function(t){return a("page",[["id",t.id],["file",t.file]])})),c=t.chars.map((function(t){return a("char",[["id",t.id],["x",t.x],["y",t.y],["width",t.width],["height",t.height],["xoffset",t.xoffset],["yoffset",t.yoffset],["xadvance",t.xadvance],["page",t.page],["chnl",t.chnl]])})),p=t.kernings.map((function(t){return a("kerning",[["first",t.first],["second",t.second],["amount",t.amount]])}));switch(e){case"txt":return[r,s].concat(k(o),k(c),k(p)).join("\n");case"xml":return['<?xml version="1.0"?>',"<font>","\t"+[r,s,"<pages>"].concat(k(o.map((function(t){return"\t".concat(t)}))),["</pages>",'<chars count="'.concat(c.length,'">')],k(c.map((function(t){return"\t".concat(t)}))),["</chars>",'<kernings count="'.concat(p.length,'">')],k(p.map((function(t){return"\t".concat(t)}))),["</kernings>"]).join("\n\t"),"</font>"].join("\n")}}var D=a(41);function L(t,e){return z.apply(this,arguments)}function z(){return(z=Object(c.a)(s.a.mark((function t(e,a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[{name:"calligro-font.fnt",input:e}].concat(k(a.map((function(t,e){return{name:"calligro-page-".concat(e,".png"),input:t}})))),t.abrupt("return",Object(D.a)("calligro-font",n));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S,R,K=a(67),E=a.n(K),A=a(68),V=a.n(A),H=(S=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).templateInput=void 0,n.state={dragCounter:0},n.templateInput=m.a.createRef(),n}return Object(l.a)(a,[{key:"handleFileInput",value:function(t){t&&t.type===this.props.dataType&&this.props.handleDropzoneInput(t)}},{key:"handleInput",value:function(){var t,e,a=null===(t=this.templateInput.current)||void 0===t||null===(e=t.files)||void 0===e?void 0:e[0];this.handleFileInput(a)}},{key:"handleDrop",value:function(t){t.preventDefault();var e=t.dataTransfer.files[0];this.handleFileInput(e),this.setState({dragCounter:0})}},{key:"dragOver",value:function(t){t.preventDefault()}},{key:"dragEnter",value:function(t){t.preventDefault(),this.setState((function(t){return{dragCounter:t.dragCounter+1}}))}},{key:"dragLeave",value:function(t){t.preventDefault(),this.setState((function(t){return{dragCounter:t.dragCounter-1}}))}},{key:"render",value:function(){var t=this.props.fileName?Object(f.jsxs)("p",{className:V.a.fileName,children:["Uploaded ",this.props.fileName]}):null,e=this.props.error?Object(f.jsx)("p",{className:V.a.error,children:this.props.error}):null;return Object(f.jsxs)("div",{className:"".concat(V.a.container," ").concat(this.state.dragCounter?V.a.containerDragOver:""),onDrop:this.handleDrop,onDragOver:this.dragOver,onDragEnter:this.dragEnter,onDragLeave:this.dragLeave,children:[Object(f.jsxs)("label",{className:V.a.label,children:["Drag&drop the ",this.props.inputName]}),Object(f.jsx)("div",{className:V.a.inputContainer,children:Object(f.jsx)("input",{"aria-label":"".concat(this.props.inputName," input"),className:V.a.input,type:"file",ref:this.templateInput,onChange:this.handleInput,accept:this.props.acceptedInputType,title:" "})}),t,e]})}}]),a}(b.Component),Object(d.a)(S.prototype,"handleInput",[g.a],Object.getOwnPropertyDescriptor(S.prototype,"handleInput"),S.prototype),Object(d.a)(S.prototype,"handleDrop",[g.a],Object.getOwnPropertyDescriptor(S.prototype,"handleDrop"),S.prototype),Object(d.a)(S.prototype,"dragEnter",[g.a],Object.getOwnPropertyDescriptor(S.prototype,"dragEnter"),S.prototype),Object(d.a)(S.prototype,"dragLeave",[g.a],Object.getOwnPropertyDescriptor(S.prototype,"dragLeave"),S.prototype),S),M=a(7),U=a(16),F=a(69),T=a.n(F);function q(t){return String.fromCharCode(t)}var W=(R=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).pairsContainerRef=void 0,n.state={pairs:[],UICodeCharList:[]},n.pairsContainerRef=m.a.createRef(),n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(t,e){if(t.templateCode!==this.props.templateCode&&(this.setState({pairs:[]}),this.props.templateCode)){var a,n=null===(a=this.props.templateCode)||void 0===a?void 0:a.slots.flatMap((function(t){return t[0]}));n&&this.setState({UICodeCharList:n})}e.pairs!==this.state.pairs&&(this.isAllPairsValid&&this.props.changeKernings(this.state.pairs),this.props.handleKerningsValidity(this.isAllPairsValid))}},{key:"addPair",value:function(){var t=this;this.setState((function(t){return{pairs:[].concat(k(t.pairs),[{amount:1}])}}),(function(){return t.scrollToBottom()}))}},{key:"scrollToBottom",value:function(){this.pairsContainerRef.current&&(this.pairsContainerRef.current.scrollTop=this.pairsContainerRef.current.scrollHeight)}},{key:"deletePair",value:function(t){var e=k(this.state.pairs);e.splice(t,1),this.setState({pairs:e})}},{key:"changeChar",value:function(t,e,a){var n=""===t.target.value?void 0:function(t){return t.charCodeAt(0)}(t.target.value.charAt(0)),r=k(this.state.pairs);r[e][a]=n,this.setState({pairs:r})}},{key:"changeAmount",value:function(t,e){var a=""===t.target.value?void 0:parseInt(t.target.value,10),n=k(this.state.pairs);n[e].amount=a,this.setState({pairs:n})}},{key:"isCharLegal",value:function(t){return void 0!==t&&this.state.UICodeCharList.includes(t)}},{key:"isPairUnrepeated",value:function(t){return this.state.pairs.filter((function(e){return t.first===e.first&&t.second===e.second})).length<2}},{key:"isWorkPairLegal",value:function(t){var e=t.first,a=t.second,n=t.amount,r=this.isCharLegal(e),i=this.isCharLegal(a);return r&&i&&!!n}},{key:"isPairValid",value:function(t){return this.isWorkPairLegal(t)&&this.isPairUnrepeated(t)}},{key:"render",value:function(){var t=this,e=this.state.pairs.map((function(e,a){var n;return Object(f.jsxs)(b.Fragment,{children:[Object(f.jsx)("input",{"aria-label":"first letter input",className:"".concat(T.a.input," ").concat(t.isCharLegal(e.first)&&t.isPairUnrepeated(e)?"":T.a.inputInvalid),value:e.first?q(e.first):"",onChange:function(e){return t.changeChar(e,a,"first")},type:"text"}),Object(f.jsx)("input",{"aria-label":"second letter input",className:"".concat(T.a.input," ").concat(t.isCharLegal(e.second)&&t.isPairUnrepeated(e)?"":T.a.inputInvalid),value:e.second?q(e.second):"",onChange:function(e){return t.changeChar(e,a,"second")},type:"text"}),Object(f.jsx)("input",{"aria-label":"distance input",className:"".concat(T.a.input," ").concat(e.amount?"":T.a.inputInvalid),value:null!==(n=e.amount)&&void 0!==n?n:"",onChange:function(e){return t.changeAmount(e,a)},type:"number"}),Object(f.jsx)("button",{className:T.a.button,onClick:function(){return t.deletePair(a)},title:"Delete kerning pair",children:Object(f.jsx)(M.a,{icon:"fas fa-minus"})})]},a)}));return Object(f.jsxs)("div",{className:T.a.container,children:[Object(f.jsxs)("label",{className:T.a.label,children:["Kerning pairs",Object(f.jsx)(M.a,{icon:"fas fa-question",className:T.a.questionMark,title:"Pairs of characters with non-default distance from each other. Only supported by some engines"})]}),Object(f.jsxs)("div",{className:T.a.pairsContainer,ref:this.pairsContainerRef,children:[Object(f.jsx)("label",{className:T.a.pairsKey,children:"character 1"}),Object(f.jsx)("label",{className:T.a.pairsKey,children:"character 2"}),Object(f.jsxs)("label",{className:T.a.pairsKey,children:["distance",Object(f.jsx)(M.a,{icon:"fas fa-question",className:T.a.questionMark,title:" This value is added to the default character distance when character 2 immediately follows character 1. Can be negative."})]}),Object(f.jsx)("p",{className:T.a.pairsKey,children:Object(f.jsx)("button",{className:T.a.button,onClick:this.addPair,disabled:0===this.state.UICodeCharList.length,title:"Add kerning pair",children:Object(f.jsx)(M.a,{icon:"fas fa-plus"})})}),e]}),Object(f.jsx)("p",{className:"".concat(T.a.warning," ").concat(this.isAnyPairWithLegalCharsRepeated?"":T.a.warningOff),children:"Some pairs are defined multiple times!"})]})}},{key:"isAllPairsValid",get:function(){var t=this;return!this.state.pairs.some((function(e){return!t.isPairValid(e)}))}},{key:"isAnyPairWithLegalCharsRepeated",get:function(){var t=this;return this.state.pairs.some((function(e){return!t.isPairUnrepeated(e)&&t.isCharLegal(e.first)&&t.isCharLegal(e.second)}))}}]),a}(b.Component),Object(d.a)(R.prototype,"addPair",[g.a],Object.getOwnPropertyDescriptor(R.prototype,"addPair"),R.prototype),Object(d.a)(R.prototype,"deletePair",[g.a],Object.getOwnPropertyDescriptor(R.prototype,"deletePair"),R.prototype),Object(d.a)(R.prototype,"changeChar",[g.a],Object.getOwnPropertyDescriptor(R.prototype,"changeChar"),R.prototype),Object(d.a)(R.prototype,"changeAmount",[g.a],Object.getOwnPropertyDescriptor(R.prototype,"changeAmount"),R.prototype),Object(d.a)(R.prototype,"isCharLegal",[g.a],Object.getOwnPropertyDescriptor(R.prototype,"isCharLegal"),R.prototype),Object(d.a)(R.prototype,"isPairValid",[g.a],Object.getOwnPropertyDescriptor(R.prototype,"isPairValid"),R.prototype),R);function B(t){try{var e=decodeURIComponent(escape(atob(t))),a=JSON.parse(e);if(0!==a.version)throw new Error("Only templates version '0' are supported, instead got version '".concat(a.version,"'"));if(!Number.isInteger(a.base))throw new Error("Property 'base' must be an integer, instead got: ".concat(typeof a.base," '").concat(a.base,"'"));if(!Array.isArray(a.slots))throw new Error("Property 'slots' must be an array, instead got: ".concat(a.slots," '").concat(a.slots,"'"));var n=a.slots.find((function(t){return!Array.isArray(t)||3!==t.length||t.find((function(t){return!Number.isInteger(t)}))}));if(n)throw new Error("Each slot must be a three element array (integers only). Instead found: ".concat(JSON.stringify(n)));return a}catch(r){return console.warn("Invalid template code provided: ".concat(r.message)),null}}function G(t){var e=[];return new Promise((function(a){return t.forEach((function(n){var r=new Image;r.onload=function(){e.push(r),e.length===t.length&&a(e)},r.src=URL.createObjectURL(n)}))}))}function Y(t,e,a){var n;if(e<=0||e>=t.length)return 0;var r=t.charCodeAt(e-1),i=t.charCodeAt(e),s=a.kernings.find((function(t){var e=t.first,a=t.second;return e===r&&a===i}));return null!==(n=null===s||void 0===s?void 0:s.amount)&&void 0!==n?n:0}function J(t,e,a,n,r){return X.apply(this,arguments)}function X(){return(X=Object(c.a)(s.a.mark((function t(e,a,n,r,i){var o,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(n);case 2:o=t.sent,c={x:a.info.padding.left,y:a.info.padding.up},i.clearRect(0,0,i.canvas.width,i.canvas.height),i.strokeStyle="black",k(e).forEach((function(t,n){if("\n"===t)return c.x=0,void(c.y+=a.info.spacing.vertical+a.common.lineHeight);var s=a.chars.find((function(e){return e.id===t.charCodeAt(0)})),p=!1;s||(s=a.chars[0],p=!0);var l=p?0:Y(e,n,a),u=o[s.page],h={x:c.x+s.xoffset+l,y:c.y+s.yoffset};if((h.x+s.width)*r>=i.canvas.width&&(c.x=0,c.y+=a.info.spacing.vertical+a.common.lineHeight,h.x=c.x+s.xoffset+l,h.y=c.y+s.yoffset),p){var d=h.x+s.width/4,f=h.y+s.height/4,g=2*s.width/4,b=2*s.height/4;i.strokeRect(d*r,f*r,g*r,b*r)}else i.drawImage(u,s.x,s.y,s.width,s.height,h.x*r,h.y*r,s.width*r,s.height*r);c.x+=s.xadvance+a.info.spacing.horizontal+l}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Z,Q=a(70),$=a.n(Q),tt=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).canvas=void 0,n.state={text:"",scale:1,color:"#ffffff"},n.canvas=m.a.createRef(),n}return Object(l.a)(a,[{key:"draw",value:function(){var t=Object(c.a)(s.a.mark((function t(){var e,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.canvas.current&&this.props.templateImg&&this.props.templateCode)){t.next=6;break}return e=this.canvas.current.getContext("2d"),t.next=4,x(this.props.templateImg,this.props.templateCode,this.props.fontConfig);case 4:a=t.sent,e&&J(this.state.text,a[0],a[1],this.state.scale,e);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.draw()}},{key:"componentDidUpdate",value:function(){this.draw()}},{key:"render",value:function(){var t=this;return Object(f.jsxs)("div",{className:$.a.container,children:[Object(f.jsxs)("div",{className:$.a.controls,children:[Object(f.jsx)("textarea",{"aria-label":"preview text input",onChange:function(e){return t.setState({text:e.target.value})},value:this.state.text,className:$.a.previewInput,placeholder:"Type to preview the font"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{className:$.a.label,children:"Scale"}),Object(f.jsx)("input",{"aria-label":"preview scale input",type:"number",step:.01,min:.01,onChange:function(e){return t.setState({scale:parseFloat(e.target.value)})},value:isNaN(this.state.scale)?"":this.state.scale,className:$.a.scaleInput})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{className:$.a.label,children:"Background"}),Object(f.jsx)("input",{"aria-label":"preview color input",type:"color",className:$.a.colorInput,onChange:function(e){return t.setState({color:e.target.value})},value:this.state.color})]})]}),Object(f.jsx)("div",{className:$.a.previewContainer,style:{backgroundColor:this.state.color,width:this.props.width,maxHeight:this.props.height},children:Object(f.jsx)("canvas",{width:this.props.width,height:this.props.height,ref:this.canvas})})]})}}]),a}(b.Component),et=(Z=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).state={horizontalMargin:0,verticalMargin:0,lineHeight:0,kerningPairs:[],isKerningsValid:!0},n}return Object(l.a)(a,[{key:"handleTemplateDropzoneInput",value:function(){var t=Object(c.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isTemplateFileValid(e)){t.next=3;break}return this.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{templateError:"Uploaded file isn't a valid template.",template:void 0})})),t.abrupt("return");case 3:this.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{templateError:void 0,templateCodeError:void 0,template:e})}));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"handleCodeDropzoneInput",value:function(){var t=Object(c.a)(s.a.mark((function t(e){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isCodeFileValid(e);case 2:if(t.sent){t.next=5;break}return this.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{templateCodeError:"Uploaded file isn't valid.",templateCode:void 0})})),t.abrupt("return");case 5:return t.t0=B,t.next=8,e.text();case 8:if(t.t1=t.sent,a=(0,t.t0)(t.t1)){t.next=13;break}return this.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},{templateCodeError:"Uploaded code isn't valid.",templateCode:void 0})})),t.abrupt("return");case 13:this.setState((function(t){var n,r;return Object(o.a)(Object(o.a)({},t),{},{templateError:void 0,templateCodeError:void 0,templateCode:a,templateCodeName:e.name,lineHeight:null!==(n=null===(r=a.slots[0])||void 0===r?void 0:r[2])&&void 0!==n?n:0})}));case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"isCodeFileValid",value:function(){var t=Object(c.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!!e&&"text/plain"===e.type);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"isTemplateFileValid",value:function(t){return!!t&&"image/png"===t.type}},{key:"areDropzonesValid",value:function(){return!this.state.templateError&&!this.state.templateCodeError&&!!this.state.template&&!!this.state.templateCode&&this.state.isKerningsValid}},{key:"handleNumericalInput",value:function(t,e){var a=""===t.target.value?"":parseInt(t.target.value,10);(""===a||a>=0)&&this.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(r.a)({},e,a))}))}},{key:"downloadFont",value:function(){var t=Object(c.a)(s.a.mark((function t(e){var a,r,i,o,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.template&&this.state.templateCode){t.next=2;break}return t.abrupt("return");case 2:if(a=this.state.template,this.state.templateCode){t.next=6;break}return console.warn("Cannot generate a font in the current app state."),t.abrupt("return");case 6:return t.next=8,x(a,this.state.templateCode,this.getFontConfig());case 8:r=t.sent,i=Object(n.a)(r,2),o=i[0],c=i[1],L(P(o,e),c);case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getFontConfig",value:function(){return{horizontalSpacing:Object(U.a)(this.state.horizontalMargin),verticalSpacing:Object(U.a)(this.state.verticalMargin),lineHeight:Object(U.a)(this.state.lineHeight),kernings:this.state.kerningPairs}}},{key:"changeKernings",value:function(t){this.setState({kerningPairs:t})}},{key:"handleKerningsValidity",value:function(t){this.setState({isKerningsValid:t})}},{key:"render",value:function(){var t,e=this;return Object(f.jsxs)("div",{className:E.a.container,children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:E.a.dropzones,children:[Object(f.jsx)(H,{inputName:"image",acceptedInputType:".png",dataType:"image/png",handleDropzoneInput:this.handleTemplateDropzoneInput,fileName:null===(t=this.state.template)||void 0===t?void 0:t.name,error:this.state.templateError}),Object(f.jsx)(H,{inputName:"code file",acceptedInputType:".txt",dataType:"text/plain",handleDropzoneInput:this.handleCodeDropzoneInput,fileName:this.state.templateCodeName,error:this.state.templateCodeError})]}),Object(f.jsxs)("div",{className:E.a.options,children:[Object(f.jsx)("label",{className:E.a.label,children:"Font options"}),Object(f.jsxs)("div",{className:E.a.option,children:[Object(f.jsx)("label",{className:E.a.optionsLabel,children:"Margin"}),Object(f.jsx)("input",{"aria-label":"horizontal margin input",className:E.a.optionsInput,type:"number",onChange:function(t){return e.handleNumericalInput(t,"horizontalMargin")},value:this.state.horizontalMargin}),Object(f.jsx)(M.a,{icon:"fas fa-times",className:E.a.times}),Object(f.jsx)("input",{"aria-label":"vertical margin input",className:E.a.optionsInput,type:"number",onChange:function(t){return e.handleNumericalInput(t,"verticalMargin")},value:this.state.verticalMargin}),Object(f.jsx)(M.a,{icon:"fas fa-question",className:E.a.questionMark,title:"Horizontal and vertical distance between characters in pixels"})]}),Object(f.jsxs)("div",{className:E.a.option,children:[Object(f.jsx)("label",{className:E.a.optionsLabel,children:"Line height"}),Object(f.jsx)("input",{"aria-label":"line height input",className:E.a.optionsInput,type:"number",onChange:function(t){return e.handleNumericalInput(t,"lineHeight")},value:this.state.lineHeight}),Object(f.jsx)(M.a,{icon:"fas fa-question",className:E.a.questionMark,title:"Distance from the top of a line to the top of the next one in pixels"})]}),Object(f.jsx)(W,{templateCode:this.state.templateCode,changeKernings:this.changeKernings,handleKerningsValidity:this.handleKerningsValidity}),Object(f.jsxs)("div",{className:E.a.download,children:[Object(f.jsx)("label",{className:E.a.buttonsContainerLabel,children:"Download font"}),Object(f.jsxs)("div",{className:E.a.buttons,children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){return e.downloadFont("txt")},className:E.a.downloadButton,disabled:!this.areDropzonesValid(),children:"txt format"}),Object(f.jsx)(M.a,{icon:"fas fa-question",className:E.a.questionMark,title:"Supported by Godot, LibGDX, Heaps.io and possibly others."})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){return e.downloadFont("xml")},className:E.a.downloadButton,disabled:!this.areDropzonesValid(),children:"xml format"}),Object(f.jsx)(M.a,{icon:"fas fa-question",className:E.a.questionMark,title:"Supported by Phaser, HaxeFlixel and possibly others."})]})]}),Object(f.jsxs)("p",{className:E.a.samplesParagraph,children:["Check",Object(f.jsx)("a",{href:"https://github.com/Voycawojka/calligro/tree/main/samples",className:E.a.samplesLink,target:"_blank",rel:"noreferrer",children:"our samples"}),"to see how to use it"]})]})]})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:E.a.previewContainer,children:Object(f.jsx)(tt,{width:400,height:250,templateCode:this.state.templateCode,templateImg:this.state.template,fontConfig:this.getFontConfig()})}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{className:E.a.heading,children:"Step 2 - Generate your font"}),Object(f.jsxs)("ol",{className:E.a.instructionList,children:[Object(f.jsx)("li",{className:E.a.instructionListItem,children:"Upload the template image with your characters drawn on it and the corresponding txt file (metadata)."}),Object(f.jsx)("li",{className:E.a.instructionListItem,children:"Specify font options"}),Object(f.jsxs)("li",{className:E.a.instructionListItem,children:[Object(f.jsx)("p",{children:'Add kerning pairs if you want to. Characters in a pair are rendered further or closer to each other. E.g. pair "ab" with distance -10 will cause "b" to be 10 pixels closer to "a". Pair "ab" \u2260 "ba"!'}),Object(f.jsx)("p",{children:"Warning - not all tools support this feature. We know Godot does."})]}),Object(f.jsx)("li",{className:E.a.instructionListItem,children:"Preview changes live at any point."}),Object(f.jsx)("li",{className:E.a.instructionListItem,children:"Generate and download your BMFont."})]})]})]})]})}}]),a}(b.Component),Object(d.a)(Z.prototype,"handleTemplateDropzoneInput",[g.a],Object.getOwnPropertyDescriptor(Z.prototype,"handleTemplateDropzoneInput"),Z.prototype),Object(d.a)(Z.prototype,"handleCodeDropzoneInput",[g.a],Object.getOwnPropertyDescriptor(Z.prototype,"handleCodeDropzoneInput"),Z.prototype),Object(d.a)(Z.prototype,"areDropzonesValid",[g.a],Object.getOwnPropertyDescriptor(Z.prototype,"areDropzonesValid"),Z.prototype),Object(d.a)(Z.prototype,"handleNumericalInput",[g.a],Object.getOwnPropertyDescriptor(Z.prototype,"handleNumericalInput"),Z.prototype),Object(d.a)(Z.prototype,"downloadFont",[g.a],Object.getOwnPropertyDescriptor(Z.prototype,"downloadFont"),Z.prototype),Object(d.a)(Z.prototype,"changeKernings",[g.a],Object.getOwnPropertyDescriptor(Z.prototype,"changeKernings"),Z.prototype),Object(d.a)(Z.prototype,"handleKerningsValidity",[g.a],Object.getOwnPropertyDescriptor(Z.prototype,"handleKerningsValidity"),Z.prototype),Z);e.default=et}}]);
//# sourceMappingURL=3.402e2685.chunk.js.map