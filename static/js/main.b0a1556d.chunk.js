(this.webpackJsonpcalligro=this.webpackJsonpcalligro||[]).push([[0],[,,function(e,t,a){e.exports={container:"step1_container__2R46B",desktop:"step1_desktop___07r7",parameters:"step1_parameters__2fhbG",commonParameters:"step1_commonParameters__12krB",perCharacterParameters:"step1_perCharacterParameters__187q6",charactersLabelContainer:"step1_charactersLabelContainer__2_zeq",charactersResetButton:"step1_charactersResetButton__1rVxQ",charactersTextArea:"step1_charactersTextArea__1129O",instructionList:"step1_instructionList__1yq3Z",instructionListItem:"step1_instructionListItem__3ndrZ",label:"step1_label__dvXqU",charactersLabel:"step1_charactersLabel__8FH79",commonLabel:"step1_commonLabel__1XEMl",commonInput:"step1_commonInput__2xGXE",commonInputIvalid:"step1_commonInputIvalid__1M86R",heading:"step1_heading__3AIsF",paragraph:"step1_paragraph__26hYp",formButton:"step1_formButton__4K7wD",smallFormButton:"step1_smallFormButton__1ISq8",times:"step1_times__2BpAi",questionMark:"step1_questionMark__1F_q0",inputQuestionMark:"step1_inputQuestionMark__3myVX",commonContainer:"step1_commonContainer__3oXIY",link:"step1_link__1D4An",presetSelect:"step1_presetSelect__1bvRj",prefillSelect:"step1_prefillSelect__7JYX3",inputContainer:"step1_inputContainer__22h8D",desktopWidget:"step1_desktopWidget__2bAE1",mobileWidget:"step1_mobileWidget__3Pp_A"}},,,,,,,,function(e,t,a){"use strict";a(1);var n=a(0);t.a=function(e){var t,a=null!==(t=e.className)&&void 0!==t?t:"";return Object(n.jsx)("i",{className:"".concat(e.icon," ").concat(a),title:e.title})}},,,function(e,t,a){"use strict";function n(){return navigator.userAgent.toLowerCase().indexOf(" electron/")>-1}a.d(t,"a",(function(){return n}))},,,,,function(e,t,a){e.exports={container:"step1CharacterList_container__2suRc",desktop:"step1CharacterList_desktop__1pQ2g",character:"step1CharacterList_character__3-MFM",input:"step1CharacterList_input__1t3rR",inputInvalid:"step1CharacterList_inputInvalid__3-Gel",times:"step1CharacterList_times__37cyf",undoButton:"step1CharacterList_undoButton__2AK0J",characterContainer:"step1CharacterList_characterContainer__2Rpww",button:"step1CharacterList_button__1WKc4",buttonContainer:"step1CharacterList_buttonContainer__1qLZa"}},,,function(e,t,a){e.exports={container:"navbar_container__2mYrz",linkBig:"navbar_linkBig__1CiWe",linkSmall:"navbar_linkSmall__3U_dr",navLink:"navbar_navLink__lYMlZ",navLinkLeft:"navbar_navLinkLeft__2tD8-",navLinkRight:"navbar_navLinkRight__1FQnp",navLinkActive:"navbar_navLinkActive__1z4La"}},function(e,t,a){e.exports={container:"cookieNotice_container__2ekSC",heading:"cookieNotice_heading__vUvKO",image:"cookieNotice_image__2wJ3y",content:"cookieNotice_content__3HqBN",list:"cookieNotice_list__1hg4D",listItem:"cookieNotice_listItem__3GkmT",link:"cookieNotice_link__38Uhh",details:"cookieNotice_details__1BKmu",linkContainer:"cookieNotice_linkContainer__18P_C"}},function(e,t,a){"use strict";function n(e){return""===e?0:e}a.d(t,"a",(function(){return n}))},,function(e,t,a){e.exports={container:"updater_container__3h_sW",content:"updater_content__1iY35",contentBold:"updater_contentBold__rjAct",link:"updater_link__2x13t",descriptionParagraph:"updater_descriptionParagraph__LHRKO"}},function(e,t,a){e.exports={container:"aboutPopup_container__q80Qs",authorsContainer:"aboutPopup_authorsContainer__3z2Ll",link:"aboutPopup_link__THdwT",version:"aboutPopup_version__3fVGa",disclaimer:"aboutPopup_disclaimer__3bvNg",paragraph:"aboutPopup_paragraph__3huAY"}},function(e,t,a){e.exports={container:"header_container__3iV9Y",sourceNoticeContainer:"header_sourceNoticeContainer__3debw",sourceNoticeLine1:"header_sourceNoticeLine1__2dpGN",sourceNoticeLine2:"header_sourceNoticeLine2__1SD3C",logo:"header_logo__1NKnM",heading:"header_heading__3P59A",githubCorner:"header_githubCorner__i9m_i"}},function(e,t,a){e.exports={container:"footer_container__2qBcC",policy:"footer_policy__w7rxg",link:"footer_link__gQPPx",authors:"footer_authors__1Pupk",linkContainer:"footer_linkContainer__3kxeW"}},,,,function(e,t,a){e.exports={container:"author_container__Qvl5M",socialLink:"author_socialLink__1xWOs",name:"author_name__uFPT4",socialContainer:"author_socialContainer__3Ftd3",icon:"author_icon__1sPpI"}},,,,,function(e,t,a){e.exports={container:"popup_container__3Xpyi",title:"popup_title__HV9m6",closeButton:"popup_closeButton__1N_N-",times:"popup_times__3iVWR"}},function(e,t,a){"use strict";var n=a(13),r=a(54),i=a(0);t.a=function(e){return Object(n.a)()?null:Object(i.jsx)(r.a,{children:Object(i.jsx)("title",{children:e.title})})}},,,,function(e,t,a){"use strict";function n(e,t,a){var n=document.createElement("canvas");n.width=e,n.height=t,n.style.width="".concat(e,"px"),n.style.height="".concat(t,"px"),n.style.imageRendering="crisp-edges";var r=n.getContext("2d");if(!r)throw new Error("Your browser doesn't support 2d canvas context. Use a modern browser, please.");return r.imageSmoothingEnabled=!1,a&&(r.fillStyle=a,r.fillRect(0,0,n.width,n.height)),[n,r]}function r(e){return new Promise((function(t,a){e.toBlob((function(e){return e?t(e):a()}),"image/png",1)}))}a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}))},,,function(e,t,a){e.exports={policyContainer:"policy_policyContainer__2V2gt",menuLink:"policy_menuLink__2gWKV"}},,function(e,t,a){e.exports={container:"loader_container__uCYfU",icon:"loader_icon__1ZW5k"}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(8),r=a(3),i=a.n(r),o=a(60);function c(e,t){var a=document.createElement("a");a.href=URL.createObjectURL(t),a.download=e,a.click(),URL.revokeObjectURL(a.href),a.remove()}function s(e,t){return l.apply(this,arguments)}function l(){return(l=Object(n.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(o.a)(a),e.next=3,n.blob();case 3:r=e.sent,c("".concat(t,".zip"),r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,a){"use strict";function n(e){try{var t=decodeURIComponent(escape(atob(e))),a=JSON.parse(t);if(2!==a.version)throw new Error("Only templates version '2' are supported, instead got version '".concat(a.version,"'"));if("string"!==typeof a.presetName)throw new Error("Property 'presetName' must be a string, instead got: ".concat(typeof a.presetName," '").concat(a.presetName,"'"));if(!Number.isInteger(a.base))throw new Error("Property 'base' must be an integer, instead got: ".concat(typeof a.base," '").concat(a.base,"'"));if(!Array.isArray(a.slots))throw new Error("Property 'slots' must be an array, instead got: ".concat(a.slots," '").concat(a.slots,"'"));var n=a.slots.find((function(e){return!Array.isArray(e)||3!==e.length||e.find((function(e){return!Number.isInteger(e)}))}));if(n)throw new Error("Each slot must be a three element array (integers only). Instead found: ".concat(JSON.stringify(n)));return a}catch(r){return console.warn("Invalid template code provided: ".concat(r.message)),null}}a.d(t,"a",(function(){return n}))},function(e,t,a){"use strict";function n(e){return e.charCodeAt(0)}function r(e){return String.fromCharCode(e)}a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(8),r=a(29),i=a(11),o=a(12),c=a(3),s=a.n(c),l=a(42),u=function(){function e(t,a,n,r,o){Object(i.a)(this,e),this.spaceX=t,this.spaceY=a,this.spaceW=n,this.ctx=o,this.imageData=void 0,this.imageData=o.createImageData(n,r)}return Object(o.a)(e,[{key:"getColorIndices",value:function(e,t){var a=Math.ceil(t)*(4*Math.ceil(this.spaceW))+4*Math.ceil(e);return{r:a,g:a+1,b:a+2,a:a+3}}},{key:"hexToRgb",value:function(e){var t=parseInt(e.substring(1),16);return{r:t>>16&255,g:t>>8&255,b:255&t}}},{key:"setPixel",value:function(e,t,a){var n=this.hexToRgb(a),r=this.getColorIndices(e,t);return this.imageData.data[r.r]=n.r,this.imageData.data[r.g]=n.g,this.imageData.data[r.b]=n.b,this.imageData.data[r.a]=255,this}},{key:"clearPixel",value:function(e,t){var a=this.getColorIndices(e,t);return this.imageData.data[a.r]=0,this.imageData.data[a.g]=0,this.imageData.data[a.b]=0,this.imageData.data[a.a]=0,this}},{key:"flush",value:function(){this.ctx.putImageData(this.imageData,this.spaceX,this.spaceY)}},{key:"strokeHorizontalLine",value:function(e,t,a,n){for(var r=0;r<a;r++)this.setPixel(e+r,t,n);return this}},{key:"strokeVerticalLine",value:function(e,t,a,n){for(var r=0;r<a;r++)this.setPixel(e,t+r,n);return this}},{key:"strokeRect",value:function(e,t,a,n,r){return this.strokeHorizontalLine(e,t,a,r).strokeHorizontalLine(e,t+n-1,a,r).strokeVerticalLine(e,t,n,r).strokeVerticalLine(e+a-1,t,n,r)}},{key:"fillRect",value:function(e,t,a,n,r){for(var i=0;i<a;i++)this.strokeVerticalLine(e+i,t,n,r);return this}},{key:"clearRect",value:function(e,t,a,n){for(var r=0;r<a;r++)for(var i=0;i<n;i++)this.clearPixel(r+e,i+t);return this}}]),e}();function h(e,t,a){var n=a.enclosingSpaceX,r=a.enclosingSpaceY,i=a.enclosingSpaceW,o=a.enclosingSpaceH,c=a.base,s=a.vertMargin,l=i/2-t.width/2,h=o/2-t.height/2;if(new u(n,r,i,o,e).fillRect(0,0,i+1,o+1,"#f2f2f2").strokeRect(0,0,i+1,o+1,"#202020").strokeHorizontalLine(0,h+c,i,"#ffd76c").clearRect(l,h,t.width,t.height).strokeRect(l,h,t.width,t.height,"#ffd76c").flush(),a.font){var p=r+o/2-t.height/2;e.fillStyle=a.font.fillColor,e.strokeStyle=a.font.outlineColor,e.font="".concat(.9*c,"px ").concat(a.font.name),e.textAlign="center",e.textBaseline="alphabetic",e.fillText(t.character,n+i/2,p+c,i),e.strokeText(t.character,n+i/2,p+c,i)}e.fillStyle="#202020",e.font="".concat(.8*s,"px serif"),e.textAlign="center",e.fillText(t.character,n+i/2,r+o-s/4,i)}function p(e,t,a,n,r){return d.apply(this,arguments)}function d(){return(d=Object(n.a)(s.a.mark((function e(t,a,n,r,i){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var o=new Image;o.onload=function(){var c=Math.min(r,i);t.imageSmoothingEnabled=!0,t.drawImage(o,a,n,c,c),t.imageSmoothingEnabled=!1,e()},o.src="/logo192.png"}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(){function e(t,a,n,o){Object(i.a)(this,e),this.slots=t,this.base=a,this.presetName=n,this.fontOptions=o,this.canvas=void 0,this.ctx=void 0,this.cachedBlob=null,this.cachedCode=null,this.w=void 0,this.h=void 0,this.enclosingDim=void 0,this.w=Math.ceil(Math.sqrt(this.slots.length+1)),this.h=Math.ceil(Math.sqrt(this.slots.length+1)),this.enclosingDim=this.calcEnclosingDim(this.slots);var c=Object(l.b)(this.w*this.enclosingDim.w,this.h*this.enclosingDim.h,"#202020"),s=Object(r.a)(c,2);this.canvas=s[0],this.ctx=s[1]}return Object(o.a)(e,[{key:"calcEnclosingDim",value:function(e){var t=Math.max.apply(null,e.map((function(e){return e.width}))),a=Math.max.apply(null,e.map((function(e){return e.height}))),n=Math.round(1.3*t),r=Math.max(Math.round(1.3*a),30);return{w:n,h:r,hMargin:Math.ceil((r-a)/2)}}},{key:"getSlotPosition",value:function(e){return{x:e%this.w*this.enclosingDim.w,y:Math.floor(e/this.w)*this.enclosingDim.h}}},{key:"generateImageBlob",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.cachedBlob){e.next=7;break}return e.next=3,p(this.ctx,0,0,this.enclosingDim.w,this.enclosingDim.h);case 3:return this.slots.forEach((function(e,a){var n=t.getSlotPosition(a+1),r=n.x,i=n.y;h(t.ctx,e,{enclosingSpaceX:r,enclosingSpaceY:i,enclosingSpaceW:t.enclosingDim.w,enclosingSpaceH:t.enclosingDim.h,base:t.base,vertMargin:t.enclosingDim.hMargin,font:t.fontOptions})})),e.next=6,Object(l.a)(this.canvas);case 6:this.cachedBlob=e.sent;case 7:return e.abrupt("return",this.cachedBlob);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"generateTemplateCode",value:function(){if(!this.cachedCode){var e={version:2,slots:this.slots.map((function(e){return[e.character.charCodeAt(0),e.width,e.height]})),base:this.base,presetName:this.presetName};this.cachedCode=btoa(unescape(encodeURIComponent(JSON.stringify(e))))}return this.cachedCode}},{key:"readmeContent",get:function(){return"\n        1) Open template.png in a graphics editor of your choice.\n        2) Draw characters inside the yellow boundaries. Horizontal lines between them determine the letter base.\n        2) Upload template.png and template.calligro back to Calligro (step 2: font)\n        3) Generate your font\n\n        More info at https://calligro.ideasalmanac.com\n        ".trim()}},{key:"copyOnto",value:function(){var e=Object(n.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.generateImageBlob();case 2:t.drawImage(this.canvas,0,0);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(52),o=a.n(i),c=(a(65),a(8)),s=a(35),l=a(24),u=a(41),h=a(29),p=a(11),d=a(12),b=a(19),m=a(20),j=a(5),f=a(3),v=a.n(f),g=a(6),O=a(10),y=a(18),x=a.n(y),_=a(23),k=a(13),w=a(0);var C=function(e){var t=e.charSet.map((function(t){var a,n,r=null!==(a=t.width)&&void 0!==a?a:e.defaultWidth,i=null!==(n=t.height)&&void 0!==n?n:e.defaultHeight;return Object(w.jsxs)("div",{className:x.a.characterContainer,children:[Object(w.jsx)("p",{className:x.a.character,children:t.character}),Object(w.jsx)("input",{"aria-label":"".concat(t.character," width input"),className:"".concat(x.a.input," ").concat(Object(_.a)(r)<=0?x.a.inputInvalid:""),type:"number",value:r,onChange:function(a){return e.handleDimensionChange(a,"width",t)}}),Object(w.jsx)(O.a,{icon:"fas fa-times",className:x.a.times}),Object(w.jsx)("input",{"aria-label":"".concat(t.character," height input"),className:"".concat(x.a.input," ").concat(Object(_.a)(i)<=0?x.a.inputInvalid:""),type:"number",value:i,onChange:function(a){return e.handleDimensionChange(a,"height",t)}}),t.height||t.width||Object(_.a)(r)<=0||Object(_.a)(i)<=0?Object(w.jsx)("span",{className:x.a.buttonContainer,children:Object(w.jsx)("button",{onClick:function(){return e.resetCharacterDimensions(t)},className:x.a.button,children:Object(w.jsx)(O.a,{icon:"fas fa-undo",className:x.a.undoButton})})}):null]},t.character)}));return Object(w.jsx)("div",{className:"".concat(x.a.container," ").concat(Object(k.a)()?x.a.desktop:""),children:t})},N=a(51),S=a(48);function L(e){return D.apply(this,arguments)}function D(){return(D=Object(c.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.generateImageBlob();case 2:return e.t0=e.sent,e.t1={name:"template.png",input:e.t0},e.t2={name:"template.calligro",input:t.generateTemplateCode()},e.t3={name:"readme.txt",input:t.readmeContent},a=[e.t1,e.t2,e.t3],e.abrupt("return",Object(S.a)("calligro-template",a));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=a(2),I=a.n(P),B=a(15);function M(e){return Object(k.a)()?null:e.div?Object(w.jsx)("div",{children:e.children}):Object(w.jsx)(w.Fragment,{children:e.children})}var A=a(49),V=a(50);function T(e){return Object(k.a)()?e.div?Object(w.jsx)("div",{children:e.children}):Object(w.jsx)(w.Fragment,{children:e.children}):null}var F=window.require?window.require("electron").shell:null;var R=function(e){if(Object(k.a)()){return Object(w.jsx)("a",Object(l.a)(Object(l.a)({},e),{},{onClick:function(t){e.href&&(t.preventDefault(),null===F||void 0===F||F.openExternal(e.href))},children:e.children}))}return Object(w.jsx)("a",Object(l.a)(Object(l.a)({},e),{},{children:e.children}))},q=a(38),W=a(40);function H(){return E.apply(this,arguments)}function E(){return(E=Object(c.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,0)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U,G=window.require?window.require("electron").ipcRenderer:null,z=["American Typewriter","Andale Mono","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Avenir","Avenir Next","Avenir Next Condensed","Bahnschrift","Baskerville","Big Caslon","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bradley Hand","Brush Script MT","Calibri","Cambria","Cambria Math","Candara","Chalkboard","Chalkboard SE","Chalkduster","Charter","Cochin","Comic Sans MS","Consolas","Constantia","Copperplate","Corbel","Courier","Courier New","DIN Alternate","DIN Condensed","Didot","Ebrima","Franklin Gothic Medium","Futura","Gabriola","Gadugi","Geneva","Georgia","Gill Sans","Helvetica","Helvetica Neue","Herculanum","Hoefler Text","HoloLens MDL2 Assets","Impact","Ink Free","Javanese Text","Leelawadee UI","Lucida Console","Lucida Grande","Lucida Sans Unicode","Luminari","MS Gothic","MV Boli","Malgun Gothic","Marker Felt","Marlett","Menlo","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft YaHei","Microsoft Yi Baiti","MingLiU-ExtB","Monaco","Mongolian Baiti","Myanmar Text","Nirmala UI","Noteworthy","Optima","Palatino","Palatino Linotype","Papyrus","Phosphate","Rockwell","Savoye LET","Segoe MDL2 Assets","Segoe Print","Segoe Script","Segoe UI","Segoe UI Emoji","Segoe UI Historic","Segoe UI Symbol","SignPainter","SimSun","Sitka","Skia","Snell Roundhand","Sylfaen","Symbol","Tahoma","Times","Times New Roman","Trattatello","Trebuchet MS","Verdana","Webdings","Wingdings","Yu Gothic","Zapfino"];function Y(){return(Y=Object(c.a)(v.a.mark((function e(){var t,a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,document.fonts.ready;case 2:t=[],a=Object(W.a)(z),e.prev=4,a.s();case 6:if((n=a.n()).done){e.next=13;break}return r=n.value,document.fonts.check('12px "'.concat(r,'"'))&&t.push(r),e.next=11,H();case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,null,[[4,15,18,21]])})))).apply(this,arguments)}function J(){return Object(k.a)()?new Promise((function(e){null===G||void 0===G||G.once("fonts",(function(t,a){return e(a.fonts)})),null===G||void 0===G||G.send("request-fonts")})):function(){return Y.apply(this,arguments)}()}var X=window.require?window.require("electron").ipcRenderer:null,K=(U=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).unicodeRanges=void 0,r.systemFonts=void 0,r.unicodeRanges=function(){var e=a(68);return e.splice(-2,2),e.sort((function(e,t){return e.category.localeCompare(t.category,"en")})),e}(),r.systemFonts=[],r.state=r.setInitialState(),J().then((function(e){r.systemFonts=e,r.setState({loadedSystemFonts:!0})})),r}return Object(d.a)(n,[{key:"setInitialState",value:function(){var e,t,a,n,r,i,o,c=window.localStorage.getItem("settings"),s=c?JSON.parse(c):null,l=null!==(e=null===s||void 0===s?void 0:s.selectedPreset)&&void 0!==e?e:"Basic Latin",u=null!==(t=null===s||void 0===s?void 0:s.charSet)&&void 0!==t?t:this.createCharSetFromPreset(l),h=null!==(a=null===s||void 0===s?void 0:s.charString)&&void 0!==a?a:u.map((function(e){return e.character})).join(""),p=null!==(n=null===s||void 0===s?void 0:s.fontOptions)&&void 0!==n?n:null;return{selectedPreset:l,charSet:u,defaultWidth:null!==(r=null===s||void 0===s?void 0:s.defaultWidth)&&void 0!==r?r:150,defaultHeight:null!==(i=null===s||void 0===s?void 0:s.defaultHeight)&&void 0!==i?i:200,base:null!==(o=null===s||void 0===s?void 0:s.base)&&void 0!==o?o:150,presetInputValue:l,charString:h,fontOptions:p,loadedSystemFonts:!1}}},{key:"componentDidUpdate",value:function(e,t){t!==this.state&&window.localStorage.setItem("settings",JSON.stringify(this.state))}},{key:"componentDidMount",value:function(){null===X||void 0===X||X.on("load-template",this.loadTemplateListener)}},{key:"componentWillUnmount",value:function(){null===X||void 0===X||X.removeListener("load-template",this.loadTemplateListener)}},{key:"loadTemplateListener",value:function(e,t){var a=Object(A.a)(t);a&&this.setState({base:a.base,charSet:a.slots.map((function(e){var t=Object(h.a)(e,3),a=t[0],n=t[1],r=t[2];return{character:Object(V.b)(a),width:n,height:r}})),selectedPreset:a.presetName,presetInputValue:a.presetName})}},{key:"handleCharSetInput",value:function(e){var t=this;e.preventDefault();var a=e.target.value,n=a.split("").filter((function(e){return""!==e.trim()})),r=Object(u.a)(new Set(n)).map((function(e){var a;return null!==(a=t.state.charSet.find((function(t){return t.character===e})))&&void 0!==a?a:{character:e}}));this.setState({charString:a,charSet:r,selectedPreset:"custom",presetInputValue:"custom"})}},{key:"removeDuplicatesFromCharString",value:function(){var e=Object(u.a)(new Set(this.state.charString.split(""))).join("");this.setState({charString:e})}},{key:"isCharStringValid",value:function(){var e=this.state.charString.split("");return new Set(e).size===e.length}},{key:"createCharSetFromPreset",value:function(e){var t=this.unicodeRanges.find((function(t){return t.category===e}));if(t){for(var a=[],n=t.range[0];n<t.range[1]+1;n++)a.push({character:String.fromCharCode(n)});return a}return[]}},{key:"slotArray",get:function(){var e=this;return this.state.charSet.map((function(t){var a,n;return{character:t.character,width:Object(_.a)(null!==(a=t.width)&&void 0!==a?a:e.state.defaultWidth),height:Object(_.a)(null!==(n=t.height)&&void 0!==n?n:e.state.defaultHeight)}}))}},{key:"isSlotArrayValid",value:function(){return this.slotArray.every((function(e){return e.height>0&&e.width>0}))}},{key:"isBaseValid",value:function(){var e=Object(_.a)(this.state.base);return e<=Object(_.a)(this.state.defaultHeight)&&e>=0}},{key:"handleDefaultValueChange",value:function(e,t){var a=""===e.target.value?"":parseInt(e.target.value,10);this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},t,a))}))}},{key:"handleDimensionChange",value:function(e,t,a){var n=""===e.target.value?"":parseInt(e.target.value,10),r=this.state.charSet.map((function(e){return e===a?Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},t,n)):e}));this.setState({charSet:r})}},{key:"resetCharacterDimensions",value:function(e){var t=this.state.charSet.map((function(t){return e===t?{character:t.character}:t}));this.setState({charSet:t})}},{key:"downloadTemplate",value:function(){var e=Object(c.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new N.a(this.slotArray,Object(_.a)(this.state.base),this.state.selectedPreset,this.state.fontOptions),!Object(k.a)()){e.next=11;break}return e.next=4,t.generateImageBlob();case 4:return a=e.sent,e.next=7,a.arrayBuffer();case 7:n=e.sent,null===X||void 0===X||X.send("save-template",n,t.generateTemplateCode(),t.readmeContent),e.next=12;break;case 11:L(t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changePreset",value:function(e){var t=this.unicodeRanges.some((function(t){return t.category===e.target.value}));if(this.setState({presetInputValue:e.target.value}),t){var a=this.createCharSetFromPreset(e.target.value),n=a.map((function(e){return e.character})).join("");this.setState({selectedPreset:e.target.value,charSet:a,charString:n},(function(){return e.target.blur()}))}}},{key:"changePrefill",value:function(e){""===e.target.value?this.setState({fontOptions:null}):this.setState({fontOptions:{name:e.target.value,fillColor:"black",outlineColor:""}})}},{key:"presetSelectBlur",value:function(e){e.target.value=this.state.selectedPreset}},{key:"render",value:function(){var e,t=this,a=function(){var e=t.unicodeRanges.filter((function(e){return e.category.toLowerCase().includes(t.state.presetInputValue.toLowerCase())})).slice(0,10).map((function(e){return Object(w.jsx)("option",{value:e.category,children:e.category},e.category)})),a=Object(w.jsx)("option",{value:"Basic Latin",children:"Default"}),n="presets-datalist";return Object(w.jsxs)("div",{className:I.a.inputContainer,children:[Object(w.jsx)(O.a,{icon:"fas fa-question",className:"".concat(I.a.questionMark," ").concat(I.a.inputQuestionMark),title:"Search any unicode preset like Arabic, Cyrillic, or Hiragana"}),Object(w.jsx)("input",{list:n,"aria-label":"unicode presets selection input",onChange:t.changePreset,value:t.state.presetInputValue,className:I.a.presetSelect,onBlur:t.presetSelectBlur}),Object(w.jsxs)("datalist",{id:n,children:[a,e]})]})}(),n=Object(w.jsx)("option",{value:"",children:"none"},"none"),r=this.state.loadedSystemFonts?this.systemFonts.map((function(e){return Object(w.jsx)("option",{value:e,children:e},e)})):[];return Object(w.jsxs)("div",{className:"".concat(I.a.container," ").concat(Object(k.a)()?I.a.desktop:""),children:[Object(w.jsx)(q.a,{title:"Template Generation | Calligro"}),Object(w.jsxs)("div",{children:[Object(w.jsxs)(M,{div:!0,children:[Object(w.jsxs)("h2",{className:I.a.heading,children:["Generate bitmap fonts in the ",Object(w.jsx)(R,{href:"https://www.angelcode.com/products/bmfont/doc/file_format.html",className:I.a.link,children:"BMFont"})," format."]}),Object(w.jsx)("p",{className:I.a.paragraph,children:"Calligro lets you generate custom fonts from images created in graphics software like Gimp, Photoshop, Aseprite and others."}),Object(w.jsxs)("p",{className:I.a.paragraph,children:["This tool can also be used to convert a trutype font into a BMFont (with the prefill option) but if you\u2019re looking specifically for that try tools like the original"," ",Object(w.jsx)(R,{href:"https://www.angelcode.com/products/bmfont/",className:I.a.link,children:"BMFont"})," ","or"," ",Object(w.jsx)(R,{href:"https://libgdx.com/wiki/tools/hiero",className:I.a.link,children:"Hiero"})," ","instead."]})]}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:I.a.charactersLabelContainer,children:[Object(w.jsxs)("label",{className:"".concat(I.a.label," ").concat(I.a.charactersLabel),children:["Characters",Object(w.jsx)(O.a,{icon:"fas fa-question",className:I.a.questionMark,title:"Characters you want to be included in the final font (symbols made from multiple unicode characters won't work, e.g. more complex emojis)"})]}),a]}),Object(w.jsx)("textarea",{"aria-label":"characters input",className:I.a.charactersTextArea,onChange:function(e){return t.setState({charString:e.target.value})},onBlur:this.handleCharSetInput,value:this.state.charString}),Object(w.jsx)("button",{onClick:this.removeDuplicatesFromCharString,className:I.a.smallFormButton,disabled:this.isCharStringValid(),children:"Remove duplicates"})]}),Object(w.jsxs)("div",{className:I.a.parameters,children:[Object(w.jsxs)("div",{className:I.a.commonParameters,children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{className:I.a.label,children:"Common"}),Object(w.jsx)("label",{className:I.a.commonLabel,children:"Size"}),Object(w.jsx)("input",{"aria-label":"default width input",className:I.a.commonInput,type:"number",onChange:function(e){return t.handleDefaultValueChange(e,"defaultWidth")},value:this.state.defaultWidth}),Object(w.jsx)(O.a,{icon:"fas fa-times",className:I.a.times}),Object(w.jsx)("input",{"aria-label":"default height input",className:I.a.commonInput,type:"number",onChange:function(e){return t.handleDefaultValueChange(e,"defaultHeight")},value:this.state.defaultHeight}),Object(w.jsx)(O.a,{icon:"fas fa-question",className:I.a.questionMark,title:"Default size of one character in pixels"})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{className:I.a.commonLabel,children:"Base"}),Object(w.jsx)("input",{"aria-label":"characters base input",className:"".concat(I.a.commonInput," ").concat(this.isBaseValid()?"":I.a.commonInputIvalid),type:"number",onChange:function(e){return t.handleDefaultValueChange(e,"base")},value:this.state.base}),Object(w.jsx)(O.a,{icon:"fas fa-question",className:I.a.questionMark,title:'Distance from the top of the letter to the line base in pixels (character parts below this will stick out like in "g" or "j")'})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{className:I.a.commonLabel,children:"Prefill"}),Object(w.jsx)("input",{list:"prefill-datalist","aria-label":"unicode presets selection input",onChange:this.changePrefill,value:null===(e=this.state.fontOptions)||void 0===e?void 0:e.name,className:I.a.prefillSelect}),Object(w.jsxs)("datalist",{id:"prefill-datalist",children:[n,r]}),Object(w.jsx)(O.a,{icon:"fas fa-question",className:I.a.questionMark,title:"Vector font to prefill the template with. Leave empty to not prefill."})]}),Object(w.jsx)("button",{onClick:this.downloadTemplate,className:I.a.formButton,disabled:!this.isSlotArrayValid()||!this.isBaseValid(),children:"".concat(Object(k.a)()?"save":"download"," template")})]}),Object(w.jsxs)("div",{className:I.a.perCharacterParameters,children:[Object(w.jsxs)("label",{className:I.a.label,children:["Per character",Object(w.jsx)(O.a,{icon:"fas fa-question",className:I.a.questionMark,title:"Override default size per character"})]}),Object(w.jsx)(C,{charSet:this.state.charSet,defaultHeight:this.state.defaultHeight,defaultWidth:this.state.defaultWidth,handleDimensionChange:this.handleDimensionChange,resetCharacterDimensions:this.resetCharacterDimensions})]})]})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{className:I.a.heading,children:"Step 1 - Create a template"}),Object(w.jsxs)("ol",{className:I.a.instructionList,children:[Object(w.jsx)("li",{className:I.a.instructionListItem,children:"Specify what characters you want included in the final font. "}),Object(w.jsx)("li",{className:I.a.instructionListItem,children:"Choose the character size and base."}),Object(w.jsx)("li",{className:I.a.instructionListItem,children:"Optionally choose a font to prefill the template with. Doesn't work well with low resolution templates."}),Object(w.jsx)("li",{className:I.a.instructionListItem,children:"Optionally override the size per character if you want some to be smaller or bigger than the rest."}),Object(w.jsx)("li",{className:I.a.instructionListItem,children:"Download the generated template. It\u2019s a zip archive containing three files: .png, .calligro and a readme. Open the png in your graphics editor of choice and draw characters inside the yellow boundaries."}),Object(w.jsxs)("li",{className:I.a.instructionListItem,children:["Go to"," ",Object(w.jsx)(M,{children:Object(w.jsx)(B.b,{to:"/step2",className:I.a.link,children:"Step 2"})}),Object(w.jsx)(T,{children:"'Fonts -> Generate a font'"})," ","to upload the template and generate your font."]})]}),Object(w.jsxs)(M,{div:!0,children:[Object(w.jsx)("h2",{className:I.a.heading,children:"We have an offline version too"}),Object(w.jsx)("p",{className:I.a.paragraph,children:"The desktop version is also free and has the same features but is just a little bit more convenient to use ;)"}),Object(w.jsx)("div",{className:I.a.desktopWidget,children:Object(w.jsx)("iframe",{title:"Itch.io desktop widget",frameBorder:"0",src:"https://itch.io/embed/946259",width:"552",height:"167",children:Object(w.jsx)("a",{href:"https://voycawojka.itch.io/calligro",children:"Calligro by Voycawojka"})})}),Object(w.jsx)("div",{className:I.a.mobileWidget,children:Object(w.jsx)("iframe",{title:"Itch.io mobile widget",frameBorder:"0",src:"https://itch.io/embed/946259",width:"208",height:"167",children:Object(w.jsx)("a",{href:"https://voycawojka.itch.io/calligro",children:"Calligro by Voycawojka"})})})]})]})]})}}]),n}(n.Component),Object(j.a)(U.prototype,"loadTemplateListener",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"loadTemplateListener"),U.prototype),Object(j.a)(U.prototype,"handleCharSetInput",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"handleCharSetInput"),U.prototype),Object(j.a)(U.prototype,"removeDuplicatesFromCharString",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"removeDuplicatesFromCharString"),U.prototype),Object(j.a)(U.prototype,"isCharStringValid",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"isCharStringValid"),U.prototype),Object(j.a)(U.prototype,"createCharSetFromPreset",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"createCharSetFromPreset"),U.prototype),Object(j.a)(U.prototype,"isSlotArrayValid",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"isSlotArrayValid"),U.prototype),Object(j.a)(U.prototype,"isBaseValid",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"isBaseValid"),U.prototype),Object(j.a)(U.prototype,"handleDefaultValueChange",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"handleDefaultValueChange"),U.prototype),Object(j.a)(U.prototype,"handleDimensionChange",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"handleDimensionChange"),U.prototype),Object(j.a)(U.prototype,"resetCharacterDimensions",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"resetCharacterDimensions"),U.prototype),Object(j.a)(U.prototype,"downloadTemplate",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"downloadTemplate"),U.prototype),Object(j.a)(U.prototype,"changePreset",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"changePreset"),U.prototype),Object(j.a)(U.prototype,"changePrefill",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"changePrefill"),U.prototype),Object(j.a)(U.prototype,"presetSelectBlur",[g.a],Object.getOwnPropertyDescriptor(U.prototype,"presetSelectBlur"),U.prototype),U),Q=K,Z=a(7),$=a(21),ee=a.n($);var te=function(){return Object(w.jsxs)("nav",{className:ee.a.container,children:[Object(w.jsxs)(B.c,{exact:!0,to:"/app/template",className:"".concat(ee.a.navLink," ").concat(ee.a.navLinkLeft),activeClassName:ee.a.navLinkActive,children:[Object(w.jsx)("p",{className:ee.a.linkBig,children:"Step 1"}),Object(w.jsx)("p",{className:ee.a.linkSmall,children:"create a template"})]}),Object(w.jsxs)(B.c,{to:"/app/font",className:"".concat(ee.a.navLink," ").concat(ee.a.navLinkRight),activeClassName:ee.a.navLinkActive,children:[Object(w.jsx)("p",{className:ee.a.linkBig,children:"Step 2"}),Object(w.jsx)("p",{className:ee.a.linkSmall,children:"generate your font"})]})]})},ae=a(27),ne=a.n(ae),re=a(59),ie=a.n(re);var oe=function(){return Object(w.jsxs)("header",{className:ne.a.container,children:[Object(w.jsx)("h1",{className:ne.a.heading,children:Object(w.jsx)("img",{src:"logo.svg",alt:"Calligro",height:"80",width:"158",className:ne.a.logo})}),Object(w.jsx)(te,{}),Object(w.jsxs)("div",{className:ne.a.sourceNoticeContainer,children:[Object(w.jsx)("p",{className:ne.a.sourceNoticeLine1,children:"We're open source!"}),Object(w.jsx)("p",{className:ne.a.sourceNoticeLine2,children:"Feel free to contribute :D"})]}),Object(w.jsx)(ie.a,{className:ne.a.githubCorner,href:"https://github.com/Voycawojka/calligro",size:"110",bannerColor:"#707070",octoColor:"#202020"})]})},ce=a(32),se=a.n(ce);var le=function(e){var t=e.socialLinks.map((function(e){return Object(w.jsx)(R,{className:se.a.socialLink,href:e.url,"aria-label":e.label,children:Object(w.jsx)(O.a,{icon:e.icon,className:se.a.icon})},e.url)}));return Object(w.jsxs)("div",{className:se.a.container,children:[Object(w.jsx)("h3",{className:se.a.name,children:e.name}),Object(w.jsx)("div",{className:se.a.socialContainer,children:t})]})};var ue=function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(le,{name:"Filip A. Kowalski",socialLinks:[{url:"https://ideasalmanac.com",icon:"fa fa-globe-africa",label:"ideasalmanac"},{url:"https://twitter.com/IdeasAlmanac",icon:"fab fa-twitter",label:"twitter"},{url:"https://github.com/Voycawojka",icon:"fab fa-github",label:"github"}]}),Object(w.jsx)(le,{name:"Dominik J\xf3zefiak",socialLinks:[{url:"https://github.com/domlj",icon:"fab fa-github",label:"github"}]})]})},he=a(28),pe=a.n(he);var de=function(){return Object(w.jsxs)("footer",{className:pe.a.container,children:[Object(w.jsx)(B.b,{to:"/policy",className:"".concat(pe.a.policy," ").concat(pe.a.link),children:"Privacy policy"}),Object(w.jsx)("div",{className:pe.a.authors,children:Object(w.jsx)(ue,{})}),Object(w.jsxs)("div",{className:pe.a.linkContainer,children:[Object(w.jsx)(R,{href:"https://github.com/Voycawojka/calligro/issues",className:pe.a.link,children:"Found a bug?"}),Object(w.jsx)(R,{href:"https://github.com/Voycawojka/calligro/issues",className:pe.a.link,children:"Have a feature request?"})]})]})},be=a(45),me=a.n(be);var je,fe,ve=function(){return Object(w.jsxs)("div",{className:me.a.policyContainer,children:[Object(w.jsx)(q.a,{title:"Privacy Policy | Calligro"}),Object(w.jsx)("h1",{children:"Calligro Privacy Policy"}),Object(w.jsx)("p",{children:"Calligro is an open source tool served on a static web server (Github Pages). We don't ask for nor collect any personal data. All information provided (and all files uploaded) by the user stay inside the user's browser."}),Object(w.jsx)("h2",{children:"Cookies and local storage"}),Object(w.jsx)("p",{children:"We use cookies and local storage (small files and pieces of data stored on the user's device) for two pursposes:"}),Object(w.jsxs)("ul",{children:[Object(w.jsx)("li",{children:"user's convenience (e.g. to rememeber last chosen settings),"}),Object(w.jsx)("li",{children:"analytics (more in the Analytics section below)"})]}),Object(w.jsx)("p",{children:"Browsers allow users to view, remove or even entirely block cookies. Check your browser's manual to access those options."}),Object(w.jsx)("h2",{children:"Analytics"}),Object(w.jsx)("p",{children:"We use Google Analytics for analytics purposes. Therefore, all analytics data is stored on Google's servers."}),Object(w.jsx)("p",{children:"By default, we don't allow Google Analytics to use analytics or ad related tracking cookies. If you consent by clicking Accept on our cookie popup, we use analytics related cookies for better insight. We don't use ad related cookies regardless of consent."}),Object(w.jsx)("h2",{children:"About this policy"}),Object(w.jsx)("p",{children:"Please note we can change this privacy policy without notice."}),Object(w.jsx)(B.b,{to:"/",className:me.a.menuLink,children:"Back to Calligro"})]})},ge=a(46),Oe=a.n(ge),ye=a(22),xe=a.n(ye),_e=(je=function(e){Object(b.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={acknowledged:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({acknowledged:"true"===Oe.a.get("cookies-acknowledged")},this.updateAnalytics)}},{key:"handleExit",value:function(){Oe.a.set("cookies-acknowledged","true",{expires:1e3}),this.setState({acknowledged:!0},this.updateAnalytics)}},{key:"updateAnalytics",value:function(){var e=this.state.acknowledged?"granted":"denied";window.gtag("consent","update",{analytics_storage:e})}},{key:"render",value:function(){return this.state.acknowledged?null:Object(w.jsxs)("div",{className:xe.a.container,children:[Object(w.jsx)("h2",{className:xe.a.heading,children:"We use cookies"}),Object(w.jsxs)("div",{className:xe.a.content,children:[Object(w.jsx)("img",{className:xe.a.image,src:"cookie.svg",alt:"cookie",height:"203",width:"183"}),Object(w.jsxs)("div",{className:xe.a.details,children:[Object(w.jsxs)("ul",{className:xe.a.list,children:[Object(w.jsx)("li",{className:xe.a.listItem,children:"for your convienience"}),Object(w.jsx)("li",{className:xe.a.listItem,children:"for analytics"})]}),Object(w.jsxs)("div",{className:xe.a.linkContainer,children:[Object(w.jsx)(B.b,{to:"/policy",className:xe.a.link,children:"Learn more"}),Object(w.jsx)("button",{onClick:this.handleExit,className:xe.a.link,children:"Accept"})]})]})]})]})}}]),a}(n.Component),Object(j.a)(je.prototype,"handleExit",[g.a],Object.getOwnPropertyDescriptor(je.prototype,"handleExit"),je.prototype),Object(j.a)(je.prototype,"updateAnalytics",[g.a],Object.getOwnPropertyDescriptor(je.prototype,"updateAnalytics"),je.prototype),je),ke=a(47),we=a.n(ke),Ce=function(e){Object(b.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).timer=void 0,n.state={isLoaderOn:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.timer=setTimeout((function(){e.setState({isLoaderOn:!0})}),300)}},{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"render",value:function(){return this.state.isLoaderOn?Object(w.jsx)("div",{className:we.a.container,children:Object(w.jsx)(O.a,{icon:"fas fa-cog fa-spin",className:we.a.icon})}):null}}]),a}(n.Component),Ne=window.require?window.require("electron").ipcRenderer:null,Se=(fe=function(e){Object(b.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={url:"/"},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){null===Ne||void 0===Ne||Ne.on("navigation",this.navigationListener)}},{key:"componentWillUnmount",value:function(){null===Ne||void 0===Ne||Ne.removeListener("navigation",this.navigationListener)}},{key:"navigationListener",value:function(e,t){this.setState({url:t})}},{key:"render",value:function(){return Object(w.jsx)(Z.a,{to:this.state.url})}}]),a}(n.Component),Object(j.a)(fe.prototype,"navigationListener",[g.a],Object.getOwnPropertyDescriptor(fe.prototype,"navigationListener"),fe.prototype),fe);function Le(e,t){var a=e.split(".").map((function(e){return Number.parseInt(e)})),n=Object(h.a)(a,3),r=n[0],i=n[1],o=n[2],c=t.split(".").map((function(e){return Number.parseInt(e)})),s=Object(h.a)(c,3),l=s[0],u=s[1],p=s[2],d=De(r,l);if("equal"!==d)return d;var b=De(i,u);return"equal"!==b?b:De(o,p)}function De(e,t){return e>t?"greater":e<t?"lesser":"equal"}function Pe(e){return fetch("https://itch.io/api/1/x/wharf/latest?target=voycawojka/calligro&channel_name=".concat(e)).then((function(e){return e.json()})).then((function(e){if(e.errors)throw new Error("Cannot fetch latest version information [".concat(e.errors.join(", "),"]"));return e}))}function Ie(e){var t="greater"===Le(e,"0.2.0")?"v".concat(e):"v.".concat(e);return fetch("https://api.github.com/repos/voycawojka/calligro/releases/tags/".concat(t)).then((function(e){return e.json()}))}function Be(e,t){return Me.apply(this,arguments)}function Me(){return(Me=Object(c.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe(a);case 3:if(n=e.sent,"lesser"===Le(t,n.latest)){e.next=6;break}return e.abrupt("return",{type:"up_to_date"});case 6:return e.next=8,Ie(n.latest);case 8:return r=e.sent,e.abrupt("return",{type:"new_available",name:r.name,body:r.body,version:n.latest});case 12:return e.prev=12,e.t0=e.catch(0),console.error("Error while checking for a newer version",e.t0),e.abrupt("return",{type:"up_to_date"});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var Ae=a(37),Ve=a.n(Ae);var Te,Fe,Re=function(e){return Object(w.jsxs)("div",{className:Ve.a.container,children:[Object(w.jsx)("p",{className:Ve.a.title,children:e.title}),Object(w.jsx)("button",{className:Ve.a.closeButton,onClick:e.closeHandler,children:Object(w.jsx)(O.a,{icon:"fas fa-times",className:Ve.a.times})}),Object(w.jsx)("div",{children:e.children})]})},qe=a(25),We=a.n(qe),He=window.require?window.require("electron").ipcRenderer:null,Ee=(Te=function(e){Object(b.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){null===He||void 0===He||He.on("version",this.versionListener),null===He||void 0===He||He.send("request-version")}},{key:"componentWillUnmount",value:function(){null===He||void 0===He||He.removeListener("version",this.versionListener)}},{key:"versionListener",value:function(){var e=Object(c.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,"linux"===a.platform&&(n="linux"),"win32"===a.platform&&(n="win-64"),!n){e.next=8;break}return e.next=6,Be(a.version,n);case 6:"new_available"===(r=e.sent).type&&this.setState({newVersionName:r.name,newVersionDescription:r.body,newVersionCount:r.version,currentVersion:a.version});case 8:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.setState({newVersionName:void 0})}},{key:"render",value:function(){if(this.state.newVersionName){var e,t=null===(e=this.state.newVersionDescription)||void 0===e?void 0:e.split("\n").map((function(e,t){return Object(w.jsx)("p",{className:We.a.descriptionParagraph,children:e},t)}));return Object(w.jsx)(Re,{title:"New version available",closeHandler:this.close,children:Object(w.jsxs)("div",{className:We.a.container,children:[Object(w.jsxs)("div",{className:We.a.content,children:["Version",Object(w.jsxs)("span",{className:We.a.contentBold,children:[" ",this.state.newVersionCount," "]}),"available (your version: ",Object(w.jsx)("span",{className:We.a.contentBold,children:this.state.currentVersion}),")"]}),Object(w.jsxs)("div",{className:We.a.content,children:["Name:",Object(w.jsxs)("span",{className:We.a.contentBold,children:[" ",this.state.newVersionName]})]}),Object(w.jsx)(R,{className:We.a.link,href:"https://voycawojka.itch.io/calligro",children:"Download from itch.io"}),Object(w.jsx)("div",{className:We.a.content,children:"Changelog:"}),Object(w.jsx)("div",{children:t})]})})}return null}}]),a}(n.Component),Object(j.a)(Te.prototype,"versionListener",[g.a],Object.getOwnPropertyDescriptor(Te.prototype,"versionListener"),Te.prototype),Object(j.a)(Te.prototype,"close",[g.a],Object.getOwnPropertyDescriptor(Te.prototype,"close"),Te.prototype),Te),Ue=a(26),Ge=a.n(Ue),ze=window.require?window.require("electron").ipcRenderer:null,Ye=(Fe=function(e){Object(b.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={active:!1,version:""},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;null===ze||void 0===ze||ze.on("about-popup",(function(t,a){e.setState({active:!0,version:a})}))}},{key:"componentWillUnmount",value:function(){null===ze||void 0===ze||ze.removeListener("about-popup",(function(){}))}},{key:"closeWindow",value:function(){this.setState({active:!1})}},{key:"render",value:function(){return this.state.active?Object(w.jsx)(Re,{title:"About",closeHandler:this.closeWindow,children:Object(w.jsxs)("div",{className:Ge.a.container,children:[Object(w.jsxs)("div",{className:Ge.a.disclaimer,children:[Object(w.jsx)("p",{className:Ge.a.paragraph,children:"Calligro lets you generate custom fonts from images created in graphics software like Gimp, Photoshop, Aseprite and others."}),Object(w.jsxs)("p",{className:Ge.a.paragraph,children:["This tool can also be used to convert a trutype font into a BMFont (with the prefill option) but if you\u2019re looking specifically for that try tools like the original"," ",Object(w.jsx)(R,{href:"https://www.angelcode.com/products/bmfont/",className:Ge.a.link,children:"BMFont"})," ","or"," ",Object(w.jsx)(R,{href:"https://libgdx.com/wiki/tools/hiero",className:Ge.a.link,children:"Hiero"})," ","instead."]})]}),Object(w.jsxs)("div",{className:Ge.a.version,children:["Version: ",this.state.version]}),Object(w.jsx)("div",{className:Ge.a.authorsContainer,children:Object(w.jsx)(ue,{})})]})}):null}}]),a}(n.Component),Object(j.a)(Fe.prototype,"closeWindow",[g.a],Object.getOwnPropertyDescriptor(Fe.prototype,"closeWindow"),Fe.prototype),Fe),Je=r.a.lazy((function(){return a.e(3).then(a.bind(null,88))}));var Xe=function(){return Object(w.jsx)(B.a,{children:Object(w.jsxs)(Z.d,{children:[Object(w.jsx)(Z.b,{path:"/policy",children:Object(w.jsx)(ve,{})}),Object(w.jsxs)(Z.b,{children:[Object(w.jsx)(M,{children:Object(w.jsx)(oe,{})}),Object(w.jsx)(Z.b,{exact:!0,path:"/",children:Object(w.jsx)(Z.a,{to:"/app/template"})}),Object(w.jsx)(Z.b,{exact:!0,path:"/app",children:Object(w.jsx)(Z.a,{to:"/app/template"})}),Object(w.jsx)(Z.b,{exact:!0,path:"/app/template",children:Object(w.jsx)(n.Suspense,{fallback:Object(w.jsx)(Ce,{}),children:Object(w.jsx)(Q,{})})}),Object(w.jsx)(Z.b,{exact:!0,path:"/app/font",children:Object(w.jsx)(n.Suspense,{fallback:Object(w.jsx)(Ce,{}),children:Object(w.jsx)(Je,{})})}),Object(w.jsxs)(M,{children:[Object(w.jsx)(de,{}),Object(w.jsx)(_e,{})]}),Object(w.jsxs)(T,{children:[Object(w.jsx)(Se,{}),Object(w.jsx)(Ee,{}),Object(w.jsx)(Ye,{})]})]})]})})},Ke=function(e){e&&e instanceof Function&&a.e(4).then(a.bind(null,87)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),i(e),o(e)}))};o.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(Xe,{})}),document.getElementById("root")),Ke()}],[[82,1,2]]]);
//# sourceMappingURL=main.b0a1556d.chunk.js.map