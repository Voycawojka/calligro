(this.webpackJsonpcalligro=this.webpackJsonpcalligro||[]).push([[3],{83:function(e,t,a){e.exports={container:"step2_container__mP1Lb",desktop:"step2_desktop__2F80Z",instructionList:"step2_instructionList__A_Js5",instructionListItem:"step2_instructionListItem__24XyX",heading:"step2_heading__284k2",dropzones:"step2_dropzones__2utFp",options:"step2_options__3tola",label:"step2_label__3qcY3",optionsLabel:"step2_optionsLabel__2tyAP",buttonsContainerLabel:"step2_buttonsContainerLabel__3VAjD",optionsInput:"step2_optionsInput__2ZWmB",times:"step2_times__263gt",questionMark:"step2_questionMark__3yZuf",option:"step2_option__2yRFz",formButton:"step2_formButton__1NFQq",download:"step2_download__1hxQw",buttons:"step2_buttons__1G7PN",samplesParagraph:"step2_samplesParagraph__12U9D",samplesLink:"step2_samplesLink__3X2DM",previewContainer:"step2_previewContainer__M4HZf"}},84:function(e,t,a){e.exports={container:"dropzone_container__3YvRs",containerDragOver:"dropzone_containerDragOver__2HKb-",inputContainer:"dropzone_inputContainer__OD9Y7",label:"dropzone_label__xsqTw",fileName:"dropzone_fileName__CjjRG",error:"dropzone_error__2gMT-",input:"dropzone_input__3YtRE"}},85:function(e,t,a){e.exports={container:"step2KerningPairsList_container__2Re1A",pairsContainer:"step2KerningPairsList_pairsContainer__2Qy3n",pairsKey:"step2KerningPairsList_pairsKey__3OuXe",button:"step2KerningPairsList_button__2e3T4",label:"step2KerningPairsList_label__1YYti",questionMark:"step2KerningPairsList_questionMark__2cusH",input:"step2KerningPairsList_input__1pUjE",inputInvalid:"step2KerningPairsList_inputInvalid__1-_2u",warning:"step2KerningPairsList_warning__l57EV",warningOff:"step2KerningPairsList_warningOff__2InZl"}},86:function(e,t,a){e.exports={previewContainer:"fontPreview_previewContainer__3f5kC",container:"fontPreview_container__2c9m2",controls:"fontPreview_controls__2e1CJ",label:"fontPreview_label__1d7EU",previewInput:"fontPreview_previewInput__VY5-O",scaleInput:"fontPreview_scaleInput__1m6rL",colorInput:"fontPreview_colorInput__V_kQ1"}},88:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a(35),i=a(24),s=a(8),o=a(11),c=a(12),l=a(19),p=a(20),u=a(5),h=a(3),d=a.n(h),f=a(6),b=a(1),g=a.n(b),j=a(42);function m(e){return new Promise((function(t){var a=URL.createObjectURL(e),r=document.createElement("img");r.onload=function(){var e=Object(j.b)(r.width,r.height),i=Object(n.a)(e,2),s=i[0],o=i[1];o.drawImage(r,0,0),r.remove(),URL.revokeObjectURL(a),t([s,o])},r.src=a}))}function v(e,t){var a=function(e,t){var a={packedRects:[],width:0,height:0},n=0,r=0,i=0,s=0;return a.packedRects=e.sort((function(e,t){return t.h-e.h})).map((function(e){n+e.w>t&&(n=0,r=s),n+e.w>i&&(i=n+e.w),r+e.h>s&&(s=r+e.h);var a={x:n,y:r,sourceRect:e};return n+=e.w,a})),a.width=i,a.height=s,a}(t,e.width),r=a.width,i=a.height,s=a.packedRects,o=Object(j.b)(r,i),c=Object(n.a)(o,2),l=c[0],p=c[1];return s.forEach((function(t){var a=t.x,n=t.y,r=t.sourceRect,i=r.w,s=r.h;p.drawImage(e,r.x,r.y,i,s,a,n,i,s)})),[l,s]}var O=a(51);function y(e,t,a){return x.apply(this,arguments)}function x(){return(x=Object(s.a)(d.a.mark((function e(t,a,r){var i,s,o,c,l,p,u,h,f,b,g,y;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.slots.map((function(e){var t=Object(n.a)(e,3),a=t[0],r=t[1],i=t[2];return{character:String.fromCharCode(a),width:r,height:i}})),s=new O.a(i,a.base,a.presetName,null),e.next=4,m(t);case 4:return o=e.sent,c=Object(n.a)(o,1),l=c[0],p=i.map((function(e,t){return{slot:e,x:s.getSlotPosition(t+1).x+s.enclosingDim.w/2-(e.width-2)/2,y:s.getSlotPosition(t+1).y+s.enclosingDim.h/2-(e.height-2)/2,w:e.width-2,h:e.height-2}})),u=v(l,p),h=Object(n.a)(u,2),f=h[0],b=h[1],e.next=11,Object(j.a)(f);case 11:return g=e.sent,y={info:{face:"calligro-custom",size:12,stretchH:100,aa:1,padding:{up:0,right:0,down:0,left:0},spacing:{horizontal:r.horizontalSpacing,vertical:r.verticalSpacing},outline:0},common:{lineHeight:r.lineHeight,base:a.base,scaleW:l.width,scaleH:l.height,pages:1},pages:[{id:0,file:"calligro-page-0.png"}],chars:b.map((function(e){return{id:e.sourceRect.slot.character.charCodeAt(0),x:e.x,y:e.y,width:e.sourceRect.w,height:e.sourceRect.h,xoffset:0,yoffset:0,xadvance:e.sourceRect.w,page:0,chnl:15}})),kernings:r.kernings},e.abrupt("return",[y,[g]]);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=a(41);function _(e,t){var a=t.map((function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r.toString())})).join(" ");return"".concat(e," ").concat(a)}function C(e,t){var a=t.map((function(e){var t=Object(n.a)(e,2),a=t[0],r=t[1];return"".concat(a,'="').concat(r.toString(),'"')})).join(" ");return"<".concat(e," ").concat(a," />")}function k(e,t){var a="txt"===t?_:C,n=e.info,r=a("info",[["face",n.face],["size",n.size],["unicode","1"],["bold","0"],["italic","0"],["stretchH",n.stretchH],["aa",n.stretchH],["padding","".concat(n.padding.up,",").concat(n.padding.right,",").concat(n.padding.down,",").concat(n.padding.left)],["spacing","".concat(n.spacing.horizontal,",").concat(n.spacing.vertical)]]),i=e.common,s=a("common",[["lineHeight",i.lineHeight],["base",i.base],["scaleW",i.scaleW],["scaleH",i.scaleH],["pages",i.pages]]),o=e.pages.map((function(e){return a("page",[["id",e.id],["file",e.file]])})),c=e.chars.map((function(e){return a("char",[["id",e.id],["x",e.x],["y",e.y],["width",e.width],["height",e.height],["xoffset",e.xoffset],["yoffset",e.yoffset],["xadvance",e.xadvance],["page",e.page],["chnl",e.chnl]])})),l=e.kernings.map((function(e){return a("kerning",[["first",e.first],["second",e.second],["amount",e.amount]])}));switch(t){case"txt":return[r,s].concat(Object(w.a)(o),Object(w.a)(c),Object(w.a)(l)).join("\n");case"xml":var p=[r,s,"<pages>"].concat(Object(w.a)(o.map((function(e){return"\t".concat(e)}))),["</pages>",'<chars count="'.concat(c.length,'">')],Object(w.a)(c.map((function(e){return"\t".concat(e)}))),["</chars>",'<kernings count="'.concat(l.length,'">')],Object(w.a)(l.map((function(e){return"\t".concat(e)}))),["</kernings>"]).join("\n\t");return['<?xml version="1.0"?>',"<font>","\t"+p,"</font>"].join("\n")}}var N=a(48);function P(e,t){return I.apply(this,arguments)}function I(){return(I=Object(s.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[{name:"calligro-font.fnt",input:t}].concat(Object(w.a)(a.map((function(e,t){return{name:"calligro-page-".concat(t,".png"),input:e}})))),e.abrupt("return",Object(N.a)("calligro-font",n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L,D,z=a(83),R=a.n(z),S=a(84),K=a.n(S),V=a(0),H=(L=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).templateInput=void 0,n.state={dragCounter:0},n.templateInput=g.a.createRef(),n}return Object(c.a)(a,[{key:"handleFileInput",value:function(e){e&&e.type===this.props.dataType&&this.props.handleDropzoneInput(e)}},{key:"handleInput",value:function(){var e,t,a=null===(e=this.templateInput.current)||void 0===e||null===(t=e.files)||void 0===t?void 0:t[0];this.handleFileInput(a)}},{key:"handleDrop",value:function(e){e.preventDefault();var t=e.dataTransfer.files[0];this.handleFileInput(t),this.setState({dragCounter:0})}},{key:"dragOver",value:function(e){e.preventDefault()}},{key:"dragEnter",value:function(e){e.preventDefault(),this.setState((function(e){return{dragCounter:e.dragCounter+1}}))}},{key:"dragLeave",value:function(e){e.preventDefault(),this.setState((function(e){return{dragCounter:e.dragCounter-1}}))}},{key:"render",value:function(){var e=this.props.fileName?Object(V.jsxs)("p",{className:K.a.fileName,children:["Uploaded ",this.props.fileName]}):null,t=this.props.error?Object(V.jsx)("p",{className:K.a.error,children:this.props.error}):null;return Object(V.jsxs)("div",{className:"".concat(K.a.container," ").concat(this.state.dragCounter?K.a.containerDragOver:""),onDrop:this.handleDrop,onDragOver:this.dragOver,onDragEnter:this.dragEnter,onDragLeave:this.dragLeave,children:[Object(V.jsxs)("label",{className:K.a.label,children:["Drag&drop the ",this.props.inputName]}),Object(V.jsx)("div",{className:K.a.inputContainer,children:Object(V.jsx)("input",{"aria-label":"".concat(this.props.inputName," input"),className:K.a.input,type:"file",ref:this.templateInput,onChange:this.handleInput,accept:this.props.acceptedInputType,title:" "})}),e,t]})}}]),a}(b.Component),Object(u.a)(L.prototype,"handleInput",[f.a],Object.getOwnPropertyDescriptor(L.prototype,"handleInput"),L.prototype),Object(u.a)(L.prototype,"handleDrop",[f.a],Object.getOwnPropertyDescriptor(L.prototype,"handleDrop"),L.prototype),Object(u.a)(L.prototype,"dragEnter",[f.a],Object.getOwnPropertyDescriptor(L.prototype,"dragEnter"),L.prototype),Object(u.a)(L.prototype,"dragLeave",[f.a],Object.getOwnPropertyDescriptor(L.prototype,"dragLeave"),L.prototype),L),E=a(10),F=a(23),M=a(85),U=a.n(M),q=a(50),T=(D=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).pairsContainerRef=void 0,n.state={pairs:[],UICodeCharList:[]},n.pairsContainerRef=g.a.createRef(),n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t){if(e.templateCode!==this.props.templateCode&&(this.setState({pairs:[]}),this.props.templateCode)){var a,n=null===(a=this.props.templateCode)||void 0===a?void 0:a.slots.flatMap((function(e){return e[0]}));n&&this.setState({UICodeCharList:n})}t.pairs!==this.state.pairs&&(this.isAllPairsValid&&this.props.changeKernings(this.state.pairs),this.props.handleKerningsValidity(this.isAllPairsValid))}},{key:"addPair",value:function(){var e=this;this.setState((function(e){return{pairs:[].concat(Object(w.a)(e.pairs),[{amount:1}])}}),(function(){return e.scrollToBottom()}))}},{key:"scrollToBottom",value:function(){this.pairsContainerRef.current&&(this.pairsContainerRef.current.scrollTop=this.pairsContainerRef.current.scrollHeight)}},{key:"deletePair",value:function(e){var t=Object(w.a)(this.state.pairs);t.splice(e,1),this.setState({pairs:t})}},{key:"changeChar",value:function(e,t,a){var n=""===e.target.value?void 0:Object(q.a)(e.target.value.charAt(0)),r=Object(w.a)(this.state.pairs);r[t][a]=n,this.setState({pairs:r})}},{key:"changeAmount",value:function(e,t){var a=""===e.target.value?void 0:parseInt(e.target.value,10),n=Object(w.a)(this.state.pairs);n[t].amount=a,this.setState({pairs:n})}},{key:"isCharLegal",value:function(e){return void 0!==e&&this.state.UICodeCharList.includes(e)}},{key:"isPairUnrepeated",value:function(e){return this.state.pairs.filter((function(t){return e.first===t.first&&e.second===t.second})).length<2}},{key:"isWorkPairLegal",value:function(e){var t=e.first,a=e.second,n=e.amount,r=this.isCharLegal(t),i=this.isCharLegal(a);return r&&i&&!!n}},{key:"isPairValid",value:function(e){return this.isWorkPairLegal(e)&&this.isPairUnrepeated(e)}},{key:"isAllPairsValid",get:function(){var e=this;return!this.state.pairs.some((function(t){return!e.isPairValid(t)}))}},{key:"isAnyPairWithLegalCharsRepeated",get:function(){var e=this;return this.state.pairs.some((function(t){return!e.isPairUnrepeated(t)&&e.isCharLegal(t.first)&&e.isCharLegal(t.second)}))}},{key:"render",value:function(){var e=this,t=this.state.pairs.map((function(t,a){var n;return Object(V.jsxs)(b.Fragment,{children:[Object(V.jsx)("input",{"aria-label":"first letter input",className:"".concat(U.a.input," ").concat(e.isCharLegal(t.first)&&e.isPairUnrepeated(t)?"":U.a.inputInvalid),value:t.first?Object(q.b)(t.first):"",onChange:function(t){return e.changeChar(t,a,"first")},type:"text"}),Object(V.jsx)("input",{"aria-label":"second letter input",className:"".concat(U.a.input," ").concat(e.isCharLegal(t.second)&&e.isPairUnrepeated(t)?"":U.a.inputInvalid),value:t.second?Object(q.b)(t.second):"",onChange:function(t){return e.changeChar(t,a,"second")},type:"text"}),Object(V.jsx)("input",{"aria-label":"distance input",className:"".concat(U.a.input," ").concat(t.amount?"":U.a.inputInvalid),value:null!==(n=t.amount)&&void 0!==n?n:"",onChange:function(t){return e.changeAmount(t,a)},type:"number"}),Object(V.jsx)("button",{className:U.a.button,onClick:function(){return e.deletePair(a)},title:"Delete kerning pair",children:Object(V.jsx)(E.a,{icon:"fas fa-minus"})})]},a)}));return Object(V.jsxs)("div",{className:U.a.container,children:[Object(V.jsxs)("label",{className:U.a.label,children:["Kerning pairs",Object(V.jsx)(E.a,{icon:"fas fa-question",className:U.a.questionMark,title:"Pairs of characters with non-default distance from each other. Only supported by some engines"})]}),Object(V.jsxs)("div",{className:U.a.pairsContainer,ref:this.pairsContainerRef,children:[Object(V.jsx)("label",{className:U.a.pairsKey,children:"character 1"}),Object(V.jsx)("label",{className:U.a.pairsKey,children:"character 2"}),Object(V.jsxs)("label",{className:U.a.pairsKey,children:["distance",Object(V.jsx)(E.a,{icon:"fas fa-question",className:U.a.questionMark,title:" This value is added to the default character distance when character 2 immediately follows character 1. Can be negative."})]}),Object(V.jsx)("p",{className:U.a.pairsKey,children:Object(V.jsx)("button",{className:U.a.button,onClick:this.addPair,disabled:0===this.state.UICodeCharList.length,title:"Add kerning pair",children:Object(V.jsx)(E.a,{icon:"fas fa-plus"})})}),t]}),Object(V.jsx)("p",{className:"".concat(U.a.warning," ").concat(this.isAnyPairWithLegalCharsRepeated?"":U.a.warningOff),children:"Some pairs are defined multiple times!"})]})}}]),a}(b.Component),Object(u.a)(D.prototype,"addPair",[f.a],Object.getOwnPropertyDescriptor(D.prototype,"addPair"),D.prototype),Object(u.a)(D.prototype,"deletePair",[f.a],Object.getOwnPropertyDescriptor(D.prototype,"deletePair"),D.prototype),Object(u.a)(D.prototype,"changeChar",[f.a],Object.getOwnPropertyDescriptor(D.prototype,"changeChar"),D.prototype),Object(u.a)(D.prototype,"changeAmount",[f.a],Object.getOwnPropertyDescriptor(D.prototype,"changeAmount"),D.prototype),Object(u.a)(D.prototype,"isCharLegal",[f.a],Object.getOwnPropertyDescriptor(D.prototype,"isCharLegal"),D.prototype),Object(u.a)(D.prototype,"isPairValid",[f.a],Object.getOwnPropertyDescriptor(D.prototype,"isPairValid"),D.prototype),D),A=a(13),B=a(49);function W(e){var t=[];return new Promise((function(a){return e.forEach((function(n){var r=new Image;r.onload=function(){t.push(r),t.length===e.length&&a(t)},r.src=URL.createObjectURL(n)}))}))}function G(e,t,a){var n;if(t<=0||t>=e.length)return 0;var r=e.charCodeAt(t-1),i=e.charCodeAt(t),s=a.kernings.find((function(e){var t=e.first,a=e.second;return t===r&&a===i}));return null!==(n=null===s||void 0===s?void 0:s.amount)&&void 0!==n?n:0}function Y(e,t,a,n,r){return X.apply(this,arguments)}function X(){return(X=Object(s.a)(d.a.mark((function e(t,a,n,r,i){var s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(n);case 2:s=e.sent,o={x:a.info.padding.left,y:a.info.padding.up},i.clearRect(0,0,i.canvas.width,i.canvas.height),i.strokeStyle="black",Object(w.a)(t).forEach((function(e,n){if("\n"===e)return o.x=0,void(o.y+=a.info.spacing.vertical+a.common.lineHeight);var c=a.chars.find((function(t){return t.id===e.charCodeAt(0)})),l=!1;c||(c=a.chars[0],l=!0);var p=l?0:G(t,n,a),u=s[c.page],h={x:o.x+c.xoffset+p,y:o.y+c.yoffset};if((h.x+c.width)*r>=i.canvas.width&&(o.x=0,o.y+=a.info.spacing.vertical+a.common.lineHeight,h.x=o.x+c.xoffset+p,h.y=o.y+c.yoffset),l){var d=h.x+c.width/4,f=h.y+c.height/4,b=2*c.width/4,g=2*c.height/4;i.strokeRect(d*r,f*r,b*r,g*r)}else i.drawImage(u,c.x,c.y,c.width,c.height,h.x*r,h.y*r,c.width*r,c.height*r);o.x+=c.xadvance+a.info.spacing.horizontal+p}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z,J=a(86),Q=a.n(J),$=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).canvas=void 0,n.canvasContainer=void 0,n.state={text:"",scale:1},n.canvas=g.a.createRef(),n.canvasContainer=g.a.createRef(),n}return Object(c.a)(a,[{key:"draw",value:function(){var e=Object(s.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.canvas.current&&this.props.templateImg&&this.props.templateCode)){e.next=6;break}return t=this.canvas.current.getContext("2d"),e.next=4,y(this.props.templateImg,this.props.templateCode,this.props.fontConfig);case 4:a=e.sent,t&&Y(this.state.text,a[0],a[1],this.state.scale,t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.draw()}},{key:"componentDidUpdate",value:function(){this.draw()}},{key:"handleBgColorChange",value:function(e){var t;null===(t=this.canvasContainer.current)||void 0===t||t.style.setProperty("--bgColor",e)}},{key:"render",value:function(){var e=this;return Object(V.jsxs)("div",{className:Q.a.container,children:[Object(V.jsxs)("div",{className:Q.a.controls,children:[Object(V.jsx)("textarea",{"aria-label":"preview text input",onChange:function(t){return e.setState({text:t.target.value})},value:this.state.text,className:Q.a.previewInput,placeholder:"Type to preview the font"}),Object(V.jsxs)("div",{children:[Object(V.jsx)("label",{className:Q.a.label,children:"Scale"}),Object(V.jsx)("input",{"aria-label":"preview scale input",type:"number",step:.01,min:.01,onChange:function(t){return e.setState({scale:parseFloat(t.target.value)})},value:isNaN(this.state.scale)?"":this.state.scale,className:Q.a.scaleInput})]}),Object(V.jsxs)("div",{children:[Object(V.jsx)("label",{className:Q.a.label,children:"Background"}),Object(V.jsx)("input",{"aria-label":"preview color input",type:"color",className:Q.a.colorInput,defaultValue:"#ffffff",onChange:function(t){return e.handleBgColorChange(t.target.value)}})]})]}),Object(V.jsx)("div",{className:Q.a.previewContainer,ref:this.canvasContainer,style:{width:this.props.width,maxHeight:this.props.height},children:Object(V.jsx)("canvas",{width:this.props.width,height:this.props.height,ref:this.canvas})})]})}}]),a}(b.Component),ee=$,te=a(38),ae=window.require?window.require("electron").ipcRenderer:null,ne=(Z=function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={horizontalMargin:0,verticalMargin:0,lineHeight:0,kerningPairs:[],isKerningsValid:!0},n}return Object(c.a)(a,[{key:"handleTemplateDropzoneInput",value:function(){var e=Object(s.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isTemplateFileValid(t)){e.next=3;break}return this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{templateError:"Uploaded file isn't a valid template.",template:void 0})})),e.abrupt("return");case 3:this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{templateError:void 0,templateCodeError:void 0,template:t})}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCodeDropzoneInput",value:function(){var e=Object(s.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isCodeFileValid(t);case 2:if(e.sent){e.next=5;break}return this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{templateCodeError:"Uploaded file isn't valid.",templateCode:void 0})})),e.abrupt("return");case 5:return e.t0=B.a,e.next=8,t.text();case 8:if(e.t1=e.sent,a=(0,e.t0)(e.t1)){e.next=13;break}return this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},{templateCodeError:"Uploaded code isn't valid.",templateCode:void 0})})),e.abrupt("return");case 13:this.setState((function(e){var n,r;return Object(i.a)(Object(i.a)({},e),{},{templateError:void 0,templateCodeError:void 0,templateCode:a,templateCodeName:t.name,lineHeight:null!==(n=null===(r=a.slots[0])||void 0===r?void 0:r[2])&&void 0!==n?n:0})}));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isCodeFileValid",value:function(){var e=Object(s.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!t&&"text/plain"===t.type);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isTemplateFileValid",value:function(e){return!!e&&"image/png"===e.type}},{key:"areDropzonesValid",value:function(){return!this.state.templateError&&!this.state.templateCodeError&&!!this.state.template&&!!this.state.templateCode&&this.state.isKerningsValid}},{key:"handleNumericalInput",value:function(e,t){var a=""===e.target.value?"":parseInt(e.target.value,10);(""===a||a>=0)&&this.setState((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(r.a)({},t,a))}))}},{key:"downloadFont",value:function(){var e=Object(s.a)(d.a.mark((function e(t){var a,r,i,s,o,c,l,p,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.template&&this.state.templateCode){e.next=2;break}return e.abrupt("return");case 2:if(a=this.state.template,this.state.templateCode){e.next=6;break}return console.warn("Cannot generate a font in the current app state."),e.abrupt("return");case 6:return e.next=8,y(a,this.state.templateCode,this.getFontConfig());case 8:if(r=e.sent,i=Object(n.a)(r,2),s=i[0],o=i[1],c=k(s,t),!Object(A.a)()){e.next=27;break}l=[],p=0;case 16:if(!(p<o.length)){e.next=24;break}return e.next=19,o[p].arrayBuffer();case 19:u=e.sent,l.push(u);case 21:p++,e.next=16;break;case 24:null===ae||void 0===ae||ae.send("save-font",c,l),e.next=28;break;case 27:P(c,o);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFontConfig",value:function(){return{horizontalSpacing:Object(F.a)(this.state.horizontalMargin),verticalSpacing:Object(F.a)(this.state.verticalMargin),lineHeight:Object(F.a)(this.state.lineHeight),kernings:this.state.kerningPairs}}},{key:"changeKernings",value:function(e){this.setState({kerningPairs:e})}},{key:"handleKerningsValidity",value:function(e){this.setState({isKerningsValid:e})}},{key:"render",value:function(){var e,t=this;return Object(V.jsxs)("div",{className:"".concat(R.a.container," ").concat(Object(A.a)()?R.a.desktop:""),children:[Object(V.jsx)(te.a,{title:"Font Generation | Calligro"}),Object(V.jsxs)("div",{children:[Object(V.jsxs)("div",{className:"".concat(R.a.dropzones," ").concat(Object(A.a)()?R.a.desktop:""),children:[Object(V.jsx)(H,{inputName:"image",acceptedInputType:".png",dataType:"image/png",handleDropzoneInput:this.handleTemplateDropzoneInput,fileName:null===(e=this.state.template)||void 0===e?void 0:e.name,error:this.state.templateError}),Object(V.jsx)(H,{inputName:"code file",acceptedInputType:".calligro",dataType:"text/plain",handleDropzoneInput:this.handleCodeDropzoneInput,fileName:this.state.templateCodeName,error:this.state.templateCodeError})]}),Object(V.jsxs)("div",{className:R.a.options,children:[Object(V.jsx)("label",{className:R.a.label,children:"Font options"}),Object(V.jsxs)("div",{className:R.a.option,children:[Object(V.jsx)("label",{className:R.a.optionsLabel,children:"Margin"}),Object(V.jsx)("input",{"aria-label":"horizontal margin input",className:R.a.optionsInput,type:"number",onChange:function(e){return t.handleNumericalInput(e,"horizontalMargin")},value:this.state.horizontalMargin}),Object(V.jsx)(E.a,{icon:"fas fa-times",className:R.a.times}),Object(V.jsx)("input",{"aria-label":"vertical margin input",className:R.a.optionsInput,type:"number",onChange:function(e){return t.handleNumericalInput(e,"verticalMargin")},value:this.state.verticalMargin}),Object(V.jsx)(E.a,{icon:"fas fa-question",className:R.a.questionMark,title:"Horizontal and vertical distance between characters in pixels"})]}),Object(V.jsxs)("div",{className:R.a.option,children:[Object(V.jsx)("label",{className:R.a.optionsLabel,children:"Line height"}),Object(V.jsx)("input",{"aria-label":"line height input",className:R.a.optionsInput,type:"number",onChange:function(e){return t.handleNumericalInput(e,"lineHeight")},value:this.state.lineHeight}),Object(V.jsx)(E.a,{icon:"fas fa-question",className:R.a.questionMark,title:"Distance from the top of a line to the top of the next one in pixels"})]}),Object(V.jsx)(T,{templateCode:this.state.templateCode,changeKernings:this.changeKernings,handleKerningsValidity:this.handleKerningsValidity}),Object(V.jsxs)("div",{className:R.a.download,children:[Object(V.jsx)("label",{className:R.a.buttonsContainerLabel,children:"".concat(Object(A.a)()?"save":"download"," font")}),Object(V.jsxs)("div",{className:R.a.buttons,children:[Object(V.jsxs)("div",{children:[Object(V.jsx)("button",{onClick:function(){return t.downloadFont("txt")},className:R.a.formButton,disabled:!this.areDropzonesValid(),children:"txt format"}),Object(V.jsx)(E.a,{icon:"fas fa-question",className:R.a.questionMark,title:"Supported by Godot, LibGDX, L\xd6VE, Heaps.io and possibly others."})]}),Object(V.jsxs)("div",{children:[Object(V.jsx)("button",{onClick:function(){return t.downloadFont("xml")},className:R.a.formButton,disabled:!this.areDropzonesValid(),children:"xml format"}),Object(V.jsx)(E.a,{icon:"fas fa-question",className:R.a.questionMark,title:"Supported by Phaser, HaxeFlixel and possibly others."})]})]}),Object(V.jsxs)("p",{className:R.a.samplesParagraph,children:["Check",Object(V.jsx)("a",{href:"https://github.com/Voycawojka/calligro/tree/main/samples",className:R.a.samplesLink,target:"_blank",rel:"noreferrer",children:"our samples"}),"to see how to use it"]})]})]})]}),Object(V.jsxs)("div",{children:[Object(V.jsx)("div",{className:"".concat(R.a.previewContainer," ").concat(Object(A.a)()?R.a.desktop:""),children:Object(V.jsx)(ee,{width:400,height:250,templateCode:this.state.templateCode,templateImg:this.state.template,fontConfig:this.getFontConfig()})}),Object(V.jsxs)("div",{children:[Object(V.jsx)("h2",{className:R.a.heading,children:"Step 2 - Generate your font"}),Object(V.jsxs)("ol",{className:R.a.instructionList,children:[Object(V.jsx)("li",{className:R.a.instructionListItem,children:"Upload the template image with your characters drawn on it and the corresponding .calligro file (metadata)."}),Object(V.jsx)("li",{className:R.a.instructionListItem,children:"Specify font options"}),Object(V.jsxs)("li",{className:R.a.instructionListItem,children:[Object(V.jsx)("p",{children:'Add kerning pairs if you want to. Characters in a pair are rendered further or closer to each other. E.g. pair "ab" with distance -10 will cause "b" to be 10 pixels closer to "a". Pair "ab" \u2260 "ba"!'}),Object(V.jsx)("p",{children:"Warning - not all tools support this feature. We know Godot does."})]}),Object(V.jsx)("li",{className:R.a.instructionListItem,children:"Preview changes live at any point."}),Object(V.jsx)("li",{className:R.a.instructionListItem,children:"Generate and download your BMFont."})]})]})]})]})}}]),a}(b.Component),Object(u.a)(Z.prototype,"handleTemplateDropzoneInput",[f.a],Object.getOwnPropertyDescriptor(Z.prototype,"handleTemplateDropzoneInput"),Z.prototype),Object(u.a)(Z.prototype,"handleCodeDropzoneInput",[f.a],Object.getOwnPropertyDescriptor(Z.prototype,"handleCodeDropzoneInput"),Z.prototype),Object(u.a)(Z.prototype,"areDropzonesValid",[f.a],Object.getOwnPropertyDescriptor(Z.prototype,"areDropzonesValid"),Z.prototype),Object(u.a)(Z.prototype,"handleNumericalInput",[f.a],Object.getOwnPropertyDescriptor(Z.prototype,"handleNumericalInput"),Z.prototype),Object(u.a)(Z.prototype,"downloadFont",[f.a],Object.getOwnPropertyDescriptor(Z.prototype,"downloadFont"),Z.prototype),Object(u.a)(Z.prototype,"changeKernings",[f.a],Object.getOwnPropertyDescriptor(Z.prototype,"changeKernings"),Z.prototype),Object(u.a)(Z.prototype,"handleKerningsValidity",[f.a],Object.getOwnPropertyDescriptor(Z.prototype,"handleKerningsValidity"),Z.prototype),Z);t.default=ne}}]);
//# sourceMappingURL=3.e1d0686f.chunk.js.map